parameters:
    pimee_datagrid.datasource.product_history.class: Pim\Bundle\DataGridBundle\Datasource\Datasource
    pimee_datagrid.datasource.product_draft.class:     Pim\Bundle\DataGridBundle\Datasource\Datasource

services:
    pim_catalog.product_history.product:
        class: %pim_datagrid.datasource.default.class%
        arguments:
            - '@pim_catalog.object_manager.product'
            - '@pimee_datagrid.datasource.result_record.hydrator.product_history'
        tags:
            - { name: oro_datagrid.datasource, type: pimee_datasource_product_history }

    pim_catalog.datasource.published_product:
        class: %pim_datagrid.datasource.product.class%
        arguments:
            - '@pim_catalog.object_manager.product'
            - '@pim_datagrid.datasource.result_record.hydrator.product'
            - '@pimee_workflow.doctrine.query.published_product_query_factory'
        calls:
            - [ setMassActionRepository, ['@pimee_workflow.repository.published_product_mass_action' ]]
        tags:
            - { name: oro_datagrid.datasource, type: pimee_datasource_published_product }

    pimee_catalog.datasource.product_draft:
        class: %pimee_datagrid.datasource.product_draft.class%
        arguments:
            - '@pim_catalog.object_manager.product'
            - '@pim_datagrid.datasource.result_record.hydrator.product_draft'
        tags:
            - { name: oro_datagrid.datasource, type: pimee_datasource_product_draft }

    pim_datagrid.datasource.support_resolver:
        class: %pim_datagrid.datasource.support_resolver.class%
        arguments:
            - %pim_catalog_product_storage_driver%
        calls:
            - [addSmartDatasource, ['pim_datasource_product']]
            - [addSmartDatasource, ['pim_datasource_associated_product']]
            - [addSmartDatasource, ['pim_datasource_smart']]
            - [addSmartDatasource, ['pimee_datasource_product_history']]
            - [addSmartDatasource, ['pimee_datasource_published_product']]
            - [addSmartDatasource, ['pimee_datasource_product_draft']]

    pim_datagrid.datasource.adapter_resolver:
        class: %pim_datagrid.datasource.adapter_resolver.class%
        arguments:
            - '@pim_datagrid.datasource.support_resolver'
            - %pim_filter.datasource.orm_adapter.class%
            - %pim_filter.datasource.product_orm_adapter.class%
        calls:
            - [addProductDatasource, ['pim_datasource_product']]
            - [addProductDatasource, ['pim_datasource_associated_product']]
            - [addProductDatasource, ['pimee_datasource_published_product']]
