parameters:
    pimee_catalog_rule.action_applier.setter.class:  Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\SetterActionApplier
    pimee_catalog_rule.action_applier.copier.class:  Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\CopierActionApplier
    pimee_catalog_rule.action_applier.adder.class:   Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\AdderActionApplier
    pimee_catalog_rule.action_applier.remover.class: Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\RemoverActionApplier
    pimee_catalog_rule.action_applier.concatenate.class: Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\ConcatenateActionApplier
    pimee_catalog_rule.action_applier.calculate.class: Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\CalculateActionApplier

services:
    pimee_catalog_rule.action_applier.setter:
        class: '%pimee_catalog_rule.action_applier.setter.class%'
        arguments:
            - '@pim_catalog.updater.property_setter'
            - '@pim_catalog.repository.attribute'
        tags:
            - { name: akeneo_rule_engine.action_applier, priority: 100 }

    pimee_catalog_rule.action_applier.copier:
        class: '%pimee_catalog_rule.action_applier.copier.class%'
        arguments:
            - '@pim_catalog.updater.property_copier'
            - '@pim_catalog.repository.attribute'
        tags:
            - { name: akeneo_rule_engine.action_applier, priority: 100 }

    pimee_catalog_rule.action_applier.adder:
        class: '%pimee_catalog_rule.action_applier.adder.class%'
        arguments:
            - '@pim_catalog.updater.property_adder'
            - '@pim_catalog.repository.attribute'
        tags:
            - { name: akeneo_rule_engine.action_applier, priority: 100 }

    pimee_catalog_rule.action_applier.remover:
        class: '%pimee_catalog_rule.action_applier.remover.class%'
        arguments:
            - '@pim_catalog.updater.property_remover'
            - '@pim_catalog.repository.attribute'
            - '@pim_catalog.repository.category'
        tags:
            - { name: akeneo_rule_engine.action_applier, priority: 100 }

    pimee_catalog_rule.action_applier.clearer:
        class: 'Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\ClearerActionApplier'
        arguments:
            - '@pim_catalog.updater.property_clearer'
            - '@akeneo.pim.structure.query.get_attributes'
        tags:
            - { name: akeneo_rule_engine.action_applier, priority: 100 }

    pimee_catalog_rule.action_applier.concatenate:
        class: '%pimee_catalog_rule.action_applier.concatenate.class%'
        arguments:
            - '@pim_catalog.updater.property_setter'
            - '@Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\Concatenate\ValueStringifierRegistry'
            - '@akeneo.pim.structure.query.get_attributes'
        tags:
            - { name: akeneo_rule_engine.action_applier, priority: 100 }

    pimee_catalog_rule.action_applier.calculate:
        class: '%pimee_catalog_rule.action_applier.calculate.class%'
        arguments:
            - '@pim_catalog.updater.property_setter'
            - '@pim_catalog.updater.property_adder'
            - '@akeneo.pim.structure.query.get_attributes'
        tags:
            - { name: akeneo_rule_engine.action_applier, priority: 100 }

    # Concatenate extractors
    Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\Concatenate\ValueStringifierRegistry:
        arguments:
            - !tagged akeneo_rule_engine.concatenate_applier.stringifier

    Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\Concatenate\DefaultValueStringifier:
        arguments:
            -
                - 'pim_catalog_identifier'
                - 'pim_catalog_number'
                - 'pim_catalog_text'
        tags:
            - { name: akeneo_rule_engine.concatenate_applier.stringifier }

    Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\Concatenate\DateValueStringifier:
        arguments:
            -
                - 'pim_catalog_date'
        tags:
            - { name: akeneo_rule_engine.concatenate_applier.stringifier }

    Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\Concatenate\MetricValueStringifier:
        arguments:
            -
                - 'pim_catalog_metric'
        tags:
            - { name: akeneo_rule_engine.concatenate_applier.stringifier }

    Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\Concatenate\PriceCollectionValueStringifier:
        arguments:
            -
                - 'pim_catalog_price_collection'
        tags:
            - { name: akeneo_rule_engine.concatenate_applier.stringifier }

    Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\Concatenate\TextareaValueStringifier:
        arguments:
            - '@pim_catalog.repository.attribute'
            -
                - 'pim_catalog_textarea'
        tags:
            - { name: akeneo_rule_engine.concatenate_applier.stringifier }

    Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\Concatenate\OptionValueStringifier:
        arguments:
            - '@akeneo.pim.structure.query.get_existing_attribute_options_with_values'
            -
                - 'pim_catalog_simpleselect'
                - 'pim_catalog_multiselect'
        tags:
            - { name: akeneo_rule_engine.concatenate_applier.stringifier }

    Akeneo\Pim\Automation\RuleEngine\Component\ActionApplier\Concatenate\ReferenceEntityValueStringifier:
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_record_details'
            - '@akeneo.pim.structure.query.get_attributes'
            -
                - 'akeneo_reference_entity'
                - 'akeneo_reference_entity_collection'
        tags:
            - { name: akeneo_rule_engine.concatenate_applier.stringifier }
