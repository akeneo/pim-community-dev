parameters:
    # Datagrid
    pimee_security.event_subscriber.datagrid.product_category_access.class: PimEnterprise\Bundle\SecurityBundle\EventSubscriber\Datagrid\ProductCategoryAccessSubscriber
    pimee_security.event_subscriber.datagrid.asset_category_access.class:   PimEnterprise\Bundle\SecurityBundle\EventSubscriber\Datagrid\AssetCategoryAccessSubscriber

    # Enrich
    pimee_security.event_subscriber.enrich.job_permissions.class:            PimEnterprise\Bundle\SecurityBundle\EventSubscriber\Enrich\JobPermissionsSubscriber

    pimee_security.event_subscriber.add_default_permissions.class: PimEnterprise\Bundle\SecurityBundle\EventSubscriber\AddDefaultPermissionsSubscriber

services:
    # Datagrid
    pimee_security.event_subscriber.datagrid.product_category_access:
        class: '%pimee_security.event_subscriber.datagrid.product_category_access.class%'
        arguments:
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
        tags:
            - { name: kernel.event_subscriber }

    pimee_security.event_subscriber.datagrid.asset_category_access:
        class: '%pimee_security.event_subscriber.datagrid.asset_category_access.class%'
        arguments:
            - '@security.token_storage'
            - '@pimee_product_asset.repository.asset_category_access'
            - '@pimee_product_asset.repository.asset'
        tags:
            - { name: kernel.event_subscriber }

    # Enrich
    pimee_security.event_subscriber.enrich.job_permissions:
        class: '%pimee_security.event_subscriber.enrich.job_permissions.class%'
        arguments:
            - '@security.authorization_checker'
        tags:
            - { name: kernel.event_subscriber }

    pimee_security.event_subscriber.add_default_permissions:
        class: '%pimee_security.event_subscriber.add_default_permissions.class%'
        arguments:
            - '@pim_user.repository.group'
            - '@pimee_security.manager.attribute_group_access'
            - '@pimee_security.manager.job_profile_access'
        tags:
            - { name: kernel.event_subscriber }
