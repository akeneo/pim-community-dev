# PIM SaaS instance specific
#PFID: Unique ID for the PIM instance

###
# Charts components default definition
###

pim:
  replicas: 1
  numDaemon: 1
  persistence:
    diskSize: 50Gi  
  # Default Catalog Installation
  defaultCatalog: minimal
  jobs:
    batch-purge:
      enabled: true
      pimCommand: "akeneo:batch:purge-job-execution"
      schedule: "0 0 1 * *"
    completeness-calculate:
      enabled: true
      pimCommand: "pim:completeness:calculate"
      schedule: "0 2 1 * *"
    rule-run:
      enabled: true
      pimCommand: "akeneo:rule:run"
      schedule: "0 5 * * *"
    versionning-refresh:
      enabled: true
      pimCommand: "pim:versioning:refresh"
      schedule: "0 3 * * *"
    volume-aggregate:
      enabled: true
      pimCommand: "pim:volume:aggregate"
      schedule: "0 4 * * *"

# Mysql
mysql:
  mysql:
    dataDiskSize: "50"
  common:
    extraLabels:
      backup.enabled: "true"
    # K8S storage class
    class: ssd-retain

# Elasticsearch
elasticsearch:
  common:
    stateful:
      class: "ssd-retain"

  client:
    replicas: 2
    heapMemory: 256m
    resources:
      requests:
        memory: 512Mi

  data:
    replicas: 2
    heapMemory: 1024m
    resources:
      requests:
        memory: 2048Mi
    stateful:
      size: 10Gi

  master:
    replicas: 2
    heapMemory: 256m
    resources:
      requests:
        memory: 512Mi
    env:
      NUMBER_OF_MASTERS: "2"
      # Required to expose /_prometheus/metrics to ServiceMonitor
    stateful:
      size: 1Gi
