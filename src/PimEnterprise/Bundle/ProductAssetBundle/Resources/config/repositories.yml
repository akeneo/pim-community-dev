parameters:
    pimee_product_asset.repository.asset.class:                 PimEnterprise\Bundle\ProductAssetBundle\Doctrine\ORM\Repository\AssetRepository
    pimee_product_asset.repository.channel_configuration.class: PimEnterprise\Bundle\ProductAssetBundle\Doctrine\ORM\Repository\ChannelConfigurationRepository
    pimee_product_asset.repository.file_metadata.class:         PimEnterprise\Bundle\ProductAssetBundle\Doctrine\ORM\Repository\FileMetadataRepository
    pimee_product_asset.repository.reference.class:             PimEnterprise\Bundle\ProductAssetBundle\Doctrine\ORM\Repository\ReferenceRepository
    pimee_product_asset.repository.variation.class:             PimEnterprise\Bundle\ProductAssetBundle\Doctrine\ORM\Repository\VariationRepository
    pimee_product_asset.repository.asset_category.class:        PimEnterprise\Bundle\ProductAssetBundle\Doctrine\ORM\Repository\AssetCategoryRepository
    pimee_product_asset.repository.category.class:              Pim\Bundle\ClassificationBundle\Doctrine\ORM\Repository\CategoryRepository
    pimee_product_asset.repository.tag.class:                   Pim\Bundle\ClassificationBundle\Doctrine\ORM\Repository\TagRepository

services:
    pimee_product_asset.repository.channel_configuration:
        class: %pimee_product_asset.repository.channel_configuration.class%
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments: [%pimee_product_asset.model.channel_variations_configuration.class%]
        tags:
            - { name: 'pim_repository' }

    pimee_product_asset.repository.asset:
        class: %pimee_product_asset.repository.asset.class%
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments: [%pimee_product_asset.model.asset.class%]
        calls:
            - [setProductClass, ['%pim_catalog.entity.product.class%']]
        tags:
            - { name: 'pim_repository' }

    pimee_product_asset.repository.file_metadata:
        class: %pimee_product_asset.repository.file_metadata.class%
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - %pimee_product_asset.model.file_metadata.class%
        tags:
            - { name: 'pim_repository' }

    pimee_product_asset.repository.reference:
        class: %pimee_product_asset.repository.reference.class%
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - %pimee_product_asset.model.reference.class%
        tags:
            - { name: 'pim_repository' }

    pimee_product_asset.repository.variation:
        class: %pimee_product_asset.repository.variation.class%
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - %pimee_product_asset.model.variation.class%
        tags:
            - { name: 'pim_repository' }

    pimee_product_asset.repository.category:
        class: %pimee_product_asset.repository.category.class%
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - %pimee_product_asset.model.category.class%
        tags:
            - { name: 'pim_repository' }

    pimee_product_asset.repository.asset_category:
        class:  %pimee_product_asset.repository.asset_category.class%
        parent: pim_classification.repository.abstract_item_category
        arguments:
            - '@doctrine.orm.entity_manager'
            - %pimee_product_asset.model.asset.class%

    pimee_product_asset.repository.tag:
        class: %pimee_product_asset.repository.tag.class%
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments:
            - %pimee_product_asset.model.tag.class%
        tags:
            - { name: 'pim_repository' }

    pimee_product_asset.repository.asset_category_access:
        class: %pimee_security.repository.category_access.class%
        factory_service: doctrine.orm.entity_manager
        factory_method: getRepository
        arguments: [%pimee_security.entity.asset_category_access.class%]
        tags:
            - { name: 'pim_repository' }
        calls:
            - [setTableNameBuilder, ['@akeneo_storage_utils.doctrine.table_name_builder']]
