parameters:
    pim_enrich.serializer.normalizer.rule_relation.class: PimEnterprise\Bundle\EnrichBundle\Normalizer\RuleRelationNormalizer
    pimee_enrich.normalizer.version.class:                PimEnterprise\Bundle\EnrichBundle\Normalizer\VersionNormalizer

services:
    pim_enrich.serializer.normalizer.granted_product:
        parent: pim_enrich.normalizer.product
        calls:
            - [setFilters, [['@pim_serializer.filter.product_value', '@pimee_transform.serializer.filter.granted_product_value']]]
        tags:
            - { name: pim_internal_api_serializer.normalizer, priority: 100 }

    pim_enrich.serializer.normalizer.granted_family:
        parent: pim_serializer.normalizer.family
        calls:
            - [setFilters, [['@pimee_transform.serializer.filter.granted_attribute']]]
        tags:
            - { name: pim_internal_api_serializer.normalizer, priority: 100 }

    pim_enrich.serializer.normalizer.rule_relation:
        class: %pim_enrich.serializer.normalizer.rule_relation.class%
        arguments:
            - '@pim_catalog.doctrine.smart_manager_registry'
        tags:
            - { name: pim_internal_api_serializer.normalizer, priority: 100 }

    pimee_enrich.normalizer.version:
        class: %pimee_enrich.normalizer.version.class%
        arguments:
            - '@pim_enrich.normalizer.version'
            - '@pim_catalog.doctrine.smart_manager_registry'
            - %pimee_workflow.entity.published_product.class%
        tags:
            - { name: pim_internal_api_serializer.normalizer, priority: 120 }
