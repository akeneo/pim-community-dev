services:
    ## INTERNAL
    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Internal\GetAppActivateUrlAction:
        public: true
        arguments:
            - '@akeneo_connectivity.connection.marketplace.get_app_query'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\OAuth\ClientProvider'
            - '@akeneo_connectivity.connection.marketplace.app_url_generator'
            - '@oro_security.security_facade'
            - '@akeneo_connectivity.connection.marketplace_activate.feature'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Persistence\Dbal\Query\IsConnectionsNumberLimitReachedQuery'

    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Internal\ConfirmAuthorizationAction:
        public: true
        arguments:
            - '@Akeneo\Connectivity\Connection\Application\Apps\Command\CreateAppWithAuthorizationHandler'
            - '@akeneo_connectivity.connection.marketplace_activate.feature'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Persistence\GetAppConfirmationQuery'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Normalizer\ViolationListNormalizer'
            - '@oro_security.security_facade'
            - '@logger'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\OAuth\RedirectUriWithAuthorizationCodeGenerator'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Session\AppAuthorizationSession'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Security\ConnectedPimUserProvider'
            - '@Akeneo\Connectivity\Connection\Application\Apps\Command\ConsentAppAuthenticationHandler'

    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Internal\ConfirmAuthenticationAction:
        public: true
        arguments:
            - '@akeneo_connectivity.connection.marketplace_activate.feature'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Persistence\GetAppConfirmationQuery'
            - '@oro_security.security_facade'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\OAuth\RedirectUriWithAuthorizationCodeGenerator'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Session\AppAuthorizationSession'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Security\ConnectedPimUserProvider'
            - '@Akeneo\Connectivity\Connection\Application\Apps\Command\ConsentAppAuthenticationHandler'
            - '@logger'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Normalizer\ViolationListNormalizer'

    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Internal\GetAllConnectedAppsAction:
        public: true
        arguments:
            - '@akeneo_connectivity.connection.marketplace_activate.feature'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Persistence\FindAllConnectedAppsQuery'

    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Internal\GetConnectedAppAction:
        public: true
        arguments:
            - '@akeneo_connectivity.connection.marketplace_activate.feature'
            - '@oro_security.security_facade'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Persistence\FindOneConnectedAppByConnectionCodeQuery'

    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Internal\GetAllConnectedAppScopeMessagesAction:
        public: true
        arguments:
            - '@akeneo_connectivity.connection.marketplace_activate.feature'
            - '@oro_security.security_facade'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Persistence\FindOneConnectedAppByConnectionCodeQuery'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Security\ScopeMapperRegistry'

    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Internal\DeleteAppAction:
        public: true
        arguments:
            - '@akeneo_connectivity.connection.marketplace_activate.feature'
            - '@oro_security.security_facade'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Persistence\FindOneConnectedAppByConnectionCodeQuery'
            - '@Akeneo\Connectivity\Connection\Application\Apps\Command\DeleteAppHandler'

    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Internal\GetConnectedAppMonitoringSettingsAction:
        public: true
        arguments:
            - '@akeneo_connectivity.connection.marketplace_activate.feature'
            - '@oro_security.security_facade'
            - '@akeneo_connectivity.connection.application.handler.find_a_connection'

    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Internal\UpdateConnectedAppMonitoringSettingsAction:
        public: true
        arguments:
            - '@akeneo_connectivity.connection.marketplace_activate.feature'
            - '@oro_security.security_facade'
            - '@akeneo_connectivity.connection.application.handler.find_a_connection'
            - '@akeneo_connectivity.connection.application.handler.update_connection'

    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Internal\GetWizardDataAction:
        public: true
        arguments:
            - '@akeneo_connectivity.connection.marketplace.get_app_query'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Session\AppAuthorizationSession'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Security\ScopeMapperRegistry'

    ## PUBLIC
    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Public\AuthorizeAction:
        public: true
        arguments:
            - '@Akeneo\Connectivity\Connection\Application\Apps\Command\RequestAppAuthorizationHandler'
            - '@router'
            - '@akeneo_connectivity.connection.marketplace_activate.feature'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Session\AppAuthorizationSession'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Persistence\GetAppConfirmationQuery'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\OAuth\RedirectUriWithAuthorizationCodeGenerator'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Security\ConnectedPimUserProvider'
            - '@Akeneo\Connectivity\Connection\Application\Apps\Command\RequestAppAuthenticationHandler'
            - '@oro_security.security_facade'

    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Public\RequestAccessTokenAction:
        public: true
        arguments:
            - '@akeneo_connectivity.connection.marketplace_activate.feature'
            - '@validator'
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\OAuth\CreateAccessToken'

    Akeneo\Connectivity\Connection\Infrastructure\Apps\Controller\Public\GetOpenIdPublicKeyAction:
        public: true
        arguments:
            - '@Akeneo\Connectivity\Connection\Infrastructure\Apps\Persistence\GetAsymmetricKeysQuery'
