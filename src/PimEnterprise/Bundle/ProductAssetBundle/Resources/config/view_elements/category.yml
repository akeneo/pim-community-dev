parameters:
    pimee_product_asset.view_element.tab.category_permission.template: 'PimEnterpriseEnrichBundle:CategoryTree:Tab/permission.html.twig'

services:
    pimee_product_asset.view_element.category.tab.property:
        parent: pim_enrich.view_element.base
        arguments:
            - 'pim_enrich.category.tab.property'
            - '%pim_enrich.view_element.category.tab.property.template%'
        tags:
            - { name: pim_enrich.view_element, type: pimee_asset_category.form_tab, position: 90 }

    pimee_product_asset.view_element.category.tab.category_permission:
        parent: pim_enrich.view_element.base
        arguments:
            - 'pimee_enrich.category.tab.permission'
            - '%pimee_product_asset.view_element.tab.category_permission.template%'
        calls:
            - [ addVisibilityChecker, ['@pim_enrich.view_element.visibility_checker.edit_form'] ]
            - [ addVisibilityChecker, ['@pim_enrich.view_element.visibility_checker.acl', {acl: 'pimee_product_asset_category_edit_permissions'}] ]
            - [ addVisibilityChecker, ['@pim_enrich.view_element.visibility_checker.non_empty_property', {property: '[form].children[permissions]'}] ]
        tags:
            - { name: pim_enrich.view_element, type: pimee_asset_category.form_tab, position: 100 }

    pimee_product_asset.view_element.category.tab.history:
        parent: pim_enrich.view_element.base
        arguments:
            - 'pim_enrich.category.tab.history'
            - '%pim_enrich.view_element.category.tab.history.template%'
        calls:
            - [ addVisibilityChecker, ['@pim_enrich.view_element.visibility_checker.edit_form'] ]
            - [ addVisibilityChecker, ['@pim_enrich.view_element.visibility_checker.acl', {acl: 'pimee_product_asset_category_history'}] ]
        tags:
            - { name: pim_enrich.view_element, type: pimee_asset_category.form_tab, position: 110 }
