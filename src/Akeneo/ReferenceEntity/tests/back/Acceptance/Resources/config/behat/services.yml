services:
    _defaults:
        public: true

    akeneo_referenceentity.tests.back.acceptance.context.exception_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\ExceptionContext

    akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\ConstraintViolationsContext

    akeneo_referenceentity.tests.back.acceptance.context.edit_reference_entity_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\EditReferenceEntityContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.reference_entity'
            - '@akeneo_referenceentity.application.reference_entity.edit_reference_entity_handler'
            - '@akeneo_referenceentity.application.reference_entity.create_reference_entity_handler'
            - '@validator'
            - '@akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_activated_locales_by_identifiers'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_reference_entity_attribute_as_label'


    akeneo_referenceentity.tests.back.acceptance.context.delete_reference_entity_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\DeleteReferenceEntityContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.reference_entity'
            - '@akeneo_referenceentity.application.reference_entity.delete_reference_entity_handler'
            - '@akeneo_referenceentity.infrastructure.persistence.query.reference_entity_exists'
            - '@validator'
            - '@akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context'


    akeneo_referenceentity.tests.back.acceptance.context.create_reference_entity_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\CreateReferenceEntityContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.reference_entity'
            - '@akeneo_referenceentity.application.reference_entity.create_reference_entity_handler'
            - '@validator'
            - '@akeneo_referenceentity.tests.back.acceptance.context.exception_context'
            - '@akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_activated_locales_by_identifiers'


    akeneo_referenceentity.tests.back.acceptance.context.create_record_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\CreateRecordContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.record'
            - '@akeneo_referenceentity.infrastructure.persistence.repository.reference_entity'
            - '@akeneo_referenceentity.application.record.create_record_handler'
            - '@validator'
            - '@akeneo_referenceentity.tests.back.acceptance.context.exception_context'
            - '@akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context'


    akeneo_referenceentity.tests.back.acceptance.context.list_record_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\ListRecordContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.record'
            - '@akeneo_referenceentity.infrastructure.persistence.repository.reference_entity'
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.record.query.find_identifiers_for_query'
            - '@akeneo_referenceentity.application.record.search_record'


    akeneo_referenceentity.tests.back.acceptance.context.set_reference_entity_permission_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\SetReferenceEntityPermissionContext
        arguments:
        - '@akeneo_referenceentity.infrastructure.persistence.repository.reference_entity'
        - '@akeneo_referenceentity.infrastructure.persistence.repository.reference_entity_permission'
        - '@akeneo_referenceentity.application.reference_entity_permission.set_reference_entity_permissions_handler'
        - '@akeneo_referenceentity.tests.back.acceptance.context.exception_context'
        - '@validator'
        - '@akeneo_referenceentity.application.reference_entity.create_reference_entity_handler'
        tags:
        - { name: fob.context_service }

    akeneo_referenceentity.tests.back.acceptance.context.create_attribute_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\CreateAttributeContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.attribute'
            - '@akeneo_referenceentity.application.registry.create_attribute_command_factory_registry'
            - '@validator'
            - '@akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context'
            - '@akeneo_referenceentity.application.attribute.create_attribute_handler'
            - '@akeneo_referenceentity.tests.back.acceptance.context.exception_context'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_attributes_details'

    akeneo_referenceentity.tests.back.acceptance.context.edit_attribute_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\EditAttributeContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.attribute'
            - '@akeneo_referenceentity.application.factory.edit_attribute_command_factory'
            - '@akeneo_referenceentity.application.attribute.edit_attribute_handler'
            - '@validator'
            - '@akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context'
            - '@akeneo_referenceentity.tests.back.acceptance.context.exception_context'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_activated_locales_by_identifiers'


    akeneo_referenceentity.tests.back.acceptance.context.delete_attribute_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\DeleteAttributeContext
        arguments:
            - '@akeneo_referenceentity.application.attribute.edit_attribute_handler'
            - '@akeneo_referenceentity.application.attribute.delete_attribute_handler'
            - '@akeneo.referencentity.infrastructure.persistence.query.get_attribute_identifier'


    akeneo_referenceentity.tests.back.acceptance.context.append_attribute_option_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\AppendAttributeOptionContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.attribute'
            - '@akeneo_referenceentity.application.attribute.append_attribute_option_handler'
            - '@validator'
            - '@akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context'


    akeneo_referenceentity.tests.back.acceptance.context.edit_attribute_option_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\EditAttributeOptionContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.attribute'
            - '@akeneo_referenceentity.application.attribute.edit_attribute_option_handler'
            - '@validator'
            - '@akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context'


    akeneo_referenceentity.tests.back.acceptance.context.edit_record_context:
        class: Akeneo\ReferenceEntity\tests\back\Acceptance\Context\EditRecordContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.reference_entity'
            - '@akeneo_referenceentity.infrastructure.persistence.repository.attribute'
            - '@akeneo_referenceentity.infrastructure.persistence.repository.record'
            - '@akeneo_referenceentity.application.factory.record.edit_record_command_factory'
            - '@akeneo_referenceentity.application.record.edit_record_handler'
            - '@validator'
            - '@akeneo_referenceentity.tests.back.acceptance.context.exception_context'
            - '@akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context'
            - '@akeneo_referenceentity.infrastructure.persistence.query.channel_exists'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_activated_locales_by_identifiers'
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.record.query.find_activated_locales_per_channels'
            - '@akeneo_referenceentity.application.reference_entity.create_reference_entity_handler'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_file_data_by_file_key'
            - '@akeneo_referenceentity.infrastructure.persistence.query.file_exists'

    Akeneo\ReferenceEntity\Acceptance\Context\ImportRecordContext:
        arguments:
            - '@pim_connector.step.csv_reference_entity_record.import'
            - '@pim_connector.step.xlsx_reference_entity_record.import'
            - '@akeneo_referenceentity.job.job_parameters.default_values_provider.simple_csv_import'
            - '@akeneo_referenceentity.job.job_parameters.default_values_provider.simple_xlsx_import'
            - '@akeneo_referenceentity.infrastructure.persistence.query.channel_exists'
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.record.query.find_activated_locales_per_channels'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_activated_locales_by_identifiers'
            - '@akeneo_referenceentity.tests.back.acceptance.context.exception_context'
            - '@akeneo_referenceentity.test.event_dispatcher'
            - '@akeneo_referenceentity.infrastructure.persistence.query.file_exists'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_file_data_by_file_key'
            - '@akeneo_batch.query.get_job_execution_status'

    akeneo_referenceentity.tests.back.acceptance.context.delete_record_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\DeleteRecordContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.reference_entity'
            - '@akeneo_referenceentity.infrastructure.persistence.repository.record'
            - '@akeneo_referenceentity.application.record.delete_record_handler'
            - '@validator'
            - '@akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context'
            - '@akeneo_referenceentity.tests.back.acceptance.context.exception_context'
            - '@akeneo_referenceentity.application.reference_entity.create_reference_entity_handler'
        tags:
        - { name: fob.context_service }

    akeneo_referenceentity.tests.back.acceptance.context.index_records_context:
        class: Akeneo\ReferenceEntity\Acceptance\Context\IndexRecordsContext
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.reference_entity'
            - '@akeneo_referenceentity.application.record.index_records_handler'
            - '@validator'
            - '@akeneo_referenceentity.tests.back.acceptance.context.constraint_violations_context'
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.record_indexer'
            - '@akeneo_referenceentity.application.reference_entity.create_reference_entity_handler'
        tags:
          - { name: fob.context_service }
