parameters:
    reference_entity_connector_records_limit_per_page: 3

services:
    # Repositories
    akeneo_referenceentity.infrastructure.persistence.repository.reference_entity:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryReferenceEntityRepository

    akeneo_referenceentity.infrastructure.persistence.repository.record:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryRecordRepository

    akeneo_referenceentity.infrastructure.persistence.repository.attribute:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryAttributeRepository

    pim_user.repository.user:
        class: Akeneo\Test\Acceptance\User\InMemoryUserRepository

    # Query functions
    akeneo_referenceentity.infrastructure.persistence.query.find_reference_entity_items:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryFindReferenceEntityItems

    akeneo_referenceentity.infrastructure.persistence.query.find_reference_entity_details:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryFindReferenceEntityDetails

    akeneo_referenceentity.infrastructure.persistence.query.find_record_details:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryFindRecordDetails

    akeneo_referenceentity.infrastructure.persistence.query.find_existing_record_codes:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryFindExistingRecordCodes
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.record'

    akeneo_referenceentity.infrastructure.persistence.query.find_connector_record_by_reference_entity_and_code:
        class: Akeneo\ReferenceEntity\Common\Fake\Connector\InMemoryFindConnectorRecordByReferenceEntityAndCode

    akeneo_referenceentity.infrastructure.persistence.query.find_connector_records_by_identifiers:
        class: Akeneo\ReferenceEntity\Common\Fake\Connector\InMemoryFindConnectorRecordsByIdentifiersForQuery

    akeneo_referenceentity.infrastructure.persistence.query.find_connector_reference_entity_by_reference_entity_identifier:
        class: Akeneo\ReferenceEntity\Common\Fake\Connector\InMemoryFindConnectorReferenceEntityByReferenceEntityIdentifier

    akeneo_referenceentity.infrastructure.persistence.query.reference_entity_exists:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryReferenceEntityExists
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.reference_entity'

    akeneo_referenceentity.infrastructure.persistence.query.record_exists:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryRecordExists
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.record'

    akeneo_referenceentity.infrastructure.persistence.query.attribute_exists:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryAttributeExists
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.attribute'

    akeneo_referenceentity.infrastructure.persistence.query.find_attribute_next_order:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryFindAttributeNextOrder
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.attribute'

    akeneo_referenceentity.infrastructure.persistence.query.find_attributes_details:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryFindAttributesDetails

    akeneo_referenceentity.infrastructure.persistence.query.reference_entity_has_records:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryReferenceEntityHasRecords
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.record'

    akeneo_referenceentity.infrastructure.persistence.query.reference_entity_is_linked_to_at_least_one_product_attribute:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryReferenceEntityIsLinkedToAtLeastOneProductAttribute
        arguments:
            - '@pim_catalog.repository.attribute'

    akeneo_referenceentity.infrastructure.persistence.query.reference_entity_is_linked_to_at_least_one_reference_entity_attribute:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryReferenceEntityIsLinkedToAtLeastOneReferenceEntityAttribute
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.attribute'

    akeneo_referenceentity.infrastructure.persistence.query.find_value_key_collection:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryFindValueKeyCollection

    akeneo_referenceentity.infrastructure.persistence.query.generate_empty_values:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryGenerateEmptyValues

    akeneo_referenceentity.infrastructure.persistence.query.find_attributes_indexed_by_identifier:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryFindAttributesIndexedByIdentifier
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.attribute'

    akeneo_referenceentity.infrastructure.persistence.query.find_record_items_for_identifiers:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryFindRecordItemsForIdentifiers
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.record'

    akeneo_referenceentity.infrastructure.search.elasticsearch.record.query.find_identifiers_for_query:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryFindRecordIdentifiersForQuery

    # Indexers
    akeneo_referenceentity.infrastructure.search.elasticsearch.record_indexer:
        class: Akeneo\ReferenceEntity\Common\Fake\RecordIndexerSpy

    akeneo_referenceentity.infrastructure.persistence.query.find_image_attribute_codes:
        class: Akeneo\ReferenceEntity\Common\Fake\InMemoryFindImageAttributeCodes
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.attribute'

    # Third party services
    oro_security.security_facade:
        class: Akeneo\ReferenceEntity\Common\Fake\SecurityFacadeStub
        arguments:
            - '@security.authorization_checker'
            - '@oro_security.acl.annotation_provider'
            - '@oro_security.acl.object_identity_factory'
            - '@logger'

    fos_oauth_server.security.authentication.listener:
        class: Akeneo\ReferenceEntity\Common\Fake\Connector\NullListener

    security.access_listener:
        class: Akeneo\ReferenceEntity\Common\Fake\Connector\NullListener

    cache.adapter.array:
        class: Symfony\Component\Cache\Adapter\ArrayAdapter

    # Subscribers
    akeneo_referenceentity.infrastructure.search.elasticsearch.record.subscriber.index_record:
        class: Akeneo\ReferenceEntity\Common\Fake\EventSubscriberStub
        tags:
            - { name: kernel.event_subscriber }

    akeneo_referenceentity.infrastructure.search.elasticsearch.record.subscriber.remove_record_from_index:
        class: Akeneo\ReferenceEntity\Common\Fake\EventSubscriberStub
        tags:
            - { name: kernel.event_subscriber }

    pim_locale.locale_subscriber:
        class: Akeneo\ReferenceEntity\Common\Fake\EventSubscriberStub
        tags:
            - { name: kernel.event_subscriber }
