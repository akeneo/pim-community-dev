<script type="text/javascript">
    require(
        ['jquery', 'underscore', 'pim/optionform', 'pim/scopable', 'pim/currencyfield', 'datepicker', 'pim/dialog', 'pim/dialogform', 'oro/mediator', 'backbone/bootstrap-modal'],
        function ($, _, optionform, Scopable, CurrencyField, datepicker, Dialog, DialogForm, mediator) {
            'use strict';

            $(function () {
                _.each($('a.add-attribute-option'), function(optionLink) {
                    optionform.init('#' + optionLink.getAttribute('id'));
                });

                _.each($('form div.scopable:not(.currency)'), function (field) {
                    new Scopable({ el: $(field) });
                });

                _.each($('form div.currency'), function (field) {
                    new CurrencyField({ el: $(field) });
                });

                _.each($('form input.datepicker'), function (field) {
                    datepicker.init($(field).closest('div'));
                });

                mediator.trigger('pim:reinit');

                {{ view_elements('pim_enrich_variant_edit.after_form_init') }}
            });
        }
    );
</script>
