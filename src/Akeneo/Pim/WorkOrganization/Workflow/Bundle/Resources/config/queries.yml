parameters:
    pimee_workflow.query.draft_authors.class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\Doctrine\ORM\Query\DraftAuthors

services:
    pimee_workflow.query.draft_authors:
        class: '%pimee_workflow.query.draft_authors.class%'
        arguments:
            - '@doctrine.orm.entity_manager'

    pimee_workflow.query.get_associated_product_codes_by_published_product:
        class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\Doctrine\ORM\Query\GetAssociatedProductCodesByPublishedProductFromDB
        arguments:
            - '@doctrine.orm.entity_manager'
            - '@security.token_storage'

    pimee_workflow.sql.product.update_draft_author:
        class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\Storage\Sql\ProductDraft\UpdateDraftAuthor
        arguments:
            - '@database_connection'

    pimee_workflow.sql.product_model.update_draft_author:
        class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\Storage\Sql\ProductModelDraft\UpdateDraftAuthor
        arguments:
            - '@database_connection'

    pimee_workflow.query.count_product_proposals:
        class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\Storage\Sql\CountProductProposals
        arguments:
            - '@database_connection'

    pimee_workflow.query.count_product_model_proposals:
        class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\Storage\Sql\CountProductModelProposals
        arguments:
            - '@database_connection'

    pimee_workflow.sql.product.find_existing_attribute_codes:
        class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\Storage\Sql\FindExistingAttributeCodesQuery
        arguments:
            - '@database_connection'
            - '@akeneo_storage_utils.doctrine.table_name_builder'

    pimee_workflow.query.select_proposal_ids_from_product_ids:
        class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\Storage\Sql\SelectProposalIdsFromProductIdsQuery
        arguments:
            - '@database_connection'

    pimee_workflow.query.select_model_proposal_ids_from_product_model_ids:
        class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\Storage\Sql\SelectModelProposalIdsFromProductModelIdsQuery
        arguments:
            - '@database_connection'

    pimee_workflow.query.get_workflow_status_from_product_model_codes:
        class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\Storage\Sql\GetWorkflowStatusFromProductModelCodes
        arguments:
            - '@database_connection'

    akeneo.pim.enrichment.product.connector.get_product_from_identifiers:
        class: 'Akeneo\Pim\WorkOrganization\Workflow\Bundle\Storage\ORM\Connector\GetConnectorProductsFromWriteModel'
        arguments:
            - '@pimee_workflow.query.get_worklow_status_for_product'
            - '@pim_api.repository.attribute'
            - '@pim_api.repository.product'

    pimee_workflow.query.get_worklow_status_for_product:
        class: 'Akeneo\Pim\WorkOrganization\Workflow\Bundle\Storage\ORM\Connector\GetWorkflowStatusForProduct'
        arguments:
            - '@security.authorization_checker'
            - '@security.token_storage'
            - '@pimee_workflow.repository.product_draft'

    pimee_workflow.query.get_workflow_status_from_product_identifiers:
        class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\Storage\Sql\GetWorkflowStatusFromProductIdentifiers
        arguments:
            - '@database_connection'
