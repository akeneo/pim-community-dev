<script type="text/javascript">
    require(
        ['jquery', 'underscore', 'datepicker', 'pim/date-context'],
        function ($, _, datepicker, dateContext) {
            'use strict';

            $(function () {
                _.each($('form input.datepicker:not(.hasPicker)'), function (field) {
                    datepicker.init($(field).closest('div'), {
                        format: dateContext.get('date').format,
                        defaultFormat: dateContext.get('date').defaultFormat,
                        language: dateContext.get('language'),
                    });
                });

                $('div.submit-form a').click(function() {
                    var action = $(this).attr('value');

                    $('#{{ form.vars.id }}').attr(
                        'action',
                        $('#{{ form.vars.id }}').attr('action') + "?action=" + action
                    );

                    $('#{{ form.vars.id }}').submit();
                });
            });
        }
    );
</script>
