imports:
    - { resource: ../../../vendor/akeneo/pim-community-dev/tests/back/Platform/Acceptance/Analytics/Resources/config/queries.yml }
    - { resource: ../../../vendor/akeneo/pim-community-dev/tests/back/Acceptance/Resources/config/pim/file_storage.yml }
    - { resource: ../../../vendor/akeneo/pim-community-dev/tests/back/Acceptance/Resources/config/pim/repositories.yml }
    - { resource: ../../../vendor/akeneo/pim-community-dev/tests/back/Acceptance/Resources/config/pim/queries.yml }
    - { resource: ../../../vendor/akeneo/pim-community-dev/tests/back/Platform/Acceptance/CatalogVolumeMonitoring/Resources/config/pim/queries.yml }
    - { resource: ../../../vendor/akeneo/pim-community-dev/tests/back/Platform/Acceptance/CatalogVolumeMonitoring/Resources/config/behat/services.yml }
    - { resource: ../../../vendor/akeneo/pim-community-dev/tests/back/Pim/Enrichment/Acceptance/Resources/config/behat/services.yml }
    - { resource: ../../../vendor/akeneo/pim-community-dev/tests/back/Acceptance/Resources/config/behat/services.yml }
    - { resource: ../../../vendor/akeneo/pim-community-dev/tests/back/Acceptance/Resources/config/pim/messenger.yml }
    - { resource: ../../../tests/back/Acceptance/Resources/config/pim/queries.yml }
    - { resource: ../../../tests/back/Acceptance/Resources/config/pim/repositories.yml }
    - { resource: ../../../tests/back/Platform/Acceptance/Resources/config/services.yml }
    - { resource: ../../../tests/back/Acceptance/Resources/config/behat/services.yml }
    # Akeneo/Connectivity/Connection
    - { resource: ../../../vendor/akeneo/pim-community-dev/src/Akeneo/Connectivity/Connection/back/tests/CatalogBuilder/Resources/config/loaders.yml }
    - { resource: ../../../vendor/akeneo/pim-community-dev/src/Akeneo/Connectivity/Connection/tests/Resources/config/services.yml }
    # AkeneoJobBundle
    - { resource: ../../../vendor/akeneo/pim-community-dev/src/Akeneo/Platform/Job/back/tests/Acceptance/Resources/config/services.yml }
    # Reference Entity
    - { resource: ../../../src/Akeneo/ReferenceEntity/tests/back/Acceptance/Resources/config/pim/event_subscribers.yml }
    - { resource: ../../../src/Akeneo/ReferenceEntity/tests/back/Common/Resources/fake_services.yml }
    - { resource: ../../../src/Akeneo/ReferenceEntity/tests/back/Common/Resources/helpers.yml }
    - { resource: ../../../src/Akeneo/ReferenceEntity/tests/back/Acceptance/Resources/config/behat/services.yml }
    - { resource: ../../../src/Akeneo/ReferenceEntity/tests/back/Integration/Resources/config/behat/services.yml }
    - { resource: ../../../tests/back/ReferenceEntity/Acceptance/Resources/config/behat/services.yml }
    - { resource: ../../../tests/back/ReferenceEntity/Acceptance/Resources/config/pim/queries.yml }
    # Asset Manager
    - { resource: ../../../src/Akeneo/AssetManager/tests/back/Acceptance/Resources/config/pim/event_subscribers.yml }
    - { resource: ../../../src/Akeneo/AssetManager/tests/back/Common/Resources/fake_services.yml }
    - { resource: ../../../src/Akeneo/AssetManager/tests/back/Common/Resources/helpers.yml }
    - { resource: ../../../src/Akeneo/AssetManager/tests/back/Acceptance/Resources/config/behat/services.yml }
    - { resource: ../../../src/Akeneo/AssetManager/tests/back/Integration/Resources/config/behat/services.yml }
    - { resource: ../../../tests/back/AssetManager/Acceptance/Resources/config/behat/services.yml }
    - { resource: ../../../tests/back/AssetManager/Acceptance/Resources/config/pim/queries.yml }
    # Rule Engine
    - { resource: ../../../src/Akeneo/Pim/Automation/RuleEngine/tests/back/Acceptance/Resources/config/services.yml }
    # Tailored Exports
    - { resource: ../../../components/tailored-export/back/tests/Acceptance/Resources/config/services.yml }

    - { resource: ../../../vendor/akeneo/pim-community-dev/config/services/test/test_services.yml }
    # Table Attribute
    - { resource: ../../../grth/src/Akeneo/Pim/TableAttribute/tests/back/Acceptance/Resources/config/services.yml }
    - { resource: ../../../grth/src/Akeneo/Pim/TableAttribute/tests/back/Acceptance/Resources/config/services_ee.yml }

    # FeatureFlag
    - { resource: ../../../vendor/akeneo/pim-community-dev/src/Akeneo/Platform/Bundle/FeatureFlagBundle/Resources/config/test_fake_services.yml }

services:
    akeneo_integration_tests.doctrine.connection.connection_closer:
        class: Akeneo\Test\IntegrationTestsBundle\Doctrine\Connection\ConnectionCloser
        arguments:
            - '@doctrine'

    akeneo_integration_tests.message_bus_observer:
        class: Symfony\Component\Messenger\TraceableMessageBus
        decorates: messenger.default_bus
        decoration_inner_name: messenger.default_bus.inner
        arguments:
            - '@messenger.default_bus.inner'

    akeneo_integration_tests.event_dispatcher:
        class: 'Akeneo\Test\Acceptance\EventDispatcher\EventDispatcherMock'
        decorates: event_dispatcher
        arguments:
            - '@akeneo_integration_tests.event_dispatcher.inner'

    akeneo_integration_tests.catalogs_enterprise:
        class: 'AkeneoEnterprise\Test\IntegrationTestsBundle\Configuration\Catalog'
        decorates: 'akeneo_integration_tests.catalogs'
        arguments:
            - '@akeneo_integration_tests.catalogs_enterprise.inner'

    akeneo_integration_tests.catalogs:
        class: 'Akeneo\Test\IntegrationTestsBundle\Configuration\Catalog'
