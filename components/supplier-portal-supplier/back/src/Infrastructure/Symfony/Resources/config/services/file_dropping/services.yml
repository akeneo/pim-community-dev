services:
    # GCS Bucket services
    Akeneo\SupplierPortal\Supplier\Domain\ProductFileDropping\StoreProductsFile:
        class: Akeneo\SupplierPortal\Supplier\Infrastructure\ProductFileDropping\StoreProductsFileInGCSBucket
        arguments:
            - '@akeneo_file_storage.file_storage.filesystem_provider'
        public: true

    Akeneo\SupplierPortal\Supplier\Domain\ProductFileDropping\DownloadStoredProductFile:
        class: Akeneo\SupplierPortal\Supplier\Infrastructure\ProductFileDropping\DownloadStoredProductFileInGCSBucket
        arguments:
            - '@akeneo_file_storage.file_storage.filesystem_provider'

    # Repositories
    Akeneo\SupplierPortal\Supplier\Domain\ProductFileDropping\Write\SupplierFileRepository:
        public: true
        class: Akeneo\SupplierPortal\Supplier\Infrastructure\ProductFileDropping\Repository\Sql\DatabaseRepository
        arguments:
            - '@database_connection'

    # Command handlers
    Akeneo\SupplierPortal\Supplier\Application\ProductFileDropping\CreateSupplierFileHandler:
        arguments:
            - '@Akeneo\SupplierPortal\Retailer\Domain\Supplier\Read\GetSupplierFromContributorEmail'
            - '@Akeneo\SupplierPortal\Supplier\Domain\ProductFileDropping\Write\SupplierFileRepository'
            - '@Akeneo\SupplierPortal\Supplier\Domain\ProductFileDropping\StoreProductsFile'
            - '@validator'
            - '@event_dispatcher'
            - '@monolog.logger.supplier_portal'

    # Query handlers
    Akeneo\SupplierPortal\Supplier\Application\ProductFileDropping\DownloadProductFileHandler:
        arguments:
            - '@Akeneo\SupplierPortal\Supplier\Domain\ProductFileDropping\DownloadStoredProductFile'
            - '@Akeneo\SupplierPortal\Supplier\Domain\ProductFileDropping\GetProductFilePathAndFileName'
            - '@monolog.logger.supplier_portal'

    # Queries
    Akeneo\SupplierPortal\Supplier\Domain\ProductFileDropping\GetProductFiles:
        class: Akeneo\SupplierPortal\Supplier\Infrastructure\ProductFileDropping\Query\Sql\DatabaseGetProductFiles
        arguments:
            - '@database_connection'

    Akeneo\SupplierPortal\Supplier\Domain\ProductFileDropping\GetProductFilePathAndFileName:
        class: Akeneo\SupplierPortal\Supplier\Infrastructure\ProductFileDropping\Query\Sql\DatabaseGetProductFilePathAndFileName
        arguments:
            - '@database_connection'

    Akeneo\SupplierPortal\Supplier\Domain\ProductFileDropping\GetProductFilePathsOfOldProductFiles:
        public: true
        class: Akeneo\SupplierPortal\Supplier\Infrastructure\ProductFileDropping\Query\Sql\DatabaseGetProductFilePathsOfOldProductFiles
        arguments:
            - '@database_connection'

    # Controllers
    Akeneo\SupplierPortal\Supplier\Infrastructure\ProductFileDropping\Controller\DownloadProductFile:
        public: true
        arguments:
            - '@Akeneo\SupplierPortal\Supplier\Application\ProductFileDropping\DownloadProductFileHandler'
            - '@security.token_storage'

    Akeneo\SupplierPortal\Supplier\Infrastructure\ProductFileDropping\Controller\UploadProductFile:
        public: true
        arguments:
            - '@Akeneo\SupplierPortal\Supplier\Application\ProductFileDropping\CreateSupplierFileHandler'
            - '@security.token_storage'

    Akeneo\SupplierPortal\Supplier\Infrastructure\ProductFileDropping\Controller\GetProductFiles:
        public: true
        arguments:
            - '@Akeneo\SupplierPortal\Supplier\Domain\ProductFileDropping\GetProductFiles'
