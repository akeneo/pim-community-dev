services:
    # Mass Edit steps -------------------------------------------------------------------------------------------------
    pimee_enrich.step.publish_product.perform:
        class: '%pim_connector.step.tasklet.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pimee_workflow.mass_edit_tasklet.publish_product'

    pimee_enrich.step.unpublish_product.perform:
        class: '%pim_connector.step.tasklet.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pimee_workflow.mass_edit_tasklet.unpublish_product'

    pimee_enrich.step.add_product_value_with_permission.perform:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_enrich.reader.database.filtered_product_and_product_model'
            - '@pimee_enrich.mass_edit.add_product_value.processor'
            - '@pim_connector.writer.database.product'

    pimee_enrich.step.update_product_value_with_permission.perform:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_enrich.reader.database.filtered_product_and_product_model'
            - '@pimee_enrich.mass_edit.update_product_value.processor'
            - '@pim_connector.writer.database.product'

    pimee_enrich.step.remove_product_value_with_permission.perform:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_enrich.reader.database.filtered_product_and_product_model'
            - '@pimee_enrich.mass_edit.remove_product_value.processor'
            - '@pim_connector.writer.database.product'

    pimee_enrich.step.add_to_category_with_permission.perform:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_enrich.reader.database.grouped_product_and_product_model'
            - '@pimee_enrich.mass_edit.add_product_value.processor'
            - '@pim_enrich.writer.database.product_and_product_model_writer'

    pimee_enrich.step.move_to_category_with_permission.perform:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_enrich.reader.database.grouped_product_and_product_model'
            - '@pimee_enrich.mass_edit.update_product_value.processor'
            - '@pim_enrich.writer.database.product_and_product_model_writer'

    pimee_enrich.step.remove_from_category_with_permission.perform:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_enrich.reader.database.grouped_product_and_product_model'
            - '@pimee_enrich.mass_edit.remove_product_value.processor'
            - '@pim_enrich.writer.database.product_and_product_model_writer'

    pim_enrich.step.add_association.mass_edit:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_enrich.reader.database.add_association'
            - '@pim_enrich.connector.processor.mass_edit.product.add_value'
            - '@pim_enrich.writer.database.product_and_product_model_writer'

    pimee_enrich.step.edit_common_attributes_with_permission.perform:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_enrich.reader.database.product_and_product_model'
            - '@pim_enrich.connector.processor.mass_edit.product.edit_attributes'
            - '@pimee_security.connector.writer.mass_edit.product_and_product_model'
            - 1000

    pimee_enrich.step.add_attribute_value.mass_edit.perform:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_enrich.reader.database.product_and_product_model'
            - '@pim_enrich.connector.processor.mass_edit.product.add_attribute_value'
            - '@pimee_security.connector.writer.mass_edit.product_and_product_model'
            - 1000

    # Execute Rules steps ---------------------------------------------------------------------------------------------
    pimee_enrich.step.execute_rules:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'execute_rules'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_enrich.reader.database.product_and_product_model'
            - '@pimee_catalog_rule.processor.product_loader'
            - '@pimee_catalog_rule.executor.rules'
            - 100

    # Clean steps -----------------------------------------------------------------------------------------------------
    pimee_enrich.step.clean:
        alias: pim_enrich.step.clean
