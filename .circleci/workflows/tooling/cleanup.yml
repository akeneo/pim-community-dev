workflows:
    hourly_cleanup:
        when:
            or:
              - and:
                  - equal: [ scheduled_pipeline, << pipeline.trigger_source >> ]
                  - equal: [ "hourly_cleanup", << pipeline.schedule.name >> ]
              - equal: [ "hourly_cleanup", << pipeline.parameters.trigger >> ]
        jobs:
            - checkout
            - delete_environments_hourly:
                  name: "[<< matrix.PRODUCT_TYPE >>] Delete environments"
                  matrix:
                      parameters:
                          PRODUCT_TYPE: ["srnt", "grth", "tria"]
                  requires:
                      - checkout
            - remove_unused_resources:
                  requires:
                      - checkout
