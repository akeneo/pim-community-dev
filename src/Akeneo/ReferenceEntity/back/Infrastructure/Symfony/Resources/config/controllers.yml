services:
    # Reference entity
    akeneo_referenceentity.infrastructure.action.reference_entity.create:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\ReferenceEntity\CreateAction
        arguments:
            - '@akeneo_referenceentity.application.reference_entity.create_reference_entity_handler'
            - '@reference_entity_serializer'
            - '@validator'
            - '@oro_security.security_facade'

    akeneo_referenceentity.infrastructure.action.reference_entity.index:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\ReferenceEntity\IndexAction
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_reference_entity_items'

    akeneo_referenceentity.infrastructure.action.reference_entity.get:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\ReferenceEntity\GetAction
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_reference_entity_details'

    akeneo_referenceentity.infrastructure.action.reference_entity.edit:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\ReferenceEntity\EditAction
        arguments:
            - '@akeneo_referenceentity.application.reference_entity.edit_reference_entity_handler'
            - '@reference_entity_serializer'
            - '@validator'

    akeneo_referenceentity.infrastructure.action.reference_entity.delete:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\ReferenceEntity\DeleteAction
        arguments:
        - '@oro_security.security_facade'
        - '@serializer'
        - '@validator'
        - '@akeneo_referenceentity.application.reference_entity.delete_reference_entity_handler'

    # Attributes
    akeneo_referenceentity.infrastructure.action.attribute.create:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\Attribute\CreateAction
        arguments:
            - '@akeneo_referenceentity.application.attribute.create_attribute_handler'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_attribute_next_order'
            - '@akeneo_referenceentity.application.registry.create_attribute_command_factory_registry'
            - '@serializer'
            - '@validator'
            - '@oro_security.security_facade'

    akeneo_referenceentity.infrastructure.action.attribute.index:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\Attribute\IndexAction
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_attributes_details'
            - '@akeneo_referenceentity.infrastructure.persistence.query.reference_entity_exists'


    akeneo_referenceentity.infrastructure.action.attribute.edit:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\Attribute\EditAction
        arguments:
            - '@akeneo_referenceentity.application.factory.edit_attribute_command_factory'
            - '@akeneo_referenceentity.application.attribute.edit_attribute_handler'
            - '@serializer'
            - '@validator'
            - '@oro_security.security_facade'

    akeneo_referenceentity.infrastructure.action.attribute.delete:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\Attribute\DeleteAction
        arguments:
            - '@akeneo_referenceentity.application.attribute.delete_attribute_handler'
            - '@oro_security.security_facade'

    #  Records
    akeneo_referenceentity.infrastructure.action.record.create:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\Record\CreateAction
        arguments:
            - '@akeneo_referenceentity.application.record.create_record_handler'
            - '@reference_entity_serializer'
            - '@validator'
            - '@oro_security.security_facade'

    akeneo_referenceentity.infrastructure.action.record.index:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\Record\IndexAction
        arguments:
          - '@akeneo_referenceentity.application.record.search_record'

    akeneo_referenceentity.infrastructure.action.record.get:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\Record\GetAction
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_record_details'

    akeneo_referenceentity.infrastructure.action.record.edit:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\Record\EditAction
        arguments:
            - '@akeneo_referenceentity.application.factory.record.edit_record_command_factory'
            - '@akeneo_referenceentity.application.record.edit_record_handler'
            - '@validator'
            - '@serializer'

    akeneo_referenceentity.infrastructure.action.record.delete:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\Record\DeleteAction
        arguments:
            - '@akeneo_referenceentity.application.record.delete_record_handler'
            - '@oro_security.security_facade'

    akeneo_referenceentity.infrastructure.action.record.delete_all:
        class: Akeneo\ReferenceEntity\Infrastructure\Controller\Record\DeleteAllAction
        arguments:
            - '@akeneo_referenceentity.application.record.delete_all_reference_entity_records_handler'
            - '@oro_security.security_facade'

    akeneo_referenceentity.infrastructure.connector.action.record.get:
        class: Akeneo\ReferenceEntity\Infrastructure\Connector\Api\Record\GetConnectorRecordAction
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_connector_record_by_reference_entity_and_code'
            - '@akeneo_referenceentity.infrastructure.persistence.query.reference_entity_exists'
            - '@akeneo_referenceentity.infrasctucture.connector.add_hal_download_link_to_record_images'

    akeneo_referenceentity.infrasctucture.connector.add_hal_download_link_to_record_images:
        class: Akeneo\ReferenceEntity\Infrastructure\Connector\Api\Record\Hal\AddHalDownloadLinkToRecordImages
        arguments:
            - '@router'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_image_attribute_codes'

    akeneo_referenceentity.infrasctucture.connector.add_hal_download_link_to_reference_entity_image:
        class: Akeneo\ReferenceEntity\Infrastructure\Connector\Api\ReferenceEntity\Hal\AddHalDownloadLinkToReferenceEntityImage
        arguments:
        - '@router'

    akeneo_referenceentity.infrastructure.connector.action.records.get:
        class: Akeneo\ReferenceEntity\Infrastructure\Connector\Api\Record\GetConnectorRecordsAction
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.query.reference_entity_exists'
            - '@akeneo_referenceentity.application.record.search_connector_record'
            - '@pim_api.pagination.search_after_hal_paginator'
            - '@akeneo_referenceentity.infrasctucture.connector.add_hal_download_link_to_record_images'
            - '%reference_entity_connector_records_limit_per_page%'
            - '@validator'

    akeneo_referenceentity.infrastructure.connector.action.reference_entity.get:
        class: Akeneo\ReferenceEntity\Infrastructure\Connector\Api\ReferenceEntity\GetConnectorReferenceEntityAction
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_connector_reference_entity_by_reference_entity_identifier'
            - '@akeneo_referenceentity.infrastructure.persistence.query.reference_entity_exists'
            - '@akeneo_referenceentity.infrasctucture.connector.add_hal_download_link_to_reference_entity_image'

    akeneo_referenceentity.infrastructure.connector.action.reference_entities.get:
        class: Akeneo\ReferenceEntity\Infrastructure\Connector\Api\ReferenceEntity\GetConnectorReferenceEntitiesAction
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_connector_reference_entity_items'
            - '@pim_api.pagination.search_after_hal_paginator'
            - '@akeneo_referenceentity.infrasctucture.connector.add_hal_download_link_to_reference_entity_image'
            - '%reference_entity_connector_reference_entities_limit_per_page%'

    akeneo_referenceentity.infrastructure.connector.action.record.create_or_update:
        class: Akeneo\ReferenceEntity\Infrastructure\Connector\Http\CreateOrUpdateRecordAction
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.query.reference_entity_exists'
            - '@akeneo_referenceentity.infrastructure.persistence.query.record_exists'
            - '@akeneo_referenceentity.application.factory.record.connector.edit_record_command_factory'
            - '@akeneo_referenceentity.application.record.edit_record_handler'
            - '@akeneo_referenceentity.application.record.create_record_handler'
            - '@router'
