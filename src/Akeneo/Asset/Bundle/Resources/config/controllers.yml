parameters:
    pimee_product_asset.controller.product_asset.class:      Akeneo\Asset\Bundle\Controller\ProductAssetController
    pimee_product_asset.controller.rest.mass_upload.class:   Akeneo\Asset\Bundle\Controller\Rest\MassUploadController
    pimee_product_asset.controller.rest.product_asset.class: Akeneo\Asset\Bundle\Controller\Rest\ProductAssetController
    pimee_product_asset.controller.asset_transformation.class: Akeneo\Asset\Bundle\Controller\Rest\AssetTransformationController
    pimee_product_asset.controller.rest.asset_category.class: Akeneo\Asset\Bundle\Controller\Rest\AssetCategoryController
    pimee_product_asset.controller.asset_category.class: Akeneo\Asset\Bundle\Controller\ExternalApi\AssetCategoryController
    pimee_product_asset.controller.asset_reference.class: Akeneo\Asset\Bundle\Controller\ExternalApi\AssetReferenceController
    pimee_product_asset.controller.asset_variation.class: Akeneo\Asset\Bundle\Controller\ExternalApi\AssetVariationController
    pimee_product_asset.controller.asset.class: Akeneo\Asset\Bundle\Controller\ExternalApi\AssetController
    pimee_product_asset.controller.asset_tag.class: Akeneo\Asset\Bundle\Controller\ExternalApi\AssetTagController
    pimee_product_asset.controller.ajax_option.class: Akeneo\Asset\Bundle\Controller\Rest\AjaxOptionController

services:
    pimee_product_asset.controller.product_asset:
        class: '%pimee_product_asset.controller.product_asset.class%'
        arguments:
            - '@pimee_product_asset.repository.asset'
            - '@pimee_product_asset.repository.reference'
            - '@pimee_product_asset.repository.variation'
            - '@pimee_product_asset.repository.file_metadata'
            - '@pim_catalog.repository.locale'
            - '@pim_catalog.repository.channel'
            - '@pimee_product_asset.variation_file_generator'
            - '@pimee_product_asset.updater.files'
            - '@pimee_product_asset.saver.asset'
            - '@pimee_product_asset.saver.reference'
            - '@pimee_product_asset.saver.variation'
            - '@pimee_product_asset.remover.asset'
            - '@event_dispatcher'
            - '@pimee_product_asset.factory.asset'
            - '@akeneo_file_storage.file_storage.file_info_factory'
            - '@pimee_product_asset.context.user'
            - '@pim_enrich.controller.file'
            - '@pimee_product_asset.repository.asset_category'
            - '@pimee_product_asset.repository.category'
            - '@pimee_product_asset.manager.category'
            - '@pimee_product_asset.builder.reference'
            - '@pimee_product_asset.builder.variation'
        calls:
            - [ setContainer, [ '@service_container' ] ]

    pimee_product_asset.controller.rest.product_asset:
        class: '%pimee_product_asset.controller.rest.product_asset.class%'
        arguments:
            - '@pimee_product_asset.repository.asset'
            - '@pim_internal_api_serializer'

    pimee_product_asset.controller.rest.mass_upload:
        class: '%pimee_product_asset.controller.rest.mass_upload.class%'
        arguments:
            - '@pimee_product_asset.repository.asset'
            - '@pimee_product_asset.upload_checker'
            - '@pimee_product_asset.upload_importer'
            - '@security.token_storage'
            - '@akeneo_batch_queue.launcher.queue_job_launcher'
            - '@akeneo_batch.job.job_instance_repository'
            - '%tmp_storage_dir%'

    pimee_product_asset.controller.category_tree:
        class: 'Akeneo\Asset\Bundle\Controller\UI\AssetCategoryTreeController'
        arguments:
            - '@event_dispatcher'
            - '@pimee_product_asset.context.user'
            - '@pimee_product_asset.saver.category'
            - '@pimee_product_asset.remover.category_asset'
            - '@pimee_product_asset.factory.category'
            - '@pimee_product_asset.repository.category'
            - '@oro_security.security_facade'
            - { related_entity: asset, form_type: '%pimee_product_asset.form.type.category.class%', acl: pimee_product_asset, route: pimee_asset }
            - '@pimee_product_asset.repository.asset_category_access'
            - '@security.token_storage'
            - '@templating'
            - '@form.factory'
            - '@session'

    pimee_product_asset.controller.category_tree_asset_picker:
        class: 'Akeneo\Asset\Bundle\Controller\UI\AssetCategoryTreeController'
        arguments:
            - '@event_dispatcher'
            - '@pimee_product_asset.context.user'
            - '@pimee_product_asset.saver.category'
            - '@pimee_product_asset.remover.category_asset'
            - '@pimee_product_asset.factory.category'
            - '@pimee_product_asset.repository.category'
            - '@oro_security.security_facade'
            - { related_entity: asset, form_type: '%pimee_product_asset.form.type.category.class%', acl: pimee_product_asset_picker, route: pimee_asset_picker }
            - '@pimee_product_asset.repository.asset_category_access'
            - '@security.token_storage'
            - '@templating'
            - '@form.factory'
            - '@session'

    pimee_product_asset.controller.rest.asset_category:
        class: '%pimee_product_asset.controller.rest.asset_category.class%'
        arguments:
            - '@pimee_product_asset.repository.asset_category'
            - '@pim_internal_api_serializer'

    pimee_product_asset.controller.asset_transformation:
        class: '%pimee_product_asset.controller.asset_transformation.class%'
        arguments:
            - '@pimee_product_asset.repository.channel_configuration'
            - '@pim_internal_api_serializer'

    # External Api
    pimee_product_asset.controller.asset_category:
        class: '%pimee_product_asset.controller.asset_category.class%'
        arguments:
            - '@pimee_product_asset.repository.external_api.asset_category'
            - '@pim_external_api_serializer'
            - '@pimee_product_asset.factory.category'
            - '@pimee_product_asset.updater.category'
            - '@validator'
            - '@pimee_product_asset.saver.category'
            - '@router'
            - '@pim_api.pagination.parameter_validator'
            - '@pim_api.pagination.offset_hal_paginator'
            - '@pimee_product_asset.stream.asset_category_partial_update_stream'
            - '%pim_api.configuration%'


    pimee_product_asset.controller.asset_reference:
        class: '%pimee_product_asset.controller.asset_reference.class%'
        arguments:
            - '@pimee_product_asset.repository.asset'
            - '@pim_api.repository.locale'
            - '@akeneo_file_storage.file_storage.filesystem_provider'
            - '@akeneo_file_storage.file_storage.file.streamed_file_fetcher'
            - '@pim_external_api_serializer'
            - '@validator'
            - '@akeneo_file_storage.saver.file'
            - '@akeneo_file_storage.file_storage.file.file_storer'
            - '@pimee_product_asset.factory.reference'
            - '@router'
            - '@pimee_product_asset.updater.files'
            - '@pimee_product_asset.saver.asset'
            - '@pimee_product_asset.variations_collection_files_generator'
            - '@pimee_product_asset.finder.asset'

    pimee_product_asset.controller.asset_variation:
        class: '%pimee_product_asset.controller.asset_variation.class%'
        arguments:
            - '@pimee_product_asset.repository.asset'
            - '@pim_api.repository.channel'
            - '@pim_api.repository.locale'
            - '@akeneo_file_storage.file_storage.filesystem_provider'
            - '@akeneo_file_storage.file_storage.file.streamed_file_fetcher'
            - '@pim_external_api_serializer'
            - '@validator'
            - '@akeneo_file_storage.saver.file'
            - '@akeneo_file_storage.file_storage.file.file_storer'
            - '@pimee_product_asset.factory.reference'
            - '@router'
            - '@pimee_product_asset.saver.asset'
            - '@pimee_product_asset.factory.variation'
            - '@event_dispatcher'

    pimee_product_asset.controller.asset:
        class : '%pimee_product_asset.controller.asset.class%'
        arguments:
            - '@pimee_product_asset.api.repository.asset'
            - '@pimee_product_asset.api.repository.asset'
            - '@pimee_product_asset.api.repository.asset'
            - '@pim_external_api_serializer'
            - '@pim_api.pagination.parameter_validator'
            - '@pim_api.pagination.offset_hal_paginator'
            - '@pim_api.pagination.search_after_hal_paginator'
            - '@pimee_product_asset.factory.asset'
            - '@validator'
            - '@pimee_product_asset.updater.external_api.asset'
            - '@pimee_product_asset.saver.asset'
            - '@router'
            - '@pimee_product_asset.stream.asset_partial_update_stream'
            - '%pim_api.configuration%'

    pimee_product_asset.controller.asset_tag:
        class : '%pimee_product_asset.controller.asset_tag.class%'
        arguments:
            - '@pimee_product_asset.repository.external_api.tag'
            - '@pim_api.pagination.parameter_validator'
            - '@pim_api.pagination.offset_hal_paginator'
            - '@pimee_product_asset.factory.tag'
            - '@pimee_product_asset.updater.tag'
            - '@validator'
            - '@pimee_product_asset.saver.tag'
            - '@router'
            - '%pim_api.configuration%'

    pimee_product_asset.controller.ajax_option:
        class: '%pimee_product_asset.controller.ajax_option.class%'
        arguments:
            - '@doctrine'
            - '@pim_reference_data.registry'
            - '@pimee_product_asset.context.user'
