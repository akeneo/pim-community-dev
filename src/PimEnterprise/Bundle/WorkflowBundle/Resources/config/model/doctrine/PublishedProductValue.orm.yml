PimEnterprise\Bundle\WorkflowBundle\Model\PublishedProductValue:
    type: entity
    table: pimee_workflow_published_product_value
    changeTrackingPolicy: DEFERRED_EXPLICIT
    indexes:
        value_idx:
            columns:
                - attribute_id
                - locale_code
                - scope_code
        varchar_idx:
            columns:
                - value_string
        integer_idx:
            columns:
                - value_integer
    fields:
        id:
            type: integer
            id: true
            generator:
                strategy: AUTO
        varchar:
            type: string
            length: 255
            nullable: true
            column: value_string
        integer:
            type: integer
            nullable: true
            column: value_integer
        decimal:
            type: float
            nullable: true
            column: value_decimal
        boolean:
            type: boolean
            nullable: true
            column: value_boolean
        text:
            type: text
            nullable: true
            column: value_text
        date:
            type: date
            nullable: true
            column: value_date
        datetime:
            type: datetime
            nullable: true
            column: value_datetime
        locale:
            type: string
            length: 20
            nullable: true
            column: locale_code
        scope:
            type: string
            length: 100
            nullable: true
            column: scope_code
    manyToOne:
        attribute:
            targetEntity: Pim\Bundle\CatalogBundle\Model\AttributeInterface
            joinColumns:
                attribute_id:
                    referencedColumnName: id
                    onDelete: CASCADE
                    nullable: false
        option:
            targetEntity: Pim\Bundle\CatalogBundle\Entity\AttributeOption
            cascade:
                - persist
                - refresh
            joinColumns:
                option_id:
                    referencedColumnName: id
                    onDelete: 'SET NULL'
        entity:
            targetEntity: PimEnterprise\Bundle\WorkflowBundle\Model\PublishedProductInterface
            inversedBy: values
            joinColumns:
                entity_id:
                    referencedColumnName: id
                    onDelete: CASCADE
        media:
            targetEntity: Akeneo\Component\FileStorage\Model\FileInterface
            cascade:
                # do not set cascade "remove" otherwise medias will be deleted during an unpublish
                - persist
                - refresh
                - detach
            joinColumns:
                media_id:
                    referencedColumnName: id
                    onDelete: 'SET NULL'
    manyToMany:
        options:
            targetEntity: Pim\Bundle\CatalogBundle\Entity\AttributeOption
            cascade:
                - refresh
            joinTable:
                name: pimee_workflow_published_product_value_option
                joinColumns:
                    value_id:
                        referencedColumnName: id
                        nullable: true
                        onDelete: CASCADE
                inverseJoinColumns:
                    option_id:
                        referencedColumnName: id
                        nullable: true
                        onDelete: CASCADE
    oneToOne:
        metric:
            targetEntity: PimEnterprise\Bundle\WorkflowBundle\Model\PublishedProductMetricInterface
            cascade:
                - remove
                - persist
                - refresh
            inversedBy: value
            joinColumns:
                metric_id:
                    referencedColumnName: id
                    onDelete: 'SET NULL'
    oneToMany:
        prices:
            targetEntity: PimEnterprise\Bundle\WorkflowBundle\Model\PublishedProductPriceInterface
            cascade:
                - remove
                - persist
                - refresh
            mappedBy: value
            indexBy: currency
            orderBy:
                currency: ASC
