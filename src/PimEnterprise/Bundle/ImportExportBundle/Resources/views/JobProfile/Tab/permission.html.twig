{% if form.permissions is defined %}
    <script type="text/javascript">
        require(
                ['jquery', 'pimee/manage-permissions'],
                function ($, managePermissions) {
                    'use strict';

                    $(function () {
                        var options = {
                            elementId: '#{{form.permissions.vars.id}}',
                            changeBlockLabel: '{{ 'Changes'|trans }}',
                            grantMessage: 'permission-changes.job profile.grant',
                            revokeMessage: 'permission-changes.job profile.revoke',
                            update: {
                                add: {
                                    '{{ form.permissions.edit.vars.id }}': ['{{ form.permissions.execute.vars.id }}']
                                },
                                remove: {
                                    '{{ form.permissions.execute.vars.id }}': ['{{ form.permissions.edit.vars.id }}'],
                                }
                            }
                        };
                        managePermissions(options);
                    });
                });
    </script>

    <div id="{{ viewElement.alias|replace({' ': '-', '.': '-'})|lower }}" class="tab-pane">
        {{ elements.tabSections(
            { 'pane.accordion.permissions': form_widget(form.permissions) },
            1,
            false,
            'permission'
        ) }}
    </div>
{% endif %}
