parameters:
    pimee_product_asset.controller.product_asset.class:      PimEnterprise\Bundle\ProductAssetBundle\Controller\ProductAssetController
    pimee_product_asset.controller.rest.mass_upload.class:   PimEnterprise\Bundle\ProductAssetBundle\Controller\Rest\MassUploadController
    pimee_product_asset.controller.rest.product_asset.class: PimEnterprise\Bundle\ProductAssetBundle\Controller\Rest\ProductAssetController

services:
    pimee_product_asset.controller.product_asset:
        class: %pimee_product_asset.controller.product_asset.class%
        arguments:
            - '@pimee_product_asset.repository.asset'
            - '@pimee_product_asset.repository.reference'
            - '@pimee_product_asset.repository.variation'
            - '@pimee_product_asset.repository.file_metadata'
            - '@pim_catalog.repository.locale'
            - '@pim_catalog.repository.channel'
            - '@pimee_product_asset.variation_file_generator'
            - '@pimee_product_asset.updater.files'
            - '@pimee_product_asset.saver.asset'
            - '@pimee_product_asset.saver.reference'
            - '@pimee_product_asset.saver.variation'
            - '@pimee_product_asset.remover.asset'
            - '@event_dispatcher'
            - '@pimee_product_asset.factory.asset'
            - '@akeneo_file_storage.file_storage.file_factory'
            - '@pimee_product_asset.context.user'
            - '@pim_enrich.controller.file'
        calls:
            - [ setContainer, [ @service_container ] ]

    pimee_product_asset.controller.rest.product_asset:
        class: %pimee_product_asset.controller.rest.product_asset.class%
        arguments:
            - '@pimee_product_asset.repository.asset'
            - '@pim_internal_api_serializer'

    pimee_product_asset.controller.rest.mass_upload:
        class: %pimee_product_asset.controller.rest.mass_upload.class%
        arguments:
            - '@pimee_product_asset.repository.asset'
            - '@pimee_product_asset.uploader'
            - '@pimee_product_asset.upload_checker'
            - '@pimee_product_asset.upload_scheduler'
            - '@security.token_storage'
            - '@pim_connector.launcher.simple_job_launcher'
            - '@pim_import_export.repository.job_instance'

    pimee_product_asset.controller.category_tree:
        scope: request
        class: %pim_enrich.controller.category_tree.class%
        arguments:
            - '@event_dispatcher'
            - '@pimee_product_asset.context.user'
            - '@pimee_product_asset.saver.category'
            - '@pimee_product_asset.remover.category_asset'
            - '@pimee_product_asset.factory.category'
            - '@pimee_product_asset.repository.category'
            - '@oro_security.security_facade'
            - { related_entity: asset, form_type: pimee_asset_category, acl: pimee_product_asset, route: pimee_asset }
            - '@pimee_product_asset.repository.asset_category_access'
            - '@security.token_storage'
        calls:
            - [ setContainer, [ @service_container ] ]
