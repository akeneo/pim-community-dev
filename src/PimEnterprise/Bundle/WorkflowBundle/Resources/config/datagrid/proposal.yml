datagrid:
    proposal-grid:
        options:
            entityHint: proposal
            requireJSModules:
                - pimee/proposal/partial-proposal-builder
            manageFilters: true
        source:
            type: pimee_datasource_product_draft
            entity: '%pimee_workflow.model.product_draft.class%'
            repository_method: createProposalDatagridQueryBuilder
            repository_parameters:
                - currentUser
        columns:
            product:
                label: pimee_workflow.product_draft.product.label
                type: twig
                template: PimEnterpriseWorkflowBundle:Datagrid/Property:product_link.html.twig
                frontend_type: html
            author:
                label: pimee_workflow.product_draft.author
                type: field
                frontend_type: string
            changes:
                label: pimee_workflow.product_draft.changes
                type: twig
                data_name: changesToReview
                template: PimEnterpriseWorkflowBundle:Datagrid:Property/changes.html.twig
                frontend_type: html
            createdAt:
                label: pimee_workflow.product_draft.created
                type: product_value_date
                frontend_type: datetime
            status:
                label: pimee_workflow.product_draft.status.label
                type: twig
                template: PimEnterpriseWorkflowBundle:Datagrid:Property/product_draft_status.html.twig
                frontend_type: html
        properties:
            id: ~
            approve_link:
                type: url
                route: pimee_workflow_product_draft_approve
                params:
                    - id
                    - dataLocale
            refuse_link:
                type: url
                route: pimee_workflow_product_draft_refuse
                params:
                    - id
                    - dataLocale
        actions:
            approve:
                type: approve-proposal
                label: pimee_workflow.product_draft.action.approve
                launcherOptions:
                    iconClassName: AknButton-icon icon-ok
                    className: AknButton AknButton--apply AknButton--small
                link: approve_link
            refuse:
                type: reject-proposal
                label: pimee_workflow.product_draft.action.refuse
                launcherOptions:
                    iconClassName: AknButton-icon icon-remove
                    className: AknButton AknButton--important AknButton--small
                link: refuse_link
        action_configuration: '@pimee_datagrid.datagrid.configuration.proposal.grid_helper->getActionConfigurationClosure'
        mass_actions:
            mass_approve:
                type: mass-approve-proposal
                handler: mass_approve
                label: pimee_workflow.product_draft.mass_review_action.approve
                route: pimee_workflow_product_draft_mass_approve
                className: 'AknButton AknButton--apply AknButtonList-item'
            mass_refuse:
                type: mass-refuse-proposal
                handler: mass_refuse
                label: pimee_workflow.product_draft.mass_review_action.refuse
                route: pimee_workflow_product_draft_mass_refuse
                className: 'AknButton AknButton--important AknButtonList-item'
        filters:
            columns:
                author:
                    type:        product_draft_choice
                    data_name:   author
                    label:       pimee_workflow.product_draft.author
                    options:
                        field_options:
                            multiple: true
                            choices: '@pimee_datagrid.datagrid.configuration.proposal.grid_helper->getAuthorChoices'
                createdAt:
                    type:      product_draft_date
                    ftype:     date
                    data_name: createdAt
                    label:     pimee_workflow.product_draft.created
                product:
                    type:        product_draft_choice
                    ftype:       choice
                    data_name:   product.id
                    label:       pimee_workflow.product_draft.product.label
                    options:
                        field_options:
                            multiple: true
                            choices: '@pimee_datagrid.datagrid.configuration.proposal.grid_helper->getProductChoices'
                attribute:
                    type:        product_draft_attribute_choice
                    data_name:   changes.values
                    label:       pimee_workflow.product_draft.attribute.label
                    options:
                        field_options:
                            multiple: true
        sorters:
            columns:
                author:
                    data_name: author
                createdAt:
                    data_name: createdAt
            default:
                createdAt: '%oro_datagrid.extension.orm_sorter.class%::DIRECTION_DESC'
