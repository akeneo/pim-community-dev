services:
    akeneo_assetmanager.validator.constraint.limited_assets_in_value:
        class: Akeneo\Pim\Enrichment\AssetManager\Component\Validator\Constraints\ThereShouldBeLessAssetsInValueThanLimitValidator
        arguments:
            - '%enrich_max_asset_in_asset_collection%'
        tags:
            - { name: validator.constraint_validator, alias: limited_assets_in_value }

    akeneo_assetmanager.validator.constraint_guesser.asset_multiple_link:
        public: false
        class: Akeneo\Pim\Enrichment\AssetManager\Component\Validator\ConstraintGuesser\AssetMultipleLinkGuesser
        tags:
            - { name: pim_catalog.constraint_guesser.attribute }

    pim_enrich.normalizer.image:
        class: 'Akeneo\Pim\Enrichment\AssetManager\Component\Normalizer\InternalApi\ImageNormalizer'
        arguments:
            - '@pim_enrich.normalizer.file'
            - '@pim_catalog.repository.cached_attribute'
            - '@pimee.asset_manager.enrichment.asset_preview_generator'

    # form providers
    akeneo_assetmanager.provider.form.job_instance:
        class: 'Akeneo\Platform\Bundle\ImportExportBundle\Provider\Form\JobInstanceFormProvider'
        arguments:
            -
                asset_manager_csv_asset_export: pim-job-instance-csv-asset-export
        tags:
            - { name: pim_enrich.provider.form, priority: 100 }
