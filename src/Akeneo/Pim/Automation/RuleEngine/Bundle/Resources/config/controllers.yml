parameters:
    pimee_catalog_rule.controller.rule.class: Akeneo\Pim\Automation\RuleEngine\Bundle\Controller\RuleController

services:
    pimee_catalog_rule.controller.rule:
        public: true
        class: '%pimee_catalog_rule.controller.rule.class%'
        arguments:
            - '@akeneo_rule_engine.repository.rule_definition'
            - '@akeneo_rule_engine.remover.rule_definition'
            - '@security.token_storage'
            - '@akeneo_batch_queue.launcher.queue_job_launcher'
            - '@akeneo_batch.job.job_instance_repository'
            - '@pim_catalog_rule.datagrid.oro_to_pim_grid_filter'
            - '@pim_catalog.command_launcher'
            - '@oro_datagrid.mass_action.parameters_parser'

    pimee_enrich.controller.rule_relation:
        public: true
        class: 'Akeneo\Pim\Automation\RuleEngine\Bundle\Controller\InternalApi\RuleRelationController'
        arguments:
            - '@akeneo_rule_engine.repository.rule_relation'
            - '@pim_internal_api_serializer'
            - '@pim_catalog.resolver.fqcn'

    pimee_enrich.controller.rule_definition.get:
        public: true
        class: 'Akeneo\Pim\Automation\RuleEngine\Bundle\Controller\InternalApi\GetRuleDefinitionController'
        arguments:
            - '@akeneo_rule_engine.repository.rule_definition'
            - '@akeneo_rule_engine.normalizer.rule_definition'

    pimee_enrich.controller.rule_definition.create:
        class: 'Akeneo\Pim\Automation\RuleEngine\Bundle\Controller\InternalApi\CreateRuleDefinitionController'
        arguments:
            - '@akeneo_rule_engine.updater.rule_definition'
            - '@akeneo_rule_engine.saver.rule_definition'
            - '@akeneo_rule_engine.normalizer.rule_definition'
            - '@validator'
            - '@pim_enrich.normalizer.violation'

    pimee_enrich.controller.rule_definition.update:
        class: 'Akeneo\Pim\Automation\RuleEngine\Bundle\Controller\InternalApi\UpdateRuleDefinitionController'
        arguments:
            - '@akeneo_rule_engine.repository.rule_definition'
            - '@akeneo_rule_engine.updater.rule_definition'
            - '@akeneo_rule_engine.saver.rule_definition'
            - '@akeneo_rule_engine.normalizer.rule_definition'
            - '@validator'
            - '@pim_enrich.normalizer.violation'
