connector:
    name: Akeneo CSV Connector
    jobs:
        csv_product_import_with_rules:
            title: pim_connector.jobs.csv_product_import_with_rules.title
            type:  import
            steps:
                validation:
                    title: pim_connector.jobs.csv_product_import_with_rules.validation.title
                    class: %pim_connector.step.validator.class%
                    services:
                        charsetValidator: pim_connector.validator.item.charset_validator
                import:
                    title:         pim_connector.jobs.csv_product_import_with_rules.import.title
                    services:
                        reader:    pim_connector.reader.file.csv_product
                        processor: pim_connector.processor.denormalization.product.flat
                        writer:    pim_connector.writer.doctrine.product
                import_associations:
                    title:         pim_connector.jobs.csv_product_import.import_associations.title
                    services:
                        reader:    pim_connector.reader.file.csv_association
                        processor: pim_connector.processor.denormalization.product_association.flat
                        writer:    pim_connector.writer.doctrine.product_association
                    parameters:
                        batch_size: 1
                apply_rules:
                    title:         pimee_catalog_rule.jobs.rule_applier.compute.title
                    services:
                        reader:    pim_connector.reader.file.csv_product
                        processor: pimee_catalog_rule.processor.product_loader_processor
                        writer:    pimee_catalog_rule.writer.apply_rules
                    parameters:
                        batch_size: 100
