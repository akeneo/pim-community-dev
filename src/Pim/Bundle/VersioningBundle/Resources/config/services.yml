services:

    pim_versioning.manager.audit:
        class: %pim_versioning.manager.audit.class%
        arguments:
            - @doctrine.orm.entity_manager

    pim_versioning.manager.version_builder:
        class: %pim_versioning.manager.version_builder.class%
        arguments:
            - @pim_serializer

    pim_versioning.event_listener.addversion:
        class: %pim_versioning.event_listener.addversion.class%
        arguments:
            - @pim_versioning.manager.version_builder
        tags:
            - { name: doctrine.event_subscriber }

    pim_versioning.listener.adduser:
        class:     %pim_versioning.event_listener.adduser.class%
        arguments: [@pim_versioning.event_listener.addversion, @security.context]
        tags:
            - { name: kernel.event_listener, event: kernel.request , method: onKernelRequest}
