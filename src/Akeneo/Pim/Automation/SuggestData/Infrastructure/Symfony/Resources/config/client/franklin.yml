services:
    akeneo.pim.automation.suggest_data.franklin_client.guzzle.message_formatter:
        public: false
        class: 'GuzzleHttp\MessageFormatter'
        arguments:
            - "{method} {url} {code} Request: {req_body} Response: {res_body} {phrase} {error}"

    akeneo.pim.automation.suggest_data.franklin_client.guzzle.logger:
        public: false
        class: callback
        arguments: ['@monolog.logger.franklin', '@akeneo.pim.automation.suggest_data.franklin_client.guzzle.message_formatter']
        factory: [GuzzleHttp\Middleware, log]

    akeneo.pim.automation.suggest_data.franklin_client.guzzle_stack:
        public: false
        class: 'GuzzleHttp\HandlerStack'
        factory: ['GuzzleHttp\HandlerStack', create]
        calls:
            - [before, ['http_errors', '@akeneo.pim.automation.suggest_data.franklin_client.guzzle.logger', 'logger']]

    akeneo.pim.automation.suggest_data.franklin_client.guzzle_client:
        class: 'GuzzleHttp\Client'
        arguments:
            - {verify: false, handler: '@akeneo.pim.automation.suggest_data.franklin_client.guzzle_stack'}

    akeneo.pim.automation.suggest_data.franklin_client.http_client:
        class: 'Akeneo\Pim\Automation\SuggestData\Infrastructure\Client\Franklin\GuzzleClient'
        arguments:
            - '@akeneo.pim.automation.suggest_data.franklin_client.guzzle_client'

    akeneo.pim.automation.suggest_data.franklin_client.uri_generator:
        class: 'Akeneo\Pim\Automation\SuggestData\Infrastructure\Client\Franklin\UriGenerator'
        public: false
        arguments:
            - 'https://pim-ai.prod.cloud.akeneo.com'

    akeneo.pim.automation.suggest_data.franklin_client.subscription:
        class: 'Akeneo\Pim\Automation\SuggestData\Infrastructure\Client\Franklin\Api\Subscription\SubscriptionWebservice'
        arguments:
            - '@akeneo.pim.automation.suggest_data.franklin_client.uri_generator'
            - '@akeneo.pim.automation.suggest_data.franklin_client.http_client'

    akeneo.pim.automation.suggest_data.franklin_client.identifiers_mapping:
        class: 'Akeneo\Pim\Automation\SuggestData\Infrastructure\Client\Franklin\Api\IdentifiersMapping\IdentifiersMappingApiWebService'
        arguments:
            - '@akeneo.pim.automation.suggest_data.franklin_client.uri_generator'
            - '@akeneo.pim.automation.suggest_data.franklin_client.http_client'

    akeneo.pim.automation.suggest_data.franklin_client.authentication:
        class: 'Akeneo\Pim\Automation\SuggestData\Infrastructure\Client\Franklin\Api\Authentication\AuthenticationWebService'
        arguments:
            - '@akeneo.pim.automation.suggest_data.franklin_client.uri_generator'
            - '@akeneo.pim.automation.suggest_data.franklin_client.http_client'

    akeneo.pim.automation.suggest_data.franklin_client.attributes_mapping:
        class: 'Akeneo\Pim\Automation\SuggestData\Infrastructure\Client\Franklin\Api\AttributesMapping\AttributesMappingWebService'
        arguments:
            - '@akeneo.pim.automation.suggest_data.franklin_client.uri_generator'
            - '@akeneo.pim.automation.suggest_data.franklin_client.http_client'

    akeneo.pim.automation.suggest_data.franklin_client.attribute_options_mapping:
        class: 'Akeneo\Pim\Automation\SuggestData\Infrastructure\Client\Franklin\Api\OptionsMapping\OptionsMappingWebService'
        arguments:
            - '@akeneo.pim.automation.suggest_data.franklin_client.uri_generator'
            - '@akeneo.pim.automation.suggest_data.franklin_client.http_client'
