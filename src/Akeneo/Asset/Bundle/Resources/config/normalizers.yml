parameters:
    pimee_product_asset.normalizer.standard.asset.class:                 Akeneo\Asset\Component\Normalizer\Standard\AssetNormalizer
    pimee_product_asset.normalizer.standard.variation.class:             Akeneo\Asset\Component\Normalizer\Standard\VariationNormalizer
    pimee_product_asset.normalizer.standard.channel_configuration.class: Akeneo\Asset\Component\Normalizer\Standard\ChannelConfigurationNormalizer
    pimee_product_asset.normalizer.flat.asset.class:                     Akeneo\Asset\Component\Normalizer\Flat\AssetNormalizer
    pimee_product_asset.normalizer.external_api.asset_reference.class: Akeneo\Asset\Component\Normalizer\ExternalApi\AssetReferenceNormalizer
    pimee_product_asset.normalizer.external_api.asset_variation.class: Akeneo\Asset\Component\Normalizer\ExternalApi\AssetVariationNormalizer
    pimee_product_asset.normalizer.external_api.asset.class: Akeneo\Asset\Component\Normalizer\ExternalApi\AssetNormalizer
    pimee_product_asset.normalizer.internal_api.asset.class: Akeneo\Asset\Component\Normalizer\InternalApi\AssetNormalizer
    pimee_product_asset.normalizer.versioning.asset_category.class:  Akeneo\Asset\Component\Normalizer\Flat\AssetCategoryNormalizer

services:
    # standard
    pimee_product_asset.normalizer.standard.asset:
        class: '%pimee_product_asset.normalizer.standard.asset.class%'
        arguments:
            - '@pim_catalog.normalizer.standard.datetime'
        tags:
            - { name: pim_standard_format_serializer.normalizer, priority: 100 }

    pimee_product_asset.normalizer.standard.variation:
        class: '%pimee_product_asset.normalizer.standard.variation.class%'
        tags:
            - { name: pim_standard_format_serializer.normalizer, priority: 100 }

    pimee_product_asset.normalizer.standard.channel_configuration:
        class: '%pimee_product_asset.normalizer.standard.channel_configuration.class%'
        tags:
            - { name: pim_standard_format_serializer.normalizer, priority: 100 }

    # flat
    pimee_product_asset.normalizer.flat.asset:
        class: '%pimee_product_asset.normalizer.flat.asset.class%'
        arguments:
            - '@pimee_product_asset.normalizer.standard.asset'
        tags:
            - { name: pim_versioning.serializer.normalizer, priority: 100 }

    # External api
    pimee_product_asset.normalizer.external_api.asset_reference:
        class: '%pimee_product_asset.normalizer.external_api.asset_reference.class%'
        arguments:
            - '@router'
        tags:
            - { name: pim_external_api_serializer.normalizer, priority: 100 }

    pimee_product_asset.normalizer.external_api.asset_variation:
        class: '%pimee_product_asset.normalizer.external_api.asset_variation.class%'
        arguments:
            - '@pimee_product_asset.normalizer.standard.variation'
            - '@router'
        tags:
            - { name: pim_external_api_serializer.normalizer, priority: 100 }

    pimee_product_asset.normalizer.external_api.asset:
        class: '%pimee_product_asset.normalizer.external_api.asset.class%'
        arguments:
            - '@pimee_product_asset.normalizer.standard.asset'
            - '@pimee_product_asset.normalizer.external_api.asset_variation'
            - '@pimee_product_asset.normalizer.external_api.asset_reference'
            - '@router'
        tags:
            - { name: pim_external_api_serializer.normalizer, priority: 100 }

    # Internal api
    pimee_product_asset.normalizer.internal_api.asset:
        class: '%pimee_product_asset.normalizer.internal_api.asset.class%'
        arguments:
            - '@pim_standard_format_serializer'
        tags:
            - { name: pim_internal_api_serializer.normalizer, priority: 120 }

    # Versioning
    pimee_product_asset.normalizer.versioning.asset_category:
        class: '%pimee_product_asset.normalizer.versioning.asset_category.class%'
        arguments:
            - '@pim_versioning.serializer.normalizer.flat.category'
            - '@pimee_product_asset.manager.category_access'
        tags:
            - { name: pim_versioning.serializer.normalizer, priority: 100 }

    pim_enrich.normalizer.image:
        class: 'Akeneo\Asset\Component\Normalizer\InternalApi\ImageNormalizer'
        arguments:
            - '@pim_enrich.normalizer.file'
            - '@pim_catalog.repository.locale'
            - '@pim_catalog.repository.cached_attribute'
            - '@pim_reference_data.repository_resolver'
            - '@pimee.asset_manager.enrichment.asset_preview_generator'
