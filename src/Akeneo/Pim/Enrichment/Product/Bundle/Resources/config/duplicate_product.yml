services:
    pimee_enrich.controller.duplicate_product:
        public: true
        class: 'Akeneo\Pim\Enrichment\Product\Bundle\Controller\InternalApi\DuplicateProductController'
        arguments:
            - '@pim_catalog.repository.product_without_permission'
            - '@pimee_enrich.product.duplicate_product_handler'
            - '@pim_enrich.normalizer.product_violation'
            - '@pim_user.context.user'

    pimee_enrich.product.duplicate_product_handler:
        class: 'Akeneo\Pim\Enrichment\Product\Component\Product\UseCase\DuplicateProduct\DuplicateProductHandler'
        arguments:
            - '@pim_catalog.repository.product_without_permission'
            - '@pim_catalog.repository.attribute'
            - '@pimee_enrich.product.remove_unique_attribute_values'
            - '@pim_catalog.builder.product'
            - '@pim_catalog.normalizer.standard.product'
            - '@pim_catalog.updater.product'
            - '@pim_catalog.validator.product'
            - '@pim_catalog.saver.product'
            - '@oro_security.security_facade'
            - '@akeneo.pim.permission.product.query.fetch_user_rights_on_product'

    pimee_enrich.product.remove_unique_attribute_values:
        class: 'Akeneo\Pim\Enrichment\Product\Component\Product\UseCase\DuplicateProduct\RemoveUniqueAttributeValues'
        arguments:
            - '@pimee_structure.product.query.sql_get_unique_attribute_codes'
            - '@pim_catalog.repository.attribute'
