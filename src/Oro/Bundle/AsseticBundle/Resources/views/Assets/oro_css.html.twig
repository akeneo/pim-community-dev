{# Css assetics #}

{% set hasLess = false %}

{% oro_css filter='cssrewrite, lessphp' %}
    {% set isLess = ('less' in asset_url|split('.')) %}
    {% set hasLess = isLess ? true : hasLess %}

    <link rel="{% if isLess %}stylesheet/less{% else %}stylesheet{% endif %}"
          type="text/css"
          media="all"
          href="{{ asset(asset_url, 'frontend') }}"
          data-name="{{ name }}"
    />
    <script nonce="{{ js_nonce() }}">document.querySelector('link[data-name="{{ name }}"]').disabled = {{ isMain ? 'false' : 'true' }};</script>
{% endoro_css %}

{% if hasLess %}
    <script nonce="{{ js_nonce() }}">localStorage.clear();</script>
    <script nonce="{{ js_nonce() }}" src="{{ asset('bundles/oroassetic/lib/less-1.3.3.min.js') }}"></script>
    <script nonce="{{ js_nonce() }}">less.watch();</script>
{% endif %}
