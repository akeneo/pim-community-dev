parameters:
    pimee_enrich.serializer.normalizer.rule_relation.class: PimEnterprise\Bundle\EnrichBundle\Normalizer\RuleRelationNormalizer
    pimee_enrich.normalizer.standard.asset.class:           PimEnterprise\Component\ProductAsset\Normalizer\InternalApi\AssetNormalizer
    pimee_enrich.normalizer.version.class:                  PimEnterprise\Bundle\EnrichBundle\Normalizer\VersionNormalizer
    pimee_enrich.normalizer.product.class:                  PimEnterprise\Bundle\EnrichBundle\Normalizer\ProductNormalizer
    pimee_enrich.normalizer.attribute.class:                PimEnterprise\Bundle\EnrichBundle\Normalizer\AttributeNormalizer
    pimee_enrich.normalizer.image.class:                    PimEnterprise\Bundle\EnrichBundle\Normalizer\ImageNormalizer
    pimee_enrich.normalizer.incomplete_values.class:        PimEnterprise\Bundle\EnrichBundle\Normalizer\IncompleteValuesNormalizer

services:
    pimee_enrich.serializer.normalizer.granted_family:
        parent: pim_catalog.normalizer.standard.family
        tags:
            - { name: pim_internal_api_serializer.normalizer, priority: 100 }

    pimee_enrich.serializer.normalizer.rule_relation:
        class: '%pimee_enrich.serializer.normalizer.rule_relation.class%'
        arguments:
            - '@doctrine'
        tags:
            - { name: pim_internal_api_serializer.normalizer, priority: 100 }

    pimee_enrich.normalizer.version:
        class: '%pimee_enrich.normalizer.version.class%'
        arguments:
            - '@pim_enrich.normalizer.version'
            - '@pimee_workflow.repository.published_product'
        tags:
            - { name: pim_internal_api_serializer.normalizer, priority: 120 }

    pimee_enrich.normalizer.product:
        class: '%pimee_enrich.normalizer.product.class%'
        arguments:
            - '@pim_enrich.normalizer.product'
            - '@pimee_workflow.manager.published_product'
            - '@pimee_workflow.repository.product_draft'
            - '@pimee_workflow.applier.product_draft'
            - '@pimee_security.repository.category_access'
            - '@security.token_storage'
            - '@security.authorization_checker'
            - '@pim_catalog.repository.product'
        tags:
            - { name: pim_internal_api_serializer.normalizer, priority: 120 }

    pimee_enrich.normalizer.standard.asset:
        class: '%pimee_enrich.normalizer.standard.asset.class%'
        arguments:
            - '@pim_serializer'
        tags:
            - { name: pim_internal_api_serializer.normalizer, priority: 120 }

    pimee_enrich.normalizer.attribute:
        class: '%pimee_enrich.normalizer.attribute.class%'
        decorates: pim_enrich.normalizer.attribute
        decoration_inner_name: pim_enrich.normalizer.attribute.base
        arguments:
            - '@pim_enrich.normalizer.attribute.base'
        tags:
            - { name: pim_internal_api_serializer.normalizer }

    pim_enrich.normalizer.image:
        class: '%pimee_enrich.normalizer.image.class%'
        arguments:
            - '@pim_enrich.normalizer.file'
            - '@pim_catalog.repository.locale'

    pim_enrich.normalizer.incomplete_values:
        class: '%pimee_enrich.normalizer.incomplete_values.class%'
        arguments:
            - '@pim_serializer'
            - '@pim_catalog.entity_with_family.required_value_collection_factory'
            - '@pim_catalog.entity_with_family.incomplete_value_collection_factory'
            - '@security.authorization_checker'
        tags:
            - { name: pim_internal_api_serializer.normalizer }
