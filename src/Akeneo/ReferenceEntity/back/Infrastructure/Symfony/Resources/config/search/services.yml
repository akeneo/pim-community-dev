services:
    # Indexers
    akeneo_referenceentity.infrastructure.search.elasticsearch.record_indexer:
        class: Akeneo\ReferenceEntity\Infrastructure\Search\Elasticsearch\Record\RecordIndexer
        arguments:
            - '@akeneo_referenceentity.client.record'
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.record_normalizer'

    # Subscribers
    akeneo_referenceentity.infrastructure.search.elasticsearch.index_record_subscriber:
        class: Akeneo\ReferenceEntity\Infrastructure\Search\Elasticsearch\Record\IndexRecordSubscriber
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.record'
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.record_indexer'
        tags:
            - { name: kernel.event_subscriber }

    # Normalizers
    akeneo_referenceentity.infrastructure.search.elasticsearch.record_normalizer:
        class: Akeneo\ReferenceEntity\Infrastructure\Search\Elasticsearch\Record\RecordNormalizer
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.query.get_reference_entity_identifier_for_record_identifier'
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.find_activated_locales_per_channels'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_searchable_records'
            - '@akeneo_referenceentity.infrastructure.persistence.query.find_values_to_index_for_channel_and_locale'

    akeneo_referenceentity.infrastructure.search.elasticsearch.record_search_matrix_normalizer:
        class: Akeneo\ReferenceEntity\Infrastructure\Search\Elasticsearch\Record\RecordSearchMatrixNormalizer
        arguments:
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.find_activated_locales_per_channels'
