connector:
    name: Akeneo Mass Edit Connector
    jobs:
        publish_product:
            title: publish_product
            type:  mass_edit
            steps:
                perform:
                    title: publish_product
                    class: "%pim_connector.step.tasklet.class%"
                    services:
                        tasklet: pim_enrich.mass_edit_tasklet.publish_product
        unpublish_product:
            title: unpublish_product
            type:  mass_edit
            steps:
                perform:
                    title: unpublish_product
                    class: "%pim_connector.step.tasklet.class%"
                    services:
                        tasklet: pim_enrich.mass_edit_tasklet.unpublish_product
        add_product_value_with_permission:
            title: add_product_value_with_permission
            type:  mass_edit
            steps:
                perform:
                    title: add_product_value_with_permission
                    services:
                        reader:    pim_enrich.connector.reader.mass_edit.product
                        processor: pimee_enrich.mass_edit.add_product_value.processor
                        writer:    pim_connector.writer.doctrine.product
        add_product_value_with_permission_and_rules:
            title: add_product_value_with_permission_and_rules
            type:  mass_edit
            steps:
                perform:
                    title: add_product_value_with_permission_and_rules
                    services:
                        reader:    pim_enrich.connector.reader.mass_edit.product
                        processor: pimee_enrich.mass_edit.add_product_value.processor
                        writer:    pim_connector.writer.doctrine.product
                execute_rules:
                     title:         pimee_catalog_rule.steps.rules_execution.title
                     services:
                         reader:    pim_enrich.connector.reader.mass_edit.product
                         processor: pimee_catalog_rule.processor.product_loader
                         writer:    pimee_catalog_rule.executor.rules
                     parameters:
                         batch_size: 100
        update_product_value_with_permission:
            title: update_product_value_with_permission
            type:  mass_edit
            steps:
                perform:
                    title: update_product_value_with_permission
                    services:
                        reader:    pim_enrich.connector.reader.mass_edit.product
                        processor: pimee_enrich.mass_edit.update_product_value.processor
                        writer:    pim_connector.writer.doctrine.product
        update_product_value_with_permission_and_rules:
            title: update_product_value_with_permission
            type:  mass_edit
            steps:
                perform:
                    title: update_product_value_with_permission_and_rules
                    services:
                        reader:    pim_enrich.connector.reader.mass_edit.product
                        processor: pimee_enrich.mass_edit.update_product_value.processor
                        writer:    pim_connector.writer.doctrine.product
                execute_rules:
                     title:         pimee_catalog_rule.steps.rules_execution.title
                     services:
                         reader:    pim_enrich.connector.reader.mass_edit.product
                         processor: pimee_catalog_rule.processor.product_loader
                         writer:    pimee_catalog_rule.executor.rules
                     parameters:
                         batch_size: 100
        edit_common_attributes_with_permission:
            title: edit_common_attributes_with_permission
            type:  mass_edit
            steps:
                perform:
                    title: edit_common_attributes_with_permission
                    services:
                        reader:    pim_enrich.connector.reader.mass_edit.product
                        processor: pim_enrich.connector.processor.mass_edit.product.edit_common_attributes
                        writer:    pimee_enrich.connector.writer.mass_edit.product
                    parameters:
                        batch_size: 1000
                clean:
                    title: edit_common_attributes_clean
                    class: "%pim_enrich.step.mass_edit.step.class%"
                    services:
                        cleaner: pim_enrich.connector.item.mass_edit.temporary_file_cleaner
        edit_common_attributes_with_permission_and_rules:
            title: edit_common_attributes_with_permission_and_rules
            type:  mass_edit
            steps:
                perform:
                    title: edit_common_attributes_with_permission_and_rules
                    services:
                        reader:    pim_enrich.connector.reader.mass_edit.product
                        processor: pim_enrich.connector.processor.mass_edit.product.edit_common_attributes
                        writer:    pimee_enrich.connector.writer.mass_edit.product
                    parameters:
                        batch_size: 1000
                clean:
                    title: edit_common_attributes_clean
                    class: "%pim_enrich.step.mass_edit.step.class%"
                    services:
                        cleaner: pim_enrich.connector.item.mass_edit.temporary_file_cleaner
                execute_rules:
                     title:         pimee_catalog_rule.steps.rules_execution.title
                     services:
                         reader:    pim_enrich.connector.reader.mass_edit.product
                         processor: pimee_catalog_rule.processor.product_loader
                         writer:    pimee_catalog_rule.executor.rules
                     parameters:
                         batch_size: 100
        csv_published_product_quick_export:
            title: csv_published_product_quick_export
            type: quick_export
            steps:
                perform:
                    title: csv_published_product_quick_export
                    services:
                        reader:    pimee_workflow.connector.reader.mass_edit.published_product
                        processor: pim_enrich.connector.processor.quick_export.product_to_flat_array
                        writer:    pim_connector.writer.file.csv_product
                    parameters:
                        batch_size: 1000
        xlsx_published_product_quick_export:
             title: xlsx_published_product_quick_export
             type:  quick_export
             steps:
                 export:
                     title: xlsx_published_product_quick_export
                     services:
                         reader:    pimee_workflow.connector.reader.mass_edit.published_product
                         processor: pim_enrich.connector.processor.quick_export.product_to_flat_array
                         writer:    pim_connector.writer.file.xlsx_product
                     parameters:
                         batch_size: 1000
        add_to_variant_group_with_rules:
            title: add_to_variant_group_with_rules
            type:  mass_edit
            steps:
                perform:
                    title: add_to_variant_group_with_rules
                    services:
                        reader:    pim_enrich.connector.reader.mass_edit.variant_group_product
                        processor: pim_enrich.connector.processor.mass_edit.product.add_to_variant_group
                        writer:    pim_connector.writer.doctrine.product
                    parameters:
                        batch_size: 1000
                execute_rules:
                     title:         pimee_catalog_rule.steps.rules_execution.title
                     services:
                         reader:    pim_enrich.connector.reader.mass_edit.product
                         processor: pimee_catalog_rule.processor.product_loader
                         writer:    pimee_catalog_rule.executor.rules
                     parameters:
                         batch_size: 100
