connector:
    name: Akeneo Product Asset Connector
    jobs:
        csv_asset_import:
            title: pimee_product_asset.jobs.csv_asset_import.title
            type:  import
            steps:
                validation:
                    title: pim_connector.jobs.csv_product_import.validation.title
                    class: %pim_connector.step.validator.class%
                    services:
                        charsetValidator: pim_connector.validator.item.charset_validator
                import_tags:
                    title: pimee_product_asset.jobs.csv_tag_import.title
                    class: %pimee_product_asset.step.tag.class%
                    services:
                        reader:    pimee_product_asset.reader.file.csv_tag
                        processor: pimee_product_asset.processor.denormalization.tag.flat
                        writer:    pimee_product_asset.writer.doctrine.tag
                import_asset:
                    title:         pimee_product_asset.jobs.csv_asset_import.title
                    services:
                        reader:    pimee_product_asset.reader.file.csv_asset
                        processor: pimee_product_asset.processor.denormalization.asset.flat
                        writer:    pimee_product_asset.writer.doctrine.asset
        csv_asset_category_export:
            title: pimee_product_asset.jobs.csv_asset_category_export.title
            type:  export
            steps:
                export:
                    title: pimee_product_asset.jobs.csv_asset_category_export.title
                    services:
                        reader:    pimee_product_asset.reader.orm.category
                        processor: pim_base_connector.processor.csv_serializer.homogeneous
                        writer:    pim_connector.writer.file.simple_file
        csv_asset_category_import:
            title: pimee_product_asset.jobs.csv_asset_category_import.title
            type:  import
            steps:
                validation:
                    title: pim_connector.jobs.csv_product_import.validation.title
                    class: %pim_connector.step.validator.class%
                    services:
                        charsetValidator: pim_connector.validator.item.charset_validator
                import_asset_category:
                    title:         pimee_product_asset.jobs.csv_asset_category_import.title
                    services:
                        reader:    pimee_product_asset.reader.file.csv_asset_category
                        processor: pimee_product_asset.processor.denormalization.category.flat
                        writer:    pimee_product_asset.writer.doctrine.category
                    parameters:
                        batchSize: 1
        csv_asset_export:
            title: pimee_product_asset.jobs.csv_asset_export.title
            type:  export
            steps:
                export:
                    title: pimee_product_asset.jobs.csv_asset_export.title
                    services:
                        reader:    pimee_product_asset.reader.orm.asset
                        processor: pimee_product_asset.processor.normalization.asset.flat
                        writer:    pim_connector.writer.file.simple_file
        yml_asset_channel_configuration_import:
            title: pimee_product_asset.jobs.yml_asset_channel_configuration_import.title
            type:  import
            steps:
                validation:
                    title: pim_connector.jobs.csv_product_import.validation.title
                    class: %pim_connector.step.validator.class%
                    services:
                        charsetValidator: pim_connector.validator.item.charset_validator
                import_asset:
                    title:         pimee_product_asset.jobs.csv_asset_configuration_import.title
                    services:
                        reader:    pim_base_connector.reader.file.yaml
                        processor: pimee_product_asset.processor.denormalization.channel_configuration.flat
                        writer:    pimee_product_asset.writer.doctrine.channel_configuration
        apply_assets_mass_upload:
            title: assets_mass_upload
            type:  mass_upload
            steps:
                perform:
                    title: assets_mass_upload
                    class: "%pim_connector.step.tasklet.class%"
                    services:
                        tasklet: pimee_product_asset.mass_upload.tasklet
        csv_asset_variation_export:
            title: pimee_product_asset.jobs.csv_asset_variation_export.title
            type:  export
            steps:
                export:
                    title: pimee_product_asset.jobs.csv_asset_variation_export.title
                    services:
                        reader:    pimee_product_asset.reader.orm.variation
                        processor: pimee_product_asset.processor.normalization.variation.flat
                        writer:    pim_connector.writer.file.simple_file
        yml_asset_channel_configuration_export:
            title: pimee_product_asset.jobs.yml_asset_configuration_export.title
            type:  export
            steps:
                export:
                    title: pimee_product_asset.jobs.yml_asset_configuration_export.title
                    services:
                        reader:    pimee_product_asset.reader.orm.csv_channel_configuration
                        processor: pimee_product_asset.processor.normalization.channel_configuration.flat
                        writer:    pim_connector.writer.file.yaml
