services:
  akeneo.tailored_import.validation.is_valid_attribute:
    class: 'Akeneo\Platform\TailoredImport\Infrastructure\Validation\IsValidAttributeValidator'
    arguments:
      - '@akeneo.pim.structure.query.get_attributes'
      - '@pim_channel.query.cache.channel_exists_with_locale'
    tags:
      - { name: validator.constraint_validator, alias: 'akeneo.tailored_import.validation.is_valid_attribute' }
    public: true

  akeneo.tailored_import.validation.locale_should_be_active:
    class: 'Akeneo\Platform\TailoredImport\Infrastructure\Validation\LocaleShouldBeActiveValidator'
    arguments:
      - '@pim_channel.query.cache.channel_exists_with_locale'
    tags:
      - { name: validator.constraint_validator, alias: 'akeneo.tailored_import.validation.locale_should_be_active' }
    public: true

  akeneo.tailored_import.validation.channel_should_exist:
    class: 'Akeneo\Platform\TailoredImport\Infrastructure\Validation\ChannelShouldExistValidator'
    arguments:
      - '@pim_channel.query.cache.channel_exists_with_locale'
    tags:
      - { name: validator.constraint_validator, alias: 'akeneo.tailored_import.validation.channel_should_exist' }
    public: true

  akeneo.tailored_import.validation.data_mappings:
    class: 'Akeneo\Platform\TailoredImport\Infrastructure\Validation\DataMappingsValidator'
    arguments:
      - '@akeneo.pim.structure.query.get_attributes'
      - '@akeneo.tailored_import.query.is_multi_source_target'
    tags:
      - { name: validator.constraint_validator, alias: 'akeneo.tailored_import.validation.data_mappings' }
    public: true

  akeneo.tailored_import.validation.target:
    class: 'Akeneo\Platform\TailoredImport\Infrastructure\Validation\TargetValidator'
    arguments:
      - '@akeneo.pim.structure.query.get_attributes'
      - '@akeneo_measurement.public_api.find_unit'
      - '%akeneo.tailored_import.supported_system_properties%'
    tags:
      - { name: validator.constraint_validator, alias: 'akeneo.tailored_import.validation.target' }
    public: true

  akeneo.tailored_import.validation.file_key:
    class: 'Akeneo\Platform\TailoredImport\Infrastructure\Validation\FileKeyValidator'
    arguments:
      - '@akeneo_file_storage.file_storage.filesystem_provider'
    tags:
      - { name: validator.constraint_validator, alias: 'akeneo.tailored_import.validation.file_key' }
    public: true

  akeneo.tailored_import.validation.is_valid_file_template_information_query:
    class: 'Akeneo\Platform\TailoredImport\Infrastructure\Validation\IsValidFileTemplateInformationQueryValidator'
    arguments:
      - '@akeneo_file_storage.file_storage.filesystem_provider'
      - '@akeneo.tailored_import.spout.remote_file_reader.factory'
    tags:
      - { name: validator.constraint_validator, alias: 'akeneo.tailored_import.validation.is_valid_file_template_information_query' }
    public: true
