module.exports=(function(){"use strict";var j={protocol:'protocol',host:'hostname',port:'port',path:'pathname',query:'search',hash:'hash'},parse=function(a,b){var d=document,link=d.createElement('a'),b=b||d.location.href,auth=b.match(/\/\/(.*?)(?::(.*?))?@/)||[];link.href=b;for(var i in j){a[i]=link[j[i]]||''}a.protocol=a.protocol.replace(/:$/,'');a.query=a.query.replace(/^\?/,'');a.hash=a.hash.replace(/^#/,'');a.user=auth[1]||'';a.pass=auth[2]||'';parseQs(a)},decode=function(s){s=s.replace(/\+/g,' ');s=s.replace(/%([EF][0-9A-F])%([89AB][0-9A-F])%([89AB][0-9A-F])/g,function(a,b,c,d){var e=parseInt(b,16)-0xE0,n2=parseInt(c,16)-0x80;if(e==0&&n2<32){return a}var f=parseInt(d,16)-0x80,n=(e<<12)+(n2<<6)+f;if(n>0xFFFF){return a}return String.fromCharCode(n)});s=s.replace(/%([CD][0-9A-F])%([89AB][0-9A-F])/g,function(a,b,c){var d=parseInt(b,16)-0xC0;if(d<2){return a}var e=parseInt(c,16)-0x80;return String.fromCharCode((d<<6)+e)});s=s.replace(/%([0-7][0-9A-F])/g,function(a,b){return String.fromCharCode(parseInt(b,16))});return s},parseQs=function(g){var h=g.query;g.query=new(function(c){var d=/([^=&]+)(=([^&]*))?/g,match;while((match=d.exec(c))){var f=decodeURIComponent(match[1].replace(/\+/g,' ')),value=match[3]?decode(match[3]):'';if(this[f]!==undefined){if(!(this[f]instanceof Array)){this[f]=[this[f]]}this[f].push(value)}else{this[f]=value}}this.toString=function(){var s='',e=encodeURIComponent;for(var i in this){if(this[i]instanceof Function){continue}if(this[i]instanceof Array){var a=this[i].length;if(a){for(var b=0;b<a;b++){s+=s?'&':'';s+=e(i)+'='+e(this[i][b])}}else{s+=(s?'&':'')+e(i)+'='}}else{s+=s?'&':'';s+=e(i)+'='+e(this[i])}}return s}})(h)};return function(a){this.toString=function(){return((this.protocol&&(this.protocol+'://'))+(this.user&&(this.user+(this.pass&&(':'+this.pass))+'@'))+(this.host&&this.host)+(this.port&&(':'+this.port))+(this.path&&this.path)+(this.query.toString()&&('?'+this.query))+(this.hash&&('#'+this.hash)))};parse(this,a)}}());
