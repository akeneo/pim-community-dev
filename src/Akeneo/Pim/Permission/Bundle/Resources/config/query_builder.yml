parameters:
    pimee_catalog.query.elasticsearch.product_query_builder_factory.class: Akeneo\Pim\Permission\Bundle\Persistence\ORM\EntityWithValue\ProductQueryBuilderFactory

services:
    pimee_catalog.query.product_query_builder_factory_with_permissions:
        class: '%pimee_catalog.query.elasticsearch.product_query_builder_factory.class%'
        decorates: pim_catalog.query.product_query_builder_factory
        decoration_inner_name: pim_catalog.query.product_query_builder_factory_with_all_categories
        arguments:
            - '@pim_catalog.query.product_query_builder_factory_with_all_categories'
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
            - 'VIEW_ITEMS'

    pimee_catalog.query.product_query_builder_search_after_size_factory_with_permissions:
        class: '%pimee_catalog.query.elasticsearch.product_query_builder_factory.class%'
        decorates: pim_catalog.query.product_query_builder_search_after_size_factory
        decoration_inner_name: pim_catalog.query.product_query_builder_search_after_size_factory_with_all_categories
        arguments:
            - '@pim_catalog.query.product_query_builder_search_after_size_factory_with_all_categories'
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
            - 'VIEW_ITEMS'

    pimee_catalog.query.product_query_builder_from_size_factory_with_permissions:
        class: '%pimee_catalog.query.elasticsearch.product_query_builder_factory.class%'
        decorates: pim_catalog.query.product_query_builder_from_size_factory
        decoration_inner_name: pim_catalog.query.product_query_builder_from_size_factory_with_all_categories
        arguments:
            - '@pim_catalog.query.product_query_builder_from_size_factory_with_all_categories'
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
            - 'VIEW_ITEMS'

    pimee_catalog.query.product_model_query_builder_factory_with_permissions:
        class: '%pimee_catalog.query.elasticsearch.product_query_builder_factory.class%'
        decorates: pim_catalog.query.product_model_query_builder_factory
        decoration_inner_name: pim_catalog.query.product_model_query_builder_factory.without_permission
        arguments:
            - '@pim_catalog.query.product_model_query_builder_factory.without_permission'
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
            - 'VIEW_ITEMS'

    pimee_catalog.query.product_model_query_builder_search_after_size_factory_with_permissions:
        class: '%pimee_catalog.query.elasticsearch.product_query_builder_factory.class%'
        decorates: pim_catalog.query.product_model_query_builder_search_after_size_factory
        decoration_inner_name: pim_catalog.query.product_model_query_builder_search_after_size_factory.without_permission
        arguments:
            - '@pim_catalog.query.product_model_query_builder_search_after_size_factory.without_permission'
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
            - 'VIEW_ITEMS'

    pimee_catalog.query.product_model_query_builder_from_size_factory_with_permissions:
        class: '%pimee_catalog.query.elasticsearch.product_query_builder_factory.class%'
        decorates: pim_catalog.query.product_model_query_builder_from_size_factory
        decoration_inner_name: pim_catalog.query.product_model_query_builder_from_size_factory.without_permission
        arguments:
            - '@pim_catalog.query.product_model_query_builder_from_size_factory.without_permission'
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
            - 'VIEW_ITEMS'

    pimee_catalog.query.product_and_product_model_query_builder_factory.product_and_product_model_cursor_with_permissions:
        public: false
        class: '%pimee_catalog.query.elasticsearch.product_query_builder_factory.class%'
        arguments:
            - '@pim_catalog.query.product_and_product_model_query_builder_factory.with_product_and_product_model_cursor'
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
            - 'VIEW_ITEMS'

    pimee_catalog.query.product_query_builder_search_after_size_factory_external_api_with_permissions:
        public: false
        class: '%pimee_catalog.query.elasticsearch.product_query_builder_factory.class%'
        decorates: pim_catalog.query.product_query_builder_search_after_size_factory_external_api
        decoration_inner_name: pim_catalog.query.product_query_builder_search_after_size_factory_external_api.without_permission
        arguments:
            - '@pim_catalog.query.product_query_builder_search_after_size_factory_external_api.without_permission'
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
            - 'VIEW_ITEMS'

    pimee_catalog.query.product_query_builder_from_size_factory_external_api_with_permissions:
        public: false
        class: '%pimee_catalog.query.elasticsearch.product_query_builder_factory.class%'
        decorates: pim_catalog.query.product_query_builder_from_size_factory_external_api
        decoration_inner_name: pim_catalog.query.product_query_builder_from_size_factory_external_api.without_permission
        arguments:
            - '@pim_catalog.query.product_query_builder_from_size_factory_external_api.without_permission'
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
            - 'VIEW_ITEMS'

    pimee_catalog.query.product_model_query_builder_search_after_size_factory_external_api_with_permissions:
        public: false
        class: '%pimee_catalog.query.elasticsearch.product_query_builder_factory.class%'
        decorates: pim_catalog.query.product_model_query_builder_search_after_size_factory_external_api
        decoration_inner_name: pim_catalog.query.product_model_query_builder_search_after_size_factory_external_api.without_permission
        arguments:
            - '@pim_catalog.query.product_model_query_builder_search_after_size_factory_external_api.without_permission'
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
            - 'VIEW_ITEMS'
    
    pimee_catalog.query.product_model_query_builder_from_size_factory_external_api_with_permissions:
        public: false
        class: '%pimee_catalog.query.elasticsearch.product_query_builder_factory.class%'
        decorates: pim_catalog.query.product_model_query_builder_from_size_factory_external_api
        decoration_inner_name: pim_catalog.query.product_model_query_builder_from_size_factory_external_api.without_permission
        arguments:
            - '@pim_catalog.query.product_model_query_builder_from_size_factory_external_api.without_permission'
            - '@security.token_storage'
            - '@pimee_security.repository.category_access'
            - 'VIEW_ITEMS'
