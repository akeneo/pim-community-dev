editionFlag:
  enabled: false

nameOverride: ""
global:
  extraLabels:
    type: null # Generated with terraform template
    instanceName: null # Generated with terraform template
    pfid: null # Generated with terraform template
  monitoring:
    enabled: false

backup:
  enabled: true
  projectId: null # Generated with terraform template
  zone: null # Generated with terraform template
  snapshot:
    schedule: "0 0 */1 * * *" # Once every hour: https://godoc.org/github.com/robfig/cron
    retentionPolicy:
      dailyBackups: 10
      weeklyBackups: 5
      monthlyBackups: 12
      yearlyBackups: 10
  archive:
    enabled: false
    schedule: "0 0 0 * * *" # Each day at midnight

common:
  extraLabels: {}
  pimMasterDomain: null # Generated with terraform template
  phpConfFPM:
  - name: "PHP_CONF_MAX_EXECUTION_TIME"
    value: "60"
  - name: "PHP_CONF_MAX_INPUT_VARS"
    value: "1000"
  - name: "PHP_CONF_UPLOAD_LIMIT"
    value: "512M"
  - name: "PHP_CONF_MAX_POST_SIZE"
    value: "512M"
  - name: "PHP_CONF_MEMORY_LIMIT"
    value: "512M"
  - name: "PHP_CONF_DISPLAY_ERRORS"
    value: "off"
  - name: "PHP_CONF_ERROR_REPORTING"
    value: "22527" # E_ALL & ~E_DEPRECATED & ~E_STRICT
  - name: "PHP_CONF_DATE_TIMEZONE"
    value: "Etc/UTC"
  - name: "MAGICK_CONFIGURE_PATH"
    value: "/etc/php/8.1/fpm/"

  phpConfCLI:
  - name: "PHP_CONF_MAX_EXECUTION_TIME"
    value: "0"
  - name: "PHP_CONF_MAX_INPUT_VARS"
    value: "1000"
  - name: "PHP_CONF_UPLOAD_LIMIT"
    value: "512M"
  - name: "PHP_CONF_MAX_POST_SIZE"
    value: "512M"
  - name: "PHP_CONF_MEMORY_LIMIT"
    value: "2G"
  - name: "PHP_CONF_DISPLAY_ERRORS"
    value: "off"
  - name: "PHP_CONF_ERROR_REPORTING"
    value: "22527" # E_ALL & ~E_DEPRECATED & ~E_STRICT
  - name: "PHP_CONF_DATE_TIMEZONE"
    value: "Etc/UTC"

mailer:
  login: null # Generated with terraform template
  password: null # Generated with terraform template
  base_mailer_dsn: null # Generated with terraform template

image:
  pim:
    repository: eu.gcr.io/akeneo-cloud/pim-enterprise-dev
    pullPolicy: IfNotPresent
    tag: master
  httpd:
    repository: httpd
    tag: 2.4.51
    pullPolicy: IfNotPresent

pim:
  comm_panel_api_url: null
  logging_level: NOTICE
  hook:
    addAdmin:
      enabled: true
    installPim:
      enabled: true
  storage:
    bucketName: null
    serviceAccountKey: null
  updateStrategy:
    type: RollingUpdate
  # Any changes on the `daemons` configuration and you need to update the
  # `deployments/terraform/helm.tf` script to stop & restart daemons while a
  # migration is running.
  daemons:
    job-consumer-process:
      enabled: true
      pimCommand: "messenger:consume -vv ui_job import_export_job data_maintenance_job --limit=1 --time-limit=3600"
      replicas: 2
      trapped: true
      resources:
        limits:
          memory: "2048Mi"
        requests:
          memory: "300Mi"
          cpu: "5m"
    webhook-consumer-process:
      enabled: true
      pimCommand: "messenger:consume webhook --quiet --time-limit=3600 --memory-limit=384M"
      replicas: 1
      trapped: false
      resources:
        limits:
          memory: "512Mi"
        requests:
          memory: "100Mi"
          cpu: "1m"
  extraLabels: {}
  secret: null # Generate me with `uuidgen`
  web:
    replicas: 2
    fpm:
      resources:
        limits:
          memory: "1024Mi"
        requests:
          cpu: "15m"
          memory: "512Mi"
    httpd:
      resources:
        limits:
          memory: "128Mi"
        requests:
          cpu: "1m"
          memory: "40Mi"
  api:
    ratelimit:
      enabled: true
      average: 100
      burst: 25
    replicas: 2
    fpm:
      resources:
        limits:
          memory: "1024Mi"
        requests:
          cpu: "50m"
          memory: "256Mi"
    httpd:
      resources:
        limits:
          memory: "128Mi"
        requests:
          cpu: "2m"
          memory: "30Mi"
  elasticsearch:
    settings:
      totalFieldsLimit: 50000
      maxChunkSizeCharacters: 100000000
  dqi:
    settings:
      enabled: true
  defaultCatalog: src/Akeneo/Platform/Bundle/InstallerBundle/Resources/fixtures/minimal
  defaultAdminUser:
    login: null # Fill me
    firstName: null # Fill me
    lastName: null # Fill me
    email: null # Fill me
    password: null # Generate me with `pwgen -sB 22`
    uiLocale: en_US # Change me if needed
  jobs:
    versioning-purge:
      enabled: true
      pimCommand: "pim:versioning:purge --more-than-days 90 --no-interaction --force"
      schedule: "0 1 * * 0"
      resources:
        requests:
          cpu: "100m"
          memory: "80Mi"
    batch-purge:
      enabled: true
      pimCommand: "akeneo:batch:purge-job-execution"
      schedule: "0 0 1 * *"
      resources:
        requests:
          cpu: "200m"
          memory: "192Mi"
    update-connectivity-audit-data:
      enabled: true
      pimCommand: "akeneo:connectivity-audit:update-data"
      schedule: "1 * * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    purge-connectivity-connection-error:
      enabled: true
      pimCommand: "akeneo:connectivity-connection:purge-error"
      schedule: "10 * * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    purge-connectivity-audit-error-count:
      enabled: true
      pimCommand: "akeneo:connectivity-audit:purge-error-count"
      schedule: "40 12 * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    rule-run:
      enabled: true
      pimCommand: "akeneo:rule:run"
      schedule: "0 5,11,17,23 * * *"
      resources:
        requests:
          cpu: "800m"
          memory: "400Mi"
    versionning-refresh:
      enabled: true
      pimCommand: "pim:versioning:refresh"
      schedule: "0 3 * * *"
      resources:
        requests:
          cpu: "300m"
          memory: "256Mi"
    volume-aggregate:
      enabled: true
      pimCommand: "pim:volume:aggregate"
      schedule: "0 4 * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "80Mi"
    project-recalculate:
      enabled: true
      pimCommand: "pimee:project:recalculate"
      schedule: "20 0 * * *"
      resources:
        requests:
          cpu: "350m"
          memory: "350Mi"
    project-notify-before-due-date:
      enabled: true
      pimCommand: "pimee:project:notify-before-due-date"
      schedule: "0 2 * * *"
      resources:
        requests:
          cpu: "1m"
          memory: "80Mi"
    reference-entity-refresh-records:
      enabled: true
      pimCommand: "akeneo:reference-entity:refresh-records"
      schedule: "0 23 * * *"
      resources:
        requests:
          cpu: "200m"
          memory: "128Mi"
    asset-manager-refresh-asset:
      enabled: true
      pimCommand: "akeneo:asset-manager:refresh-assets --all"
      schedule: "0 23 * * *"
      resources:
        requests:
          cpu: "200m"
          memory: "128Mi"
    sso-log-rotate:
      enabled: true
      pimCommand: "pimee:sso:rotate-log 30"
      schedule: "5 22 * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    data-quality-insights-periodic-tasks:
      enabled: true
      pimCommand: "pim:data-quality-insights:schedule-periodic-tasks"
      schedule: "15 0 * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    data-quality-insights-prepare-evaluations:
      enabled: true
      pimCommand: "pim:data-quality-insights:prepare-evaluations"
      schedule: "*/10 * * * *"
      resources:
        requests:
          cpu: "120m"
          memory: "50Mi"
    data-quality-insights-evaluations:
      enabled: true
      pimCommand: "pim:data-quality-insights:evaluations"
      schedule: "*/30 * * * *"
      resources:
        requests:
          cpu: "20m"
          memory: "200Mi"
    purge-events-api-logs:
      enabled: true
      pimCommand: "akeneo:connectivity-connection:purge-events-api-logs"
      schedule: "5 * * * *"
      resources:
        limits:
          memory: "128Mi"
        requests:
          cpu: "100m"
          memory: "10Mi"
    reference-entity-migrate-records-index-mapping:
      enabled: true
      pimCommand: "akeneo:reference-entity:migrate-records-index-mapping --no-interaction"
      schedule: "*/30 * * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    connectivity-openid-keys-regenerate:
      enabled: true
      pimCommand: "akeneo:connectivity-connection:openid-keys:create --no-interaction"
      schedule: "4 21 * * 0"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    clean-case-sensitive-attribute-option-spellcheck:
      enabled: true
      pimCommand: "pimee:data-quality-insights:clean-case-sensitive-attribute-option-spellcheck --no-interaction"
      schedule: "15 2 * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    clean-completeness-evaluation-results:
      enabled: true
      pimCommand: "pim:data-quality-insights:clean-completeness-evaluation-results --no-interaction"
      schedule: "30 0 * * *"
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
    zdd-migration-migrate:
      enabled: true
      pimCommand: "pim:zdd-migration:migrate --no-interaction"
      schedule: "45 * * * *"
      resources:
        requests:
          cpu: "350m"
          memory: "350Mi"
    job-automation-push-scheduled-jobs-to-queue:
      enabled: true
      pimCommand: 'pim:job-automation:push-scheduled-jobs-to-queue'
      schedule: "*/10 * * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    supplier-portal-clean-supplier-product-files:
      enabled: true
      pimCommand: 'akeneo:supplier-portal:clean-supplier-product-files'
      schedule: "0 5 * * *"
      resources:
        requests:
          cpu: "100m"
          memory: "100Mi"
  supplier_portal:
    settings:
      enabled: false

# Onboarder
onboarder:
  enabled: false
  hook:
    setupOnboarderDatabase:
      enabled: true
    pushChannelToOnboarder:
      enabled: true
    pushCatalogToOnboarder:
      enabled: false
    importAdditionalOnboarderFixtures:
      enabled: false
    importOnboarderSuppliers:
      enabled: false
  pubsub:
    topicPubMiddleware: null
    topicPubOnboarder: null
    topicCon: null
    queueName: null
    maxReplicas: 10
  serviceAccount: null
  resources:
    requests:
      cpu: "1m"
      memory: "90Mi"

mysql:
  image:
    mysql:
      repository: mysql
      tag: "8.0.30"
  common:
    class: ssd-retain-csi
  mysql:
    dataDiskPath: "/var/lib/mysql/"
    serviceName: pim-mysql
    defaultUser: akeneo_pim
    userPassword: null # Generate me with `pwgen -sB 22`
    rootPassword: null # Generate me with `pwgen -sB 22`
    defaultDatabase: akeneo_pim
    dataDiskSize: 100Gi
    innodbBufferPoolSize: 2048M
    innodbPoolInstances: 8
    stateful:
      enabled: false
    resources:
      limits:
        memory: 3584Mi
      requests:
        memory: 3584Mi
        cpu: "100m"
    readinessProbe:
      initialDelaySeconds: 30
      periodSeconds: 30
      timeoutSeconds: 30
      successThreshold: 1
      failureThreshold: 4
    livenessProbe:
      initialDelaySeconds: 120
      periodSeconds: 60
      timeoutSeconds: 30
      successThreshold: 1
      failureThreshold: 5

elasticsearch:
  appVersion: 8.4.2
  image:
    repository: docker.elastic.co/elasticsearch/elasticsearch
    tag: 8.4.2
  fullnameOverride: elasticsearch
  sysctlInitContainer:
    enabled: false
  cluster:
    name: "pim-es"
    env:
      # See chart config map: https://github.com/helm/charts/blob/master/stable/elasticsearch/templates/configmap.yaml
      # And elasticsearch documentation: https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-gateway.html
      MINIMUM_MASTER_NODES: 2
      EXPECTED_DATA_NODES: 1
      RECOVER_AFTER_DATA_NODES: 1
      XPACK_SECURITY_ENABLED: 0
      cluster.initial_master_nodes: "elasticsearch-master-0"
      discovery.seed_hosts: "elasticsearch-discovery"
  client:
    replicas: 1
    heapSize: "1024m"
    resources:
      limits:
        memory: "1024Mi"
      requests:
        cpu: "20m"
        memory: "1024Mi"
  master:
    replicas: 2
    persistence:
      size: 1Gi
      storageClass: ssd-retain-csi
    heapSize: "384m"
    resources:
      limits:
        memory: "768Mi"
      requests:
        cpu: "15m"
        memory: "768Mi"
    updateStrategy:
      type: RollingUpdate
  data:
    replicas: 2
    persistence:
      size: 10Gi
      storageClass: ssd-retain-csi
    heapSize: "1024m"
    resources:
      limits:
        memory: "1740Mi"
      requests:
        cpu: "40m"
        memory: "1536Mi"
    updateStrategy:
      type: RollingUpdate
    hooks:
      drain:
        enabled: false
  keystore:
    - secretName: pim-secrets
      items:
      - key: srntPimStorageKey
        path: gcs.client.default.credentials_file
  snapshots:
    retention: 15
    repository: pim_gcs_repository
    folder: elasticsearch-snapshots
# Free Trial
free_trial:
  enabled: false
  akeneo_connect_saml_entity_id: null
  akeneo_connect_saml_certificate: null
  akeneo_connect_saml_signin_url: "https://connect.akeneo.com/auth/realms/trial/protocol/saml"
  akeneo_connect_saml_logout_url: "https://connect.akeneo.com/auth/realms/trial/protocol/saml"
  akeneo_connect_saml_sp_client_id: "https://trial-pim.akeneo.com"
  akeneo_connect_saml_sp_certificate_base64: null
  akeneo_connect_saml_sp_private_key_base64: null
  ft_catalog_api_base_uri: "https://ft-catalog.cloud.akeneo.com/"
  ft_catalog_api_client_id: null
  ft_catalog_api_password: null
  ft_catalog_api_secret: null
  ft_catalog_api_username: "freetrialintances_4083"
  akeneo_connect_api_client_id: "portal"
  akeneo_connect_api_client_secret: null
  akeneo_connect_api_client_password: null
  akeneo_connect_api_client_username: "pim-trial@partners.akeneo.com"
  akeneo_connect_api_client_base_uri: "https://connect.akeneo.com/"
  akeneo_portal_api_client_base_uri: "https://portal.akeneo.com/"
  hotjar_id: "2273004"
  google_analytics_account_id: UA-35417741-13
  heap_id: "3348469633"
