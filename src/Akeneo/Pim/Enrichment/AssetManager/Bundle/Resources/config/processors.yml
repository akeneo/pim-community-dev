services:
    pim_connector.processor.normalization.product_with_asset_media:
        class: Akeneo\Pim\Enrichment\AssetManager\Component\Processor\Normalization\EntityWithAssetMediaProcessor
        decorates: pim_connector.processor.normalization.product
        decoration_inner_name: pim_connector.processor.normalization.base.product
        arguments:
            - '@pim_connector.processor.normalization.base.product'
            - '@akeneo_assetmanager.infrastructure.persistence.query.enrich.get_asset_main_media_values_public_api'
            - '@akeneo.pim.structure.query.sql_get_attributes'

    pim_connector.processor.normalization.product_model_with_asset_media:
        class: Akeneo\Pim\Enrichment\AssetManager\Component\Processor\Normalization\EntityWithAssetMediaProcessor
        decorates: pim_connector.processor.normalization.product_model
        decoration_inner_name: pim_connector.processor.normalization.base.product_model
        arguments:
            - '@pim_connector.processor.normalization.base.product_model'
            - '@akeneo_assetmanager.infrastructure.persistence.query.enrich.get_asset_main_media_values_public_api'
            - '@akeneo.pim.structure.query.sql_get_attributes'

    pim_enrich.connector.processor.quick_export.product_with_asset_media:
        class: Akeneo\Pim\Enrichment\AssetManager\Component\Processor\Normalization\EntityWithAssetMediaProcessor
        decorates: pim_enrich.connector.processor.quick_export.product
        decoration_inner_name: pim_enrich.connector.processor.quick_export.base.product
        arguments:
            - '@pim_enrich.connector.processor.quick_export.base.product'
            - '@akeneo_assetmanager.infrastructure.persistence.query.enrich.get_asset_main_media_values_public_api'
            - '@akeneo.pim.structure.query.sql_get_attributes'

    pim_enrich.connector.processor.quick_export.product_model_with_asset_media:
        class: Akeneo\Pim\Enrichment\AssetManager\Component\Processor\Normalization\EntityWithAssetMediaProcessor
        decorates: pim_enrich.connector.processor.quick_export.product_model
        decoration_inner_name: pim_enrich.connector.processor.quick_export.base.product_model
        arguments:
            - '@pim_enrich.connector.processor.quick_export.base.product_model'
            - '@akeneo_assetmanager.infrastructure.persistence.query.enrich.get_asset_main_media_values_public_api'
            - '@akeneo.pim.structure.query.sql_get_attributes'
