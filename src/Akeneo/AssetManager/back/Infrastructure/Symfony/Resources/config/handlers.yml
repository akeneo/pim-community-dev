services:
    # Reference entities
    akeneo_assetmanager.application.asset_family.edit_asset_family_handler:
        class: Akeneo\AssetManager\Application\AssetFamily\EditAssetFamily\EditAssetFamilyHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset_family'
            - '@akeneoassetmanager.infrastructure.persistence.query.get_attribute_identifier'
            - '@akeneo_file_storage.file_storage.file.file_storer'
            - '@akeneo_assetmanager.infrastructure.persistence.query.file_exists'
            - '@Akeneo\AssetManager\Domain\Model\AssetFamily\Transformation\TransformationCollectionFactory'
            - '@Akeneo\AssetManager\Infrastructure\Clock'

    akeneo_assetmanager.application.asset_family.create_asset_family_handler:
        class: Akeneo\AssetManager\Application\AssetFamily\CreateAssetFamily\CreateAssetFamilyHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset_family'

    akeneo_assetmanager.application.asset_family.delete_asset_family_handler:
        class: Akeneo\AssetManager\Application\AssetFamily\DeleteAssetFamily\DeleteAssetFamilyHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset_family'

    akeneo_assetmanager.application.asset_family_permission.can_edit_asset_family_query_handler:
        class: Akeneo\AssetManager\Application\AssetFamilyPermission\CanEditAssetFamily\CanEditAssetFamilyQueryHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset_family_permission'
            - '@akeneoassetmanager.infrastructure.persistence.query.find_user_groups_for_security_identifier'

    akeneo_assetmanager.application.asset_family_permission.set_asset_family_permissions_handler:
        class: Akeneo\AssetManager\Application\AssetFamilyPermission\SetPermissions\SetAssetFamilyPermissionsHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset_family_permission'

    # Attributes
    akeneo_assetmanager.application.attribute.create_attribute_handler:
        class: Akeneo\AssetManager\Application\Attribute\CreateAttribute\CreateAttributeHandler
        arguments:
            - '@akeneo_assetmanager.application.registry.attribute_factory'
            - '@akeneo_assetmanager.infrastructure.persistence.repository.attribute'
            - '@akeneo_assetmanager.infrastructure.persistence.query.find_attribute_next_order'

    akeneo_assetmanager.application.attribute.delete_attribute_handler:
        class: Akeneo\AssetManager\Application\Attribute\DeleteAttribute\DeleteAttributeHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.query.find_asset_family_attribute_as_label'
            - '@akeneo_assetmanager.infrastructure.persistence.query.find_asset_family_attribute_as_main_media'
            - '@akeneo_assetmanager.infrastructure.persistence.repository.attribute'

    akeneo_assetmanager.application.attribute.edit_attribute_handler:
        class: Akeneo\AssetManager\Application\Attribute\EditAttribute\EditAttributeHandler
        arguments:
            - '@akeneo_assetmanager.application.edit_attribute.attribute_updater.attribute_updater_registry'
            - '@akeneo_assetmanager.infrastructure.persistence.repository.attribute'

    # Attribute options
    akeneo_assetmanager.application.attribute.append_attribute_option_handler:
        class: Akeneo\AssetManager\Application\Attribute\AppendAttributeOption\AppendAttributeOptionHandler
        arguments:
            - '@akeneoassetmanager.infrastructure.persistence.query.get_attribute_identifier'
            - '@akeneo_assetmanager.infrastructure.persistence.repository.attribute'

    akeneo_assetmanager.application.attribute.edit_attribute_option_handler:
        class: Akeneo\AssetManager\Application\Attribute\EditAttributeOption\EditAttributeOptionHandler
        arguments:
            - '@akeneoassetmanager.infrastructure.persistence.query.get_attribute_identifier'
            - '@akeneo_assetmanager.infrastructure.persistence.repository.attribute'

    # Assets
    akeneo_assetmanager.application.asset.create_asset_handler:
        class: Akeneo\AssetManager\Application\Asset\CreateAsset\CreateAssetHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset'
            - '@akeneo_assetmanager.infrastructure.persistence.query.find_asset_family_attribute_as_label'

    akeneo_assetmanager.application.asset.edit_asset_handler:
            class: Akeneo\AssetManager\Application\Asset\EditAsset\EditAssetHandler
            arguments:
                - '@akeneo_assetmanager.application.registry.edit_asset.asset_value_updater.asset_value_updater_registry'
                - '@akeneo_assetmanager.infrastructure.persistence.repository.asset'
                - '@akeneo_file_storage.file_storage.file.file_storer'

    akeneo_assetmanager.application.asset.delete_assets_handler:
        class: Akeneo\AssetManager\Application\Asset\DeleteAssets\DeleteAssetsHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset'

    akeneo_assetmanager.application.asset.delete_asset_handler:
        class: Akeneo\AssetManager\Application\Asset\DeleteAsset\DeleteAssetHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset'

    akeneo_assetmanager.application.asset.search_asset:
        class: Akeneo\AssetManager\Application\Asset\SearchAsset\SearchAsset
        arguments:
            - '@akeneo_assetmanager.infrastructure.search.elasticsearch.asset.query.find_identifiers_for_query'
            - '@akeneo_assetmanager.infrastructure.persistence.query.find_asset_items_for_identifiers_and_query'
            - '@akeneo_assetmanager.infrastructure.search.elasticsearch.asset.query.count_assets'

    akeneo_assetmanager.application.asset.search_connector_asset:
        class: Akeneo\AssetManager\Application\Asset\SearchAsset\SearchConnectorAsset
        arguments:
            - '@akeneo_assetmanager.infrastructure.search.elasticsearch.asset.query.find_identifiers_for_query'
            - '@akeneo_assetmanager.infrastructure.persistence.query.find_connector_assets_by_identifiers'

    akeneo_assetmanager.application.asset.index_assets_handler:
        class: Akeneo\AssetManager\Application\Asset\IndexAssets\IndexAssetsByAssetFamilyHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.search.elasticsearch.asset_indexer'

    akeneo_assetmanager.application.asset.link_assets.link_assets_handler:
        class: Akeneo\AssetManager\Application\Asset\LinkAssets\LinkAssetsHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset_family'
            - '@akeneo_assetmanager.infrastructure.job.product_link_rule_launcher'

    akeneo_assetmanager.application.asset.link_assets.link_asset_handler:
        class: Akeneo\AssetManager\Application\Asset\LinkAssets\LinkAssetHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset_family'
            - '@akeneo_assetmanager.infrastructure.job.product_link_rule_launcher'

    akeneo_assetmanager.application.asset.mass_delete.mass_delete_assets_handler:
        class: Akeneo\AssetManager\Application\Asset\MassDeleteAssets\MassDeleteAssetsHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.job.mass_delete_launcher'

    Akeneo\AssetManager\Application\Asset\LinkAssets\LinkAllAssetFamilyAssetsHandler:
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset_family'
            - '@akeneo_assetmanager.infrastructure.job.product_link_rule_launcher'

    akeneo_assetmanager.application.asset.execute_asset_family_naming_convention.handler:
        class: Akeneo\AssetManager\Application\Asset\ExecuteNamingConvention\ExecuteAssetFamilyNamingConventionHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset_family'
            - '@akeneo_assetmanager.infrastructure.job.naming_convention_launcher'

    akeneo_assetmanager.application.asset.compute_transformations_from_asset_identifiers.handler:
        class: Akeneo\AssetManager\Application\Asset\ComputeTransformationsAssets\ComputeTransformationsFromAssetIdentifiersHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.job.compute_transformations_from_asset_identifiers_launcher'

    akeneo_assetmanager.application.asset.compute_transformations_from_asset_family_identifier.handler:
        class: Akeneo\AssetManager\Application\Asset\ComputeTransformationsAssets\ComputeTransformationsFromAssetFamilyIdentifierHandler
        arguments:
            - '@akeneo_assetmanager.infrastructure.job.compute_transformations_from_asset_family_identifier_launcher'
