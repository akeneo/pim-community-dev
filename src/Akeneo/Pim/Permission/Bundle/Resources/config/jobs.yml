parameters:
    pimee_enrich.job_name.add_product_value_with_permission: 'add_product_value_with_permission'
    pimee_enrich.job_name.add_product_value_with_permission_and_rules: 'add_product_value_with_permission_and_rules'
    pimee_enrich.job_name.update_product_value_with_permission: 'update_product_value_with_permission'
    pimee_enrich.job_name.update_product_value_with_permission_and_rules: 'update_product_value_with_permission_and_rules'
    pimee_enrich.job_name.remove_product_value_with_permission: 'remove_product_value_with_permission'
    pimee_enrich.job_name.remove_product_value_with_permission_and_rules: 'remove_product_value_with_permission_and_rules'
    pimee_enrich.job_name.edit_common_attributes_with_permission: 'edit_common_attributes_with_permission'
    pimee_enrich.job_name.edit_common_attributes_with_permission_and_rules: 'edit_common_attributes_with_permission_and_rules'

services:
    # Mass Edit -------------------------------------------------------------------------------------------------------
    pim_enrich.job.add_product_value:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - '%pim_enrich.job.name.add_product_value%'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pimee_enrich.step.add_product_value_with_permission.perform'
                - '@pimee_enrich.step.execute_rules'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_enrich.connector_name.mass_edit%', type: '%pim_enrich.job.mass_edit_type%' }

    pim_enrich.job.update_product_value:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - '%pim_enrich.job.name.update_product_value%'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pimee_enrich.step.update_product_value_with_permission.perform'
                - '@pimee_enrich.step.execute_rules'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_enrich.connector_name.mass_edit%', type: '%pim_enrich.job.mass_edit_type%' }

    pim_enrich.job.remove_product_value:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - '%pim_enrich.job.name.remove_product_value%'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pimee_enrich.step.remove_product_value_with_permission.perform'
                - '@pimee_enrich.step.execute_rules'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_enrich.connector_name.mass_edit%', type: '%pim_enrich.job.mass_edit_type%' }

    pim_enrich.job.add_to_category:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - '%pim_enrich.job.name.add_to_category%'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pimee_enrich.step.add_to_category_with_permission.perform'
                - '@pimee_enrich.step.execute_rules'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_enrich.connector_name.mass_edit%', type: '%pim_enrich.job.mass_edit_type%' }

    pim_enrich.job.move_to_category:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - '%pim_enrich.job.name.move_to_category%'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pimee_enrich.step.move_to_category_with_permission.perform'
                - '@pimee_enrich.step.execute_rules'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_enrich.connector_name.mass_edit%', type: '%pim_enrich.job.mass_edit_type%' }

    pim_enrich.job.remove_from_category:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - '%pim_enrich.job.name.remove_from_category%'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pimee_enrich.step.remove_from_category_with_permission.perform'
                - '@pimee_enrich.step.execute_rules'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_enrich.connector_name.mass_edit%', type: '%pim_enrich.job.mass_edit_type%' }

    pim_enrich.job.edit_common_attributes:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - '%pim_enrich.job.name.edit_common_attributes%'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pimee_enrich.step.edit_common_attributes_with_permission.perform'
                - '@pim_enrich.step.clean'
                - '@pimee_enrich.step.execute_rules'
                - '@pimee_workflow.step.mass_edit.send_for_approval'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_enrich.connector_name.mass_edit%', type: '%pim_enrich.job.mass_edit_type%' }

    pim_enrich.job.add_attribute_value:
         class: '%pim_connector.job.simple_job.class%'
         arguments:
            - '%pim_enrich.job.name.add_attribute_value%'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pimee_enrich.step.add_attribute_value.mass_edit.perform'
                - '@pimee_enrich.step.execute_rules'
                - '@pimee_workflow.step.mass_edit.send_for_approval'
            - true
         tags:
             - { name: akeneo_batch.job, connector: '%pim_enrich.connector_name.mass_edit%', type: '%pim_enrich.job.mass_edit_type%' }

    pim_connector.tasklet.mass_edit_family.compute_completeness_of_family_products:
        class: 'Akeneo\Pim\Enrichment\Component\Product\Connector\Job\ComputeCompletenessOfFamilyProductsTasklet'
        arguments:
            - '@pim_catalog.query.product_identifier_query_builder_factory'
            - '@pim_enrich.connector.reader.mass_edit.family'
            - '@pim_connector.doctrine.cache_clearer'
            - '@akeneo_batch.job_repository'
            - '@pim_catalog.completeness.calculator'
            - '@akeneo.pim.enrichment.product.query.save_product_completenesses'

    pim_catalog.tasklet.compute_family_variant_structure_changes:
        class: '%pim_catalog.tasklet.compute_family_variant_structure_changes.class%'
        arguments:
            - '@pim_catalog.repository.family_variant'
            - '@pim_catalog.query.product_and_product_model_query_builder_factory.without_permission'
            - '@pim_catalog.saver.product_without_permission'
            - '@pim_catalog.saver.product_model_without_permission'
            - '@pim_catalog.entity_with_family_variant.keep_only_values_for_variation'
            - '@validator'
            - '@event_dispatcher'
            - '%pim_job_product_batch_size%'
        public: false
