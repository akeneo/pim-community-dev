apiVersion: v1
kind: PersistentVolume
metadata:
  name: "pv-{{ .Release.Name }}-es-single"
spec:
  accessModes:
  - ReadWriteOnce
  capacity:
    storage: "{{ .Values.single.persistentDisk.size }}"
  gcePersistentDisk:
    pdName: "{{ .Values.single.persistentDisk.name }}"
  persistentVolumeReclaimPolicy: Retain
  storageClassName: ssd-retain-csi
  claimRef:
    apiVersion: v1
    kind: PersistentVolumeClaim
    name: "pvc-{{ .Release.Name }}-es-single"
    namespace: "{{ $.Release.Namespace }}"
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: "pvc-{{ .Release.Name }}-es-single"
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: "{{ .Values.single.persistentDisk.size }}"
  storageClassName: ssd-retain-csi
