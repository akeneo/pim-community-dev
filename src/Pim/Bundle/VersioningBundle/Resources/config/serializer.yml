services:
    pim_versioning.serializer:
        class: %pim_serializer.class%

    # Normalizers
    pim_versioning.normalizer.flat_product:
        public: false
        class: %pim_serializer.normalizer.flat_product.class%
        arguments:
            - '@pim_catalog.manager.media'
        calls:
            - [setFilters, [['@pim_versioning.filter.flat_product_value']]]
        tags:
            - { name: pim_versioning.normalizer, priority: 90 }

    pim_versioning.normalizer.flat_category:
        class: %pim_serializer.normalizer.flat_category.class%
        arguments:
            - '@pim_versioning.normalizer.flat_label_translation'
        tags:
            - { name: pim_versioning.normalizer, priority: 90 }

    pim_versioning.normalizer.flat_attribute:
        class: %pim_serializer.normalizer.flat_attribute.class%
        arguments:
            - '@pim_versioning.normalizer.flat_label_translation'
        tags:
            - { name: pim_versioning.normalizer, priority: 90 }

    pim_versioning.normalizer.flat_attribute_option:
        class: %pim_serializer.normalizer.flat_attribute_option.class%
        tags:
            - { name: pim_versioning.normalizer, priority: 90 }

    pim_versioning.normalizer.flat_family:
        class: %pim_serializer.normalizer.flat_family.class%
        arguments:
            - '@pim_versioning.normalizer.flat_label_translation'
        tags:
            - { name: pim_versioning.normalizer, priority: 90 }

    pim_versioning.normalizer.flat_attribute_group:
        class: %pim_serializer.normalizer.flat_attribute_group.class%
        arguments:
            - '@pim_versioning.normalizer.flat_label_translation'
        tags:
            - { name: pim_versioning.normalizer, priority: 90 }

    pim_versioning.normalizer.flat_association_type:
        class: %pim_serializer.normalizer.flat_association_type.class%
        arguments:
            - '@pim_versioning.normalizer.flat_label_translation'
        tags:
            - { name: pim_versioning.normalizer, priority: 90 }

    pim_versioning.normalizer.flat_group:
        class: %pim_serializer.normalizer.flat_group.class%
        arguments:
            - '@pim_versioning.normalizer.flat_label_translation'
        tags:
            - { name: pim_versioning.normalizer, priority: 90 }

    pim_versioning.normalizer.flat_job_instance:
        class: %pim_serializer.normalizer.flat_job_instance.class%
        tags:
            - { name: pim_versioning.normalizer, priority: 90  }

    pim_versioning.normalizer.flat_channel:
        class: %pim_serializer.normalizer.flat_channel.class%
        tags:
            - { name: pim_versioning.normalizer, priority: 90 }

    pim_versioning.normalizer.label_translation:
        class: %pim_serializer.normalizer.label_translation.class%
        tags:
            - { name: pim_versioning.normalizer, priority: 90 }

    pim_versioning.normalizer.flat_label_translation:
        class: %pim_serializer.normalizer.flat_label_translation.class%
        parent: pim_versioning.normalizer.label_translation
        tags:
            - { name: pim_versioning.normalizer, priority: 90 }

    # Filters
    pim_versioning.filter.product_value:
        class: %pim_serializer.filter.product_value.class%

    pim_versioning.filter.flat_product_value:
        class: %pim_serializer.filter.flat_product_value.class%
