parameters:
    pimee_api.normalizer.product.class: PimEnterprise\Component\Api\Normalizer\ProductNormalizer
    pimee_api.normalizer.product_model.class: PimEnterprise\Component\Api\Normalizer\ProductModelNormalizer
    pimee_api.normalizer.published_product.class: PimEnterprise\Component\Api\Normalizer\PublishedProductNormalizer
    pimee_api.component.normalizer.asset_reference.class: PimEnterprise\Component\Api\Normalizer\AssetReferenceNormalizer
    pimee_api.component.normalizer.asset_variation.class: PimEnterprise\Component\Api\Normalizer\AssetVariationNormalizer
    pimee_api.bundle.normalizer.asset_reference.class: PimEnterprise\Bundle\ApiBundle\Normalizer\AssetReferenceNormalizer
    pimee_api.bundle.normalizer.asset_variation.class: PimEnterprise\Bundle\ApiBundle\Normalizer\AssetVariationNormalizer
    pimee_api.bundle.normalizer.asset.class: PimEnterprise\Bundle\ApiBundle\Normalizer\AssetNormalizer

services:
    pimee_api.normalizer.product:
        class: '%pimee_api.normalizer.product.class%'
        decorates: pim_api.normalizer.product
        decoration_inner_name: pim_api.normalizer.product.community
        arguments:
            - '@pim_api.normalizer.product.community'
            - '@pimee_workflow.repository.product_draft'
            - '@security.authorization_checker'
            - '@security.token_storage'

    pimee_api.normalizer.product_model:
        class: '%pimee_api.normalizer.product_model.class%'
        decorates: pim_api.normalizer.product_model
        decoration_inner_name: pim_api.normalizer.product_model.community
        arguments:
            - '@pim_api.normalizer.product_model.community'
            - '@pimee_workflow.repository.product_model_draft'
            - '@pimee_security.cached_authorization_checker'
            - '@security.token_storage'

    pimee_api.normalizer.published_product:
        class: '%pimee_api.normalizer.published_product.class%'
        arguments:
            - '@pim_api.normalizer.product.community'
        tags:
            - { name: pim_serializer.normalizer, priority: 100 }

    pimee_api.bundle.normalizer.asset_reference:
        class: '%pimee_api.bundle.normalizer.asset_reference.class%'
        arguments:
            - '@pimee_api.component.normalizer.asset_reference'
            - '@router'
        tags:
            - { name: pim_serializer.normalizer, priority: 100 }

    pimee_api.component.normalizer.asset_reference:
        class: '%pimee_api.component.normalizer.asset_reference.class%'

    pimee_api.bundle.normalizer.asset_variation:
        class: '%pimee_api.bundle.normalizer.asset_variation.class%'
        arguments:
            - '@pimee_api.component.normalizer.asset_variation'
            - '@router'
        tags:
            - { name: pim_serializer.normalizer, priority: 100 }

    pimee_api.component.normalizer.asset_variation:
        class: '%pimee_api.component.normalizer.asset_variation.class%'
        arguments:
            - '@pimee_product_asset.normalizer.standard.variation'

    pimee_api.bundle.normalizer.asset:
        class: '%pimee_api.bundle.normalizer.asset.class%'
        arguments:
            - '@pimee_product_asset.normalizer.standard.asset'
            - '@pimee_api.bundle.normalizer.asset_variation'
            - '@pimee_api.bundle.normalizer.asset_reference'
            - '@router'
        tags:
            - { name: pim_serializer.normalizer, priority: 100 }
