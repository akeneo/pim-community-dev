PimEnterprise\Component\Workflow\Model\ProductDraft:
    type: document
    collection: pimee_workflow_product_draft
    changeTrackingPolicy: DEFERRED_EXPLICIT
    repositoryClass: PimEnterprise\Bundle\WorkflowBundle\Doctrine\MongoDBODM\ProductDraftRepository
    fields:
        id:
            id: true
            generator: { strategy: AUTO }
        createdAt:
            type: date
            column: created_at
        changes:
            type: hash
        product:
            reference: true
            type: one
            targetDocument: Pim\Component\Catalog\Model\ProductInterface
        author:
            type: string
        # Denormalize product's category ids stored for checking product ownership
        categoryIds:
            type: collection
        status:
            type: int
    indexes:
        unique_idx:
            keys:
                author: asc
                product: asc
            options:
                unique: true
                dropDups: true
                safe: true
