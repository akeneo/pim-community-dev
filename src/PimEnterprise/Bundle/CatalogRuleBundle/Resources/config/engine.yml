parameters:
    pimee_catalog_rule.applier.product.class:             PimEnterprise\Bundle\CatalogRuleBundle\Engine\ProductRuleApplier
    pimee_catalog_rule.applier.product.updater.class:     PimEnterprise\Bundle\CatalogRuleBundle\Engine\ProductRuleApplier\ProductsUpdater
    pimee_catalog_rule.applier.product.validator.class:   PimEnterprise\Bundle\CatalogRuleBundle\Engine\ProductRuleApplier\ProductsValidator
    pimee_catalog_rule.applier.product.saver.class:       PimEnterprise\Bundle\CatalogRuleBundle\Engine\ProductRuleApplier\ProductsSaver
    pimee_catalog_rule.builder.product.class:             PimEnterprise\Bundle\CatalogRuleBundle\Engine\ProductRuleBuilder
    pimee_catalog_rule.selector.product.class:            PimEnterprise\Bundle\CatalogRuleBundle\Engine\ProductRuleSelector
    pimee_catalog_rule.paginator.paginator_factory.class: Akeneo\Component\StorageUtils\Cursor\PaginatorFactory
    pimee_catalog_rule.paginator.class:                   Akeneo\Component\StorageUtils\Cursor\Paginator

services:
    pimee_catalog_rule.product.paginator:
        class: %pimee_catalog_rule.paginator.paginator_factory.class%
        arguments:
            - %pimee_catalog_rule.paginator.class%
            - %pimee_catalog_rule.paginator.page_size%

    pimee_catalog_rule.builder.product:
        class: %pimee_catalog_rule.builder.product.class%
        arguments:
            - '@pimee_catalog_rule.denormalizer.product_rule.chained'
            - '@event_dispatcher'
            - '@validator'
            - %akeneo_rule_engine.model.rule.class%

    pimee_catalog_rule.selector.product:
        class: %pimee_catalog_rule.selector.product.class%
        arguments:
            - '@pim_catalog.query.product_query_builder_factory'
            - '@pim_catalog.repository.product'
            - '@event_dispatcher'
            - %akeneo_rule_engine.model.rule_subject_set.class%

    pimee_catalog_rule.applier.product:
        class: %pimee_catalog_rule.applier.product.class%
        arguments:
            - '@pimee_catalog_rule.product.paginator'
            - '@pimee_catalog_rule.applier.product.updater'
            - '@pimee_catalog_rule.applier.product.validator'
            - '@pimee_catalog_rule.applier.product.saver'
            - '@event_dispatcher'
            - '@akeneo_storage_utils.doctrine.object_detacher'

    pimee_catalog_rule.applier.product.updater:
        class: %pimee_catalog_rule.applier.product.updater.class%
        arguments:
            - '@pim_catalog.updater.product_property_setter'
            - '@pim_catalog.updater.product_property_copier'
            - '@pim_catalog.updater.product_template'

    pimee_catalog_rule.applier.product.validator:
        class: %pimee_catalog_rule.applier.product.validator.class%
        arguments:
            - '@pim_catalog.validator.product'
            - '@event_dispatcher'
            - '@akeneo_storage_utils.doctrine.object_detacher'

    pimee_catalog_rule.applier.product.saver:
        class: %pimee_catalog_rule.applier.product.saver.class%
        arguments:
            - '@pim_catalog.saver.product'
            - '@pim_versioning.manager.version'
            - '@pim_versioning.context.version'
            - '@translator'
