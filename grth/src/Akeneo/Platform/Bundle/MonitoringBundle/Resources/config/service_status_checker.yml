services:
    Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\MysqlChecker:
        class: 'Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\MysqlChecker'
        arguments:
            - '@database_connection'
            - '@logger'

    akeneo_monitoring.status_checker.pub_sub:
        class: 'Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\PubSub\PubSubStatusChecker'
        arguments:
            - '@Akeneo\Tool\Bundle\MessengerBundle\Transport\GooglePubSub\PubSubClientFactory'
            - '%env(GOOGLE_CLOUD_PROJECT)%'
            - '%env(PUBSUB_TOPIC_BUSINESS_EVENT)%'
            - '%env(PUBSUB_SUBSCRIPTION_WEBHOOK)%'
            - '@logger'


    Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\ElasticsearchChecker:
        class: 'Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\ElasticsearchChecker'
        arguments:
            - '@akeneo_elasticsearch.registry.clients'
            - '@logger'

    Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\FileStorageChecker:
        class: 'Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\FileStorageChecker'
        arguments:
            - '@akeneo_file_storage.file_storage.filesystem_provider'
            - '@logger'

    Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\SmtpChecker:
        class: 'Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\SmtpChecker'
        arguments:
            - '@mailer.transport_factory.smtp'
            - '%env(MAILER_DSN)'
            - '@logger'

    Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\Controller:
        public: true
        class: 'Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\Controller'
        arguments:
            - '@Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\MysqlChecker'
            - '@Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\ElasticsearchChecker'
            - '@Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\FileStorageChecker'
            - '@Akeneo\Platform\Bundle\MonitoringBundle\ServiceStatusChecker\SmtpChecker'
            - '@akeneo_monitoring.status_checker.pub_sub'
            - '@logger'
            - '%monitoring_authentication_token%'
