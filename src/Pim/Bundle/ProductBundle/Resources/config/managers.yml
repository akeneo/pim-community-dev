services:
    # Managers
    pim_product.manager.product:
        class: %pim_product.manager.product.class%
        arguments:
            - %pim_product.entity.product.class%
            - %oro_flexibleentity.flexible_config%
            - @doctrine.orm.entity_manager
            - @event_dispatcher
            - @oro_flexibleentity.attributetype.factory
            - @pim_product.manager.media
        tags:
            - { name: oro_flexibleentity_manager, entity: %pim_product.entity.product.class%}
        calls:
            - [ addAttributeType, ['pim_product_identifier'] ]
            - [ addAttributeType, ['pim_product_text'] ]
            - [ addAttributeType, ['pim_product_textarea'] ]
            - [ addAttributeType, ['pim_product_number'] ]
            - [ addAttributeType, ['pim_product_price_collection'] ]
            - [ addAttributeType, ['pim_product_multiselect'] ]
            - [ addAttributeType, ['pim_product_simpleselect'] ]
            - [ addAttributeType, ['pim_product_file'] ]
            - [ addAttributeType, ['pim_product_image'] ]
            - [ addAttributeType, ['pim_product_boolean'] ]
            - [ addAttributeType, ['pim_product_date'] ]
            - [ addAttributeType, ['pim_product_metric'] ]

    pim_product.manager.audit:
        class: %pim_product.manager.audit.class%
        arguments:
            - @doctrine.orm.entity_manager

    pim_product.manager.category:
        class:     %pim_product.manager.category.class%
        arguments: [@doctrine.orm.entity_manager, %pim_product.entity.category.class%]

    pim_product.manager.media:
        class:     %pim_product.manager.media.class%
        arguments: [@knp_gaufrette.filesystem_map, "pim", %upload_dir%]

    pim_product.manager.attribute_type:
        class:     %pim_product.manager.attribute_type.class%
        arguments: [@pim_product.manager.product, @pim_config.manager.locale, @oro_flexibleentity.attributetype.factory]

