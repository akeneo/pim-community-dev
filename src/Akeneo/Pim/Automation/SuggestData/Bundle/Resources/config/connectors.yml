parameters:
    pimee_suggest_data.connector_name.suggest_data: 'suggest_data'
    pimee_suggest_data.job.suggest_data_type: 'suggest_data_push_products'
    pimee_suggest_data.job_name.suggest_data: 'suggest_data_push_products'

services:
    pimee_suggest_data.job.suggest_data:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - '%pimee_suggest_data.job_name.suggest_data%'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pimee_suggest_data.step.suggest_data'
        tags:
            -
                name: akeneo_batch.job
                connector: '%pimee_suggest_data.connector_name.suggest_data%'
                type: '%pim_enrich.job.mass_edit_type%'

    # Could be moved into a Tasklet later if processor is not used.
    pimee_suggest_data.step.suggest_data:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'perform'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_enrich.reader.database.products_and_variant_products_of_product_models'
            - '@pimee_suggest_data.processor.normalization.push_products'
            - '@pimee_suggest_data.writer.push_products'

    # This processor does nothing else but returns what it receives from reader.
    pimee_suggest_data.processor.normalization.push_products:
        class: Akeneo\Pim\Automation\SuggestData\Component\Connector\Processor\Normalization\PushProductProcessor

    pimee_suggest_data.writer.push_products:
        class: Akeneo\Pim\Automation\SuggestData\Component\Connector\Writer\PushProductsWriter
        arguments:
            - '@pimee_suggest_data.data_provider.factory'
            - 10

    pimee_suggest_data.job.job_parameters.default_values_provider.push_products:
        class: '%pim_enrich.connector.job.job_parameters.default_values_provider.product_mass_edit.class%'
        arguments:
            -
                - '%pimee_suggest_data.job_name.suggest_data%'
        tags:
            - { name: akeneo_batch.job.job_parameters.default_values_provider }

    pimee_suggest_data.job_parameters.constraints.push_products:
        class: '%pim_enrich.connector.job.job_parameters.constraint_collection_provider.product_mass_edit.class%'
        arguments:
            -
                - '%pimee_suggest_data.job_name.suggest_data%'
        tags:
            - { name: akeneo_batch.job.job_parameters.constraint_collection_provider }
