services:
    # Jobs
    pim_table_attribute.job.csv_option_export:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'csv_table_attribute_options_export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_table_attribute.step.csv_option_export'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.csv%', type: '%pim_connector.job.export_type%' }

    pim_table_attribute.job.xlsx_option_export:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'xlsx_table_attribute_options_export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_table_attribute.step.xlsx_option_export'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.xlsx%', type: '%pim_connector.job.export_type%' }

    pim_table_attribute.job.csv_product_table_values_export:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'csv_product_table_values_export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_table_attribute.step.csv_product_table_values_export'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.csv%', type: '%pim_connector.job.export_type%' }

    pim_table_attribute.job.xlsx_product_table_values_export:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'xlsx_product_table_values_export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_table_attribute.step.xlsx_product_table_values_export'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.xlsx%', type: '%pim_connector.job.export_type%' }

    pim_table_attribute.job.csv_product_model_table_values_export:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'csv_product_model_table_values_export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_table_attribute.step.csv_product_model_table_values_export'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.csv%', type: '%pim_connector.job.export_type%' }

    pim_table_attribute.job.xlsx_product_model_table_values_export:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'xlsx_product_model_table_values_export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_table_attribute.step.xlsx_product_model_table_values_export'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.xlsx%', type: '%pim_connector.job.export_type%' }

    pim_table_attribute.job.csv_option_import:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'csv_table_attribute_options_import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_connector.step.charset_validator'
                - '@pim_table_attribute.step.csv_option_import'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.csv%', type: '%pim_connector.job.import_type%' }

    pim_table_attribute.job.xlsx_option_import:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'xlsx_table_attribute_options_import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_connector.step.charset_validator'
                - '@pim_table_attribute.step.xlsx_option_import'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.xlsx%', type: '%pim_connector.job.import_type%' }

    pim_table_attribute.job.csv_product_table_values_import:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'csv_product_table_values_import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_connector.step.charset_validator'
                - '@pim_table_attribute.step.csv_product_table_values_import'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.csv%', type: '%pim_connector.job.import_type%' }

    pim_table_attribute.job.xlsx_product_table_values_import:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'xlsx_product_table_values_import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_connector.step.charset_validator'
                - '@pim_table_attribute.step.xlsx_product_table_values_import'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.xlsx%', type: '%pim_connector.job.import_type%' }

    pim_table_attribute.job.csv_product_model_table_values_import:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'csv_product_model_table_values_import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_connector.step.charset_validator'
                - '@pim_table_attribute.step.csv_product_model_table_values_import'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.csv%', type: '%pim_connector.job.import_type%' }

    pim_table_attribute.job.xlsx_product_model_table_values_import:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'xlsx_product_model_table_values_import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_connector.step.charset_validator'
                - '@pim_table_attribute.step.xlsx_product_model_table_values_import'
            - true
        tags:
            - { name: akeneo_batch.job, connector: '%pim_connector.connector_name.xlsx%', type: '%pim_connector.job.import_type%' }

    pim_table_attribute.job.clean_table_values_following_deleted_options:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'clean_table_values_following_deleted_options'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_table_attribute.step.clean_table_values_following_deleted_options'
        public: false
        tags:
            -   name: akeneo_batch.job
                connector: 'internal'
                type: 'clean_table_values_following_deleted_options'
            -   name: akeneo_batch.job.not_visible

    pim_table_attribute.job.compute_completeness_following_table_update:
        class: '%pim_connector.job.simple_job.class%'
        arguments:
            - 'compute_completeness_following_table_update'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            -
                - '@pim_table_attribute.step.compute_completeness_following_table_update'
        public: false
        tags:
            - name: akeneo_batch.job
              connector: 'internal'
              type: 'compute_completeness_following_table_update'
            - name: akeneo_batch.job.not_visible

    # Steps
    pim_table_attribute.step.csv_option_export:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\Reader\Database\SelectOptionDetailsReader'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\Processor\Normalization\SelectOptionDetailsProcessor'
            - '@pim_table_attribute.writer.select_option.file.csv'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.xlsx_option_export:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\Reader\Database\SelectOptionDetailsReader'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\Processor\Normalization\SelectOptionDetailsProcessor'
            - '@pim_table_attribute.writer.select_option.file.xlsx'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.csv_product_table_values_export:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_table_attribute.reader.database.product.table_values'
            - '@pim_table_attribute.processor.normalization.product_table_values'
            - '@pim_table_attribute.writer.table_values_with_label.file.csv'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.xlsx_product_table_values_export:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_table_attribute.reader.database.product.table_values'
            - '@pim_table_attribute.processor.normalization.product_table_values'
            - '@pim_table_attribute.writer.table_values_with_label.file.xlsx'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.csv_product_model_table_values_export:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_table_attribute.reader.database.product_model.table_values'
            - '@pim_table_attribute.processor.normalization.product_model_table_values'
            - '@pim_table_attribute.writer.table_values_with_label.file.csv'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.xlsx_product_model_table_values_export:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'export'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_table_attribute.reader.database.product_model.table_values'
            - '@pim_table_attribute.processor.normalization.product_model_table_values'
            - '@pim_table_attribute.writer.table_values_with_label.file.xlsx'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.csv_option_import:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_table_attribute.reader.file.csv_table_option'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\Processor\Denormalization\SelectOptionDetailsProcessor'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\Writer\Database\SelectOption'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.xlsx_option_import:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_table_attribute.reader.file.xlsx_table_option'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\Processor\Denormalization\SelectOptionDetailsProcessor'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\Writer\Database\SelectOption'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.csv_product_table_values_import:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_table_attribute.reader.file.csv.product.table_values'
            - '@pim_table_attribute.processor.denormalization.product_table_values'
            - '@pim_table_attribute.writer.product_table_values.file.database'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.xlsx_product_table_values_import:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_table_attribute.reader.file.xlsx.product.table_values'
            - '@pim_table_attribute.processor.denormalization.product_table_values'
            - '@pim_table_attribute.writer.product_table_values.file.database'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.csv_product_model_table_values_import:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_table_attribute.reader.file.csv.product_model.table_values'
            - '@pim_table_attribute.processor.denormalization.product_model_table_values'
            - '@pim_table_attribute.writer.product_model_table_values.file.database'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.xlsx_product_model_table_values_import:
        class: '%pim_connector.step.item_step.class%'
        arguments:
            - 'import'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@pim_table_attribute.reader.file.xlsx.product_model.table_values'
            - '@pim_table_attribute.processor.denormalization.product_model_table_values'
            - '@pim_table_attribute.writer.product_model_table_values.file.database'
            - 1000
            - '@akeneo_batch.job.job_stopper'

    pim_table_attribute.step.clean_table_values_following_deleted_options:
        class: '%pim_connector.step.tasklet.class%'
        arguments:
            - 'clean'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\Tasklet\CleanTableValuesWithDeletedOptionsTasklet'

    pim_table_attribute.step.compute_completeness_following_table_update:
        class: '%pim_connector.step.tasklet.class%'
        arguments:
            - 'compute_completeness_following_table_update'
            - '@event_dispatcher'
            - '@akeneo_batch.job_repository'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\Tasklet\ComputeCompletenessOfTableAttributeProductsTasklet'

    # readers
    Akeneo\Pim\TableAttribute\Infrastructure\Connector\Reader\Database\SelectOptionDetailsReader:
        arguments:
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Query\CountSelectOptions'
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Query\GetSelectOptionDetails'

    pim_table_attribute.reader.file.csv_table_option:
        class: 'Akeneo\Tool\Component\Connector\Reader\File\Csv\Reader'
        arguments:
            - '@pim_connector.reader.file.csv_iterator_factory'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\ArrayConverter\FlatToStandard\SelectOptionDetails'

    pim_table_attribute.reader.file.xlsx_table_option:
        class: 'Akeneo\Tool\Component\Connector\Reader\File\Xlsx\Reader'
        arguments:
            - '@pim_connector.reader.file.xlsx_iterator_factory'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\ArrayConverter\FlatToStandard\SelectOptionDetails'

    pim_table_attribute.reader.database.product.table_values:
        class: Akeneo\Pim\TableAttribute\Infrastructure\Connector\Reader\Database\TableValuesReader
        arguments:
            - '@pim_catalog.query.product_query_builder_factory'

    pim_table_attribute.reader.database.product_model.table_values:
        class: Akeneo\Pim\TableAttribute\Infrastructure\Connector\Reader\Database\TableValuesReader
        arguments:
            - '@pim_catalog.query.product_model_query_builder_factory'

    Akeneo\Pim\TableAttribute\Infrastructure\Connector\ArrayConverter\FlatToStandard\SelectOptionDetails:
        arguments:
            - '@pim_connector.array_convertor.checker.fields_requirement'

    pim_table_attribute.reader.file.csv.product.table_values:
        class: 'Akeneo\Tool\Component\Connector\Reader\File\Csv\Reader'
        arguments:
            - '@pim_connector.reader.file.csv_iterator_factory'
            - '@pim_table_attribute.array_convertor.flat_to_standard.product_table_values'

    pim_table_attribute.reader.file.xlsx.product.table_values:
        class: 'Akeneo\Tool\Component\Connector\Reader\File\Xlsx\Reader'
        arguments:
            - '@pim_connector.reader.file.xlsx_iterator_factory'
            - '@pim_table_attribute.array_convertor.flat_to_standard.product_table_values'

    pim_table_attribute.reader.file.csv.product_model.table_values:
        class: 'Akeneo\Tool\Component\Connector\Reader\File\Csv\Reader'
        arguments:
            - '@pim_connector.reader.file.csv_iterator_factory'
            - '@pim_table_attribute.array_convertor.flat_to_standard.product_model_table_values'

    pim_table_attribute.reader.file.xlsx.product_model.table_values:
        class: 'Akeneo\Tool\Component\Connector\Reader\File\Xlsx\Reader'
        arguments:
            - '@pim_connector.reader.file.xlsx_iterator_factory'
            - '@pim_table_attribute.array_convertor.flat_to_standard.product_model_table_values'

    pim_table_attribute.array_convertor.flat_to_standard.product_table_values:
        class: Akeneo\Pim\TableAttribute\Infrastructure\Connector\ArrayConverter\FlatToStandard\TableValues
        arguments:
            - '@pim_connector.array_convertor.checker.fields_requirement'
            - '@akeneo.pim.structure.query.get_attributes'
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Repository\TableConfigurationRepository'
            - 'product'

    pim_table_attribute.array_convertor.flat_to_standard.product_model_table_values:
        class: Akeneo\Pim\TableAttribute\Infrastructure\Connector\ArrayConverter\FlatToStandard\TableValues
        arguments:
            - '@pim_connector.array_convertor.checker.fields_requirement'
            - '@akeneo.pim.structure.query.get_attributes'
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Repository\TableConfigurationRepository'
            - 'product_model'

    # processors
    Akeneo\Pim\TableAttribute\Infrastructure\Connector\Processor\Normalization\SelectOptionDetailsProcessor: ~

    Akeneo\Pim\TableAttribute\Infrastructure\Connector\Processor\Denormalization\SelectOptionDetailsProcessor:
        arguments:
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Repository\SelectOptionCollectionRepository'
            - '@validator'
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Query\CountSelectOptions'

    pim_table_attribute.processor.denormalization.product_table_values:
        class: 'Akeneo\Pim\TableAttribute\Infrastructure\Connector\Processor\Denormalization\TableValuesProcessor'
        arguments:
            - '@pim_catalog.repository.product'
            - '@akeneo.pim.structure.query.get_attributes'

    pim_table_attribute.processor.denormalization.product_model_table_values:
        class: 'Akeneo\Pim\TableAttribute\Infrastructure\Connector\Processor\Denormalization\TableValuesProcessor'
        arguments:
            - '@pim_catalog.repository.product_model'
            - '@akeneo.pim.structure.query.get_attributes'

    pim_table_attribute.processor.normalization.product_table_values:
        class: 'Akeneo\Pim\TableAttribute\Infrastructure\Connector\Processor\Normalization\TableValuesProcessor'
        arguments:
            - 'product'

    pim_table_attribute.processor.normalization.product_model_table_values:
        class: 'Akeneo\Pim\TableAttribute\Infrastructure\Connector\Processor\Normalization\TableValuesProcessor'
        arguments:
            - 'product_model'

    # writers
    pim_table_attribute.writer.select_option.file.csv:
        class: Akeneo\Tool\Component\Connector\Writer\File\Csv\Writer
        arguments:
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\ArrayConverter\StandardToFlat\SelectOptionDetails'
            - '@pim_connector.factory.flat_item_buffer'
            - '@pim_table_attribute.writer.file.select_options.flat_item_buffer_flusher'

    pim_table_attribute.writer.select_option.file.xlsx:
        class: Akeneo\Tool\Component\Connector\Writer\File\Xlsx\Writer
        arguments:
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\ArrayConverter\StandardToFlat\SelectOptionDetails'
            - '@pim_connector.factory.flat_item_buffer'
            - '@pim_table_attribute.writer.file.select_options.flat_item_buffer_flusher'

    pim_table_attribute.writer.table_values_with_label.file.csv:
        class: Akeneo\Pim\TableAttribute\Infrastructure\Connector\Writer\File\TableValuesWriter
        arguments:
            - '@pim_table_attribute.writer.table_values.file.csv'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\FlatTranslator\TableValuesTranslator'

    pim_table_attribute.writer.table_values.file.csv:
        class: Akeneo\Tool\Component\Connector\Writer\File\Csv\Writer
        arguments:
            - '@pim_connector.array_converter.dummy'
            - '@pim_connector.factory.flat_item_buffer'
            - '@pim_table_attribute.writer.file.table_values.flat_item_buffer_flusher'

    pim_table_attribute.writer.table_values_with_label.file.xlsx:
        class: Akeneo\Pim\TableAttribute\Infrastructure\Connector\Writer\File\TableValuesWriter
        arguments:
            - '@pim_table_attribute.writer.table_values.file.xlsx'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\FlatTranslator\TableValuesTranslator'

    pim_table_attribute.writer.table_values.file.xlsx:
        class: Akeneo\Tool\Component\Connector\Writer\File\Xlsx\Writer
        arguments:
            - '@pim_connector.array_converter.dummy'
            - '@pim_connector.factory.flat_item_buffer'
            - '@pim_table_attribute.writer.file.table_values.flat_item_buffer_flusher'

    pim_table_attribute.writer.file.select_options.flat_item_buffer_flusher:
        class: '%pim_connector.writer.file.flat_item_buffer_flusher.class%'
        arguments:
            - '@pim_connector.writer.file.default.column_presenter'
            - '@pim_table_attribute.file.select_options.column_sorter'

    pim_table_attribute.writer.file.table_values.flat_item_buffer_flusher:
        class: '%pim_connector.writer.file.flat_item_buffer_flusher.class%'
        arguments:
            - '@pim_connector.writer.file.default.column_presenter'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\Writer\File\TableValuesColumnSorter'

    pim_table_attribute.file.select_options.column_sorter:
        class: '%pim_connector.writer.file.default.column_sorter.class%'
        arguments:
            - '@pim_connector.array_converter.field_splitter'
            - [ 'attribute', 'column', 'code' ]

    Akeneo\Pim\TableAttribute\Infrastructure\Connector\Writer\File\TableValuesColumnSorter:
        arguments:
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Repository\TableConfigurationRepository'
            - '@translator'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Connector\FlatTranslator\TableColumnTranslator'

    Akeneo\Pim\TableAttribute\Infrastructure\Connector\Writer\Database\SelectOption:
        arguments:
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Repository\SelectOptionCollectionRepository'

    pim_table_attribute.writer.product_table_values.file.database:
        class: Akeneo\Pim\TableAttribute\Infrastructure\Connector\Writer\Database\ProductTableValues
        arguments:
            - '@pim_catalog.repository.product'
            - '@pim_catalog.repository.attribute'
            - '@pim_catalog.builder.entity_with_values'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Normalizer\Standard\TableNormalizer'
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Repository\TableConfigurationRepository'
            - '@pim_catalog.validator.product'
            - '@pim_catalog.saver.product'

    pim_table_attribute.writer.product_model_table_values.file.database:
        class: Akeneo\Pim\TableAttribute\Infrastructure\Connector\Writer\Database\ProductTableValues
        arguments:
            - '@pim_catalog.repository.product_model'
            - '@pim_catalog.repository.attribute'
            - '@pim_catalog.builder.entity_with_values'
            - '@Akeneo\Pim\TableAttribute\Infrastructure\Normalizer\Standard\TableNormalizer'
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Repository\TableConfigurationRepository'
            - '@pim_catalog.validator.product_model'
            - '@pim_catalog.saver.product_model'

    # Constraint providers
    pim_table_attribute.job.job_parameters.constraint_collection_provider.simple_csv_export:
        class: 'Akeneo\Tool\Component\Connector\Job\JobParameters\ConstraintCollectionProvider\SimpleCsvExport'
        arguments:
            - ['csv_table_attribute_options_export']
        tags:
            - { name: akeneo_batch.job.job_parameters.constraint_collection_provider }

    pim_table_attribute.job.job_parameters.constraint_collection_provider.simple_xlsx_export:
        class: 'Akeneo\Tool\Component\Connector\Job\JobParameters\ConstraintCollectionProvider\SimpleXlsxExport'
        arguments:
            - ['xlsx_table_attribute_options_export']
        tags:
            - { name: akeneo_batch.job.job_parameters.constraint_collection_provider }

    pim_table_attribute.job.job_parameters.constraint_collection_provider.simple_csv_import:
        class: 'Akeneo\Tool\Component\Connector\Job\JobParameters\ConstraintCollectionProvider\SimpleCsvImport'
        arguments:
            - [ 'csv_table_attribute_options_import', 'csv_product_table_values_import', 'csv_product_model_table_values_import' ]
        tags:
            - { name: akeneo_batch.job.job_parameters.constraint_collection_provider }

    pim_table_attribute.job.job_parameters.constraint_collection_provider.simple_xlsx_import:
        class: 'Akeneo\Tool\Component\Connector\Job\JobParameters\ConstraintCollectionProvider\SimpleXlsxImport'
        arguments:
            - [ 'xlsx_table_attribute_options_import', 'xlsx_product_table_values_import', 'xlsx_product_model_table_values_import' ]
        tags:
            - { name: akeneo_batch.job.job_parameters.constraint_collection_provider }

    Akeneo\Pim\TableAttribute\Infrastructure\Connector\Provider\TableValuesCsvExportProvider:
        tags:
            - { name: akeneo_batch.job.job_parameters.constraint_collection_provider }
            - { name: akeneo_batch.job.job_parameters.default_values_provider }

    Akeneo\Pim\TableAttribute\Infrastructure\Connector\Provider\TableValuesXlsxExportProvider:
        tags:
            - { name: akeneo_batch.job.job_parameters.constraint_collection_provider }
            - { name: akeneo_batch.job.job_parameters.default_values_provider }

    # Default values providers
    pim_table_attribute.job.job_parameters.default_values_provider.simple_csv_export:
        class: 'Akeneo\Tool\Component\Connector\Job\JobParameters\DefaultValuesProvider\SimpleCsvExport'
        arguments:
            - ['csv_table_attribute_options_export']
        tags:
            - { name: akeneo_batch.job.job_parameters.default_values_provider }

    pim_table_attribute.job.job_parameters.default_values_provider.simple_xlsx_export:
        class: 'Akeneo\Tool\Component\Connector\Job\JobParameters\DefaultValuesProvider\SimpleXlsxExport'
        arguments:
            - ['xlsx_table_attribute_options_export']
        tags:
            - { name: akeneo_batch.job.job_parameters.default_values_provider }

    pim_table_attribute.job.job_parameters.default_values_provider.simple_csv_import:
        class: 'Akeneo\Tool\Component\Connector\Job\JobParameters\DefaultValuesProvider\SimpleCsvImport'
        arguments:
            - [ 'csv_table_attribute_options_import', 'csv_product_table_values_import', 'csv_product_model_table_values_import' ]
        tags:
            - { name: akeneo_batch.job.job_parameters.default_values_provider }

    pim_table_attribute.job.job_parameters.default_values_provider.simple_xlsx_import:
        class: 'Akeneo\Tool\Component\Connector\Job\JobParameters\DefaultValuesProvider\SimpleXlsxImport'
        arguments:
            - [ 'xlsx_table_attribute_options_import', 'xlsx_product_table_values_import', 'xlsx_product_model_table_values_import' ]
        tags:
            - { name: akeneo_batch.job.job_parameters.default_values_provider }

    Akeneo\Pim\TableAttribute\Infrastructure\Connector\Provider\CleanTablesValuesOnDeletedOptions:
        tags:
            - { name: akeneo_batch.job.job_parameters.constraint_collection_provider }
            - { name: akeneo_batch.job.job_parameters.default_values_provider }

    Akeneo\Pim\TableAttribute\Infrastructure\Connector\Provider\ComputeCompletenessOfTableAttributeProducts:
        tags:
            - { name: akeneo_batch.job.job_parameters.constraint_collection_provider }
            - { name: akeneo_batch.job.job_parameters.default_values_provider }

    # Tasklets
    Akeneo\Pim\TableAttribute\Infrastructure\Connector\Tasklet\CleanTableValuesWithDeletedOptionsTasklet:
        arguments:
            - '@pim_catalog.query.product_and_product_model_query_builder_factory'
            - '@akeneo.pim.structure.query.get_attributes'
            - '@pim_channel.query.sql.get_channel_code_with_locale_codes'
            - '@pim_catalog.saver.product'
            - '@pim_catalog.saver.product_model'
            - '%pim_job_product_batch_size%'

    Akeneo\Pim\TableAttribute\Infrastructure\Connector\Tasklet\ComputeCompletenessOfTableAttributeProductsTasklet:
        arguments:
            - '@pim_catalog.query.product_query_builder_factory'
#            - '@pim_catalog.query.product_query_builder_search_after_size_factory_external_api'
            - '@pim_catalog.completeness.calculator'
            - '@akeneo.pim.enrichment.product.query.save_product_completenesses'
            - '@akeneo_batch.job_repository'
