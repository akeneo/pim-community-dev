import {useState} from 'react';
import {Meta, Story, ArgsTable, Canvas} from '@storybook/addon-docs/blocks';
import {useArgs, updateArgs} from '@storybook/client-api';
import {Collapse} from './Collapse.tsx';
import {Helper, Link, TextInput, Field, Pill, Badge} from '../../components';
import {Section, SpaceContainer} from '../../storybook/PreviewGallery';

<Meta
  title="Components/Collapse"
  component={Collapse}
  args={{isOpen: false, label: 'label', collapseButtonLabel: 'Collapse', children: 'Collapse content'}}
/>

# Collapse

## Usage

The collapse is used to organise groups of elements and hide them when the user consider that is unecessary information.

To inform the user when there are changes or choices inside the collapse, there can be a Badge with the number of changes or a Pill component.

## Interaction

By default, the collapse is closed, the user has to click on the "plus icon" to open the collapse.

Two possible behaviours, automaticaly close collapse when you open another one or keep all states (open or close).

## Playground

<Canvas>
  <Story name="Standard">
    {args => {
      const [{isOpen}, updateArgs] = useArgs();
      const onCollapse = isOpen => updateArgs({isOpen});
      return <Collapse {...args} onCollapse={onCollapse} />;
    }}
  </Story>
</Canvas>

<ArgsTable story="Standard" />

## With Pill

<Canvas>
  <Story name="With Pill">
    {args => {
      const [isOpen, setOpen] = useState(false);
      return (
        <Collapse
          {...args}
          isOpen={isOpen}
          onCollapse={setOpen}
          label={
            <>
              Complete content <Pill level="primary" />
            </>
          }
        />
      );
    }}
  </Story>
</Canvas>

## With Badge

<Canvas>
  <Story name="With Badge">
    {args => {
      const [isOpen, setOpen] = useState(false);
      return (
        <Collapse
          {...args}
          isOpen={isOpen}
          onCollapse={setOpen}
          label={
            <>
              Numerable content <Badge level="secondary">42</Badge>
            </>
          }
        />
      );
    }}
  </Story>
</Canvas>

## With content

The Collapse can also be set to be opened by default, like here.

<Canvas>
  <Story name="With content">
    {args => {
      const [isFirstOpen, setFirstOpen] = useState(true);
      const [isSecondOpen, setSecondOpen] = useState(false);
      const [isThirdOpen, setThirdOpen] = useState(false);
      return (
        <SpaceContainer height={600}>
          <Collapse {...args} isOpen={isFirstOpen} onCollapse={setFirstOpen}>
            <Section>
              <Field label="Property">
                <TextInput placeholder="Type your text here" />
                <Helper level="info">
                  This is just an info. <Link href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Don't click here</Link>
                </Helper>
              </Field>
              <Field label="Format">
                <TextInput placeholder="Type your text here" />
              </Field>
              <Field label="Nice field">
                <TextInput placeholder="Type your text here" />
                <Helper level="error">Something bad happened.</Helper>
              </Field>
            </Section>
          </Collapse>
          <Collapse {...args} label="Another one" isOpen={isSecondOpen} onCollapse={setSecondOpen}>
            <Section>
              <Field label="Property">
                <TextInput placeholder="Type your text here" />
                <Helper level="info">
                  This is just an info. <Link href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Don't click here</Link>
                </Helper>
              </Field>
              <Field label="Format">
                <TextInput placeholder="Type your text here" />
              </Field>
              <Field label="Nice field">
                <TextInput placeholder="Type your text here" />
                <Helper level="error">Something bad happened.</Helper>
              </Field>
            </Section>
          </Collapse>
          <Collapse {...args} label="Yet another one" isOpen={isThirdOpen} onCollapse={setThirdOpen}>
            <Section>
              <Field label="Property">
                <TextInput placeholder="Type your text here" />
                <Helper level="info">
                  This is just an info. <Link href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Don't click here</Link>
                </Helper>
              </Field>
              <Field label="Format">
                <TextInput placeholder="Type your text here" />
              </Field>
              <Field label="Nice field">
                <TextInput placeholder="Type your text here" />
                <Helper level="error">Something bad happened.</Helper>
              </Field>
            </Section>
          </Collapse>
        </SpaceContainer>
      );
    }}
  </Story>
</Canvas>
