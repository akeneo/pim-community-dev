services:
    pim_table_attribute.event_subscriber.assets_installer:
        class: Akeneo\Platform\Bundle\InstallerBundle\Event\Subscriber\AssetsInstaller
        arguments:
            - '@filesystem'
            - '%pim_ge_dev_src_folder_location%/src/Akeneo/Pim/TableAttribute/front/src'
            - '%kernel.project_dir%/public/bundles/akeneopimtableattribute'

    Akeneo\Pim\TableAttribute\Infrastructure\Symfony\Install\InstallAssetsSubscriber:
        arguments:
            - '@pim_table_attribute.event_subscriber.assets_installer'
        tags:
            - { name: kernel.event_subscriber }

    Akeneo\Pim\TableAttribute\Infrastructure\TableConfiguration\EventSubscriber\ScheduleTableAttributeForUpdateSubscriber:
        arguments:
            - '@doctrine.orm.entity_manager'
        tags:
            - { name: kernel.event_subscriber }

    Akeneo\Pim\TableAttribute\Infrastructure\TableConfiguration\EventSubscriber\CleanOptionsJobSubscriber:
        arguments:
            - '@security.token_storage'
            - '@akeneo_batch.job.job_instance_repository'
            - '@akeneo_batch_queue.launcher.queue_job_launcher'
            - '@Akeneo\Tool\Bundle\BatchBundle\Persistence\Sql\SqlCreateJobInstance'
            - 'clean_table_values_following_deleted_options'
        tags:
            - { name: kernel.event_subscriber }

    Akeneo\Pim\TableAttribute\Infrastructure\TableConfiguration\EventSubscriber\CleanRecordsJobSubscriber:
        arguments:
            - '@security.token_storage'
            - '@akeneo_batch.job.job_instance_repository'
            - '@akeneo_batch_queue.launcher.queue_job_launcher'
            - '@Akeneo\Tool\Bundle\BatchBundle\Persistence\Sql\SqlCreateJobInstance'
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Query\GetColumnsLinkedToAReferenceEntity'
            - 'clean_table_values_following_deleted_options'
        tags:
            - { name: kernel.event_subscriber }

    Akeneo\Pim\TableAttribute\Infrastructure\TableConfiguration\EventSubscriber\ComputeCompletenessSubscriber:
        arguments:
            - '@database_connection'
            - '@Akeneo\Pim\TableAttribute\Domain\TableConfiguration\Repository\TableConfigurationRepository'
            - '@akeneo_batch_queue.launcher.queue_job_launcher'
            - '@akeneo_batch.job.job_instance_repository'
            - '@Akeneo\Tool\Bundle\BatchBundle\Persistence\Sql\SqlCreateJobInstance'
            - '@security.token_storage'
            - 'compute_completeness_following_table_update'
        tags:
              - { name: kernel.event_subscriber }
