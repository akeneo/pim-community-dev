parameters:
    pim_datagrid.extension.mass_action.util.product_fields_builder.class:         PimEnterprise\Bundle\DataGridBundle\Extension\MassAction\Util\ProductFieldsBuilder
    pim_datagrid.extension.mass_action.handler.mass_approve.class:                PimEnterprise\Bundle\DataGridBundle\Extension\MassAction\Handler\MassApproveActionHandler
    pim_datagrid.extension.mass_action.handler.mass_refuse.class:                 PimEnterprise\Bundle\DataGridBundle\Extension\MassAction\Handler\MassRefuseActionHandler
    pim_datagrid.extension.mass_action.handler.rule_impacted_product_count.class: PimEnterprise\Bundle\DataGridBundle\Extension\MassAction\Handler\RuleImpactedProductCountActionHandler

services:
    pim_datagrid.extension.mass_action.util.product_fields_builder:
        class: '%pim_datagrid.extension.mass_action.util.product_fields_builder.class%'
        arguments:
            - '@pim_catalog.repository.product'
            - '@pim_catalog.repository.attribute'
            - '@pim_catalog.repository.locale'
            - '@pim_catalog.repository.currency'
            - '@pim_catalog.repository.association_type'
            - '@pim_catalog.context.catalog'
            - '@pimee_security.repository.attribute_group_access'
            - '@security.token_storage'

    pimee_datagrid.extension.mass_action.util.published_product_fields_builder:
        class: '%pim_datagrid.extension.mass_action.util.product_fields_builder.class%'
        arguments:
            - '@pimee_workflow.repository.published_product'
            - '@pim_catalog.repository.attribute'
            - '@pim_catalog.repository.locale'
            - '@pim_catalog.repository.currency'
            - '@pim_catalog.repository.association_type'
            - '@pim_catalog.context.catalog'
            - '@pimee_security.repository.attribute_group_access'
            - '@security.token_storage'

    pim_datagrid.extension.mass_action.handler.mass_approve:
        class: '%pim_datagrid.extension.mass_action.handler.mass_approve.class%'
        arguments:
            - '@pim_datagrid.datasource.result_record.hydrator.object_id'
            - '@event_dispatcher'
            - '@pimee_workflow.factory.product_proposal_cursor'
        tags:
            - { name: pim_datagrid.extension.mass_action.handler, alias: mass_approve }

    pim_datagrid.extension.mass_action.handler.mass_refuse:
        class: '%pim_datagrid.extension.mass_action.handler.mass_refuse.class%'
        arguments:
            - '@pim_datagrid.datasource.result_record.hydrator.object_id'
            - '@event_dispatcher'
            - '@pimee_workflow.factory.product_proposal_cursor'
        tags:
            - { name: pim_datagrid.extension.mass_action.handler, alias: mass_refuse }

    pim_datagrid.extension.mass_action.handler.rule_impacted_product_count:
        class: '%pim_datagrid.extension.mass_action.handler.rule_impacted_product_count.class%'
        arguments:
            - '@pim_datagrid.datasource.result_record.hydrator.orm.object_id'
            - '@event_dispatcher'
        tags:
            - { name: pim_datagrid.extension.mass_action.handler, alias: rule_impacted_product_count }

    pimee_datagrid.extension.mass_action.type.mass_approve:
        class: '%oro_datagrid.extension.mass_action.type.redirect.class%'
        shared: false
        tags:
            - { name: oro_datagrid.extension.mass_action.type, type: mass-approve-proposal }

    pimee_datagrid.extension.mass_action.type.mass_refuse:
        class: '%oro_datagrid.extension.mass_action.type.redirect.class%'
        shared: false
        tags:
            - { name: oro_datagrid.extension.mass_action.type, type: mass-refuse-proposal }

    # Dispatchers
    pim_datagrid.extension.mass_action.dispatcher:
        class: '%pim_datagrid.extension.mass_action.dispatcher.class%'
        arguments:
            - '@pim_datagrid.extension.mass_action.handler.registry'
            - '@oro_datagrid.datagrid.manager'
            - '@oro_datagrid.datagrid.request_params'
            - '@oro_datagrid.mass_action.parameters_parser'
            - ['product-grid', 'proposal-grid', 'published-product-grid']
