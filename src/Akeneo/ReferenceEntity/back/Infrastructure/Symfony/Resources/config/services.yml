services:
    akeneo_referenceentity.command.installer.fixtures_installer:
        class: Akeneo\ReferenceEntity\Infrastructure\Symfony\Command\Installer\FixturesInstaller
        arguments:
            - '@doctrine.dbal.default_connection'
            - '@akeneo_file_storage.file_storage.file.file_storer'
            - '@pim_catalog.command_launcher'

    akeneo_referenceentity.command.installer.assets_installer:
        class: Akeneo\ReferenceEntity\Infrastructure\Symfony\Command\Installer\AssetsInstaller
        arguments:
            - '@filesystem'
            - '%kernel.project_dir%'

    akeneo_referenceentity.event_subscriber.installer:
        class: Akeneo\ReferenceEntity\Infrastructure\Symfony\Command\InstallerCommand
        arguments:
            - '@akeneo_referenceentity.command.installer.fixtures_installer'
            - '@akeneo_referenceentity.command.installer.assets_installer'
        tags:
            - { name: kernel.event_subscriber }
            - { name: 'console.command'}

    akeneo_referenceentity.event_subscriber.remove_user_group:
        class: Akeneo\ReferenceEntity\Infrastructure\EventSubscriber\RemoveUserGroupSubscriber
        arguments:
            - '@akeneo.referencentity.infrastructure.persistence.query.find_reference_entity_where_user_group_is_last_to_have_edit_right'
        tags:
            - { name: kernel.event_subscriber }

    akeneo_referenceentity.updater.adder.reference_entity_collection:
        class: Akeneo\Pim\Enrichment\ReferenceEntity\Component\Updater\Adder\ReferenceEntityCollectionAdder
        arguments:
        - '@pim_catalog.builder.entity_with_values'
        - ['akeneo_reference_entity_collection']
        tags:
        - { name: 'pim_catalog.updater.adder' }
