services:
    akeneo_assetmanager.application.asset.execute_rule_templates.rule_template_executor:
        class: Akeneo\AssetManager\Application\Asset\ExecuteRuleTemplates\RuleTemplateExecutor
        arguments:
            - '@akeneo_assetmanager.infrastructure.persistence.repository.asset_family'
            - '@akeneo_assetmanager.infrastructure.persistence.query.find_property_accessible_asset'
            - '@akeneo_assetmanager.infrastructure.rule_template.rule_engine_runner'

    akeneo_assetmanager.infrastructure.rule_template.rule_engine_runner:
        class: Akeneo\AssetManager\Infrastructure\RuleTemplates\RuleEngineRunner
        arguments:
            - '@pimee_catalog_rule.denormalizer.product_rule.chained'
            - '@pimee_catalog_rule.runner.product'

    akeneo_assetmanager.application.asset.subscriber.link_asset:
        class: Akeneo\AssetManager\Application\Asset\Subscribers\LinkAssetSubscriber
        arguments:
            - '@akeneo_assetmanager.job.asynchronous_product_link_rule_launcher'
        tags:
            - { name: kernel.event_subscriber }
