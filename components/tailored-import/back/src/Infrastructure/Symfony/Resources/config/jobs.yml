services:
  akeneo.tailored_import.job.xlsx_product.import:
    class: '%pim_connector.job.simple_job.class%'
    arguments:
      - '%akeneo.tailored_import.connector.xlsx_product.code%'
      - '@event_dispatcher'
      - '@akeneo_batch.job_repository'
      -
        - '@akeneo.job_automation.connector.step.download'
        - '@pim_connector.step.charset_validator'
        - '@akeneo.tailored_import.connector.step.xlsx_product.import'
      - true
    tags:
      - { name: akeneo_batch.job, connector: '%akeneo.tailored_import.connector.name%', type: '%pim_connector.job.import_type%' }

  akeneo.tailored_import.connector.step.xlsx_product.import:
    class: '%pim_connector.step.item_step.class%'
    arguments:
      - 'import'
      - '@event_dispatcher'
      - '@akeneo_batch.job_repository'
      - '@akeneo.tailored_import.reader.file.xlsx'
      - '@akeneo.tailored_import.processor.product'
      - '@akeneo.tailored_import.writer.product'
      - '%pim_job_product_batch_size%'
      - '@akeneo_batch.job.job_stopper'

  akeneo.tailored_import.job.job_parameters.xlsx_product_default_values_provider:
    class: 'Akeneo\Platform\TailoredImport\Infrastructure\Connector\DefaultValueProvider\XlsxProductDefaultValueProvider'
    arguments:
      - '@akeneo_pim_enrichment.job.job_parameters.default_values_provider.simple_xlsx_import'
      -
        - '%akeneo.tailored_import.connector.xlsx_product.code%'
    tags:
      - { name: akeneo_batch.job.job_parameters.default_values_provider }

  akeneo.tailored_import.job.job_parameters.xlsx_constraint_collection_provider:
    class: 'Akeneo\Platform\TailoredImport\Infrastructure\Connector\ConstraintCollectionProvider'
    arguments:
      - '@pim_user.job.job_parameters.constraint_collection_provider.simple_xlsx_import'
      -
        - '%akeneo.tailored_import.connector.xlsx_product.code%'
    tags:
      - { name: akeneo_batch.job.job_parameters.constraint_collection_provider }
