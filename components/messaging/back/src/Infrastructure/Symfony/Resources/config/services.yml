services:
    Akeneo\Pim\Platform\Messaging\Infrastructure\Symfony\Command\TestCommand:
        arguments:
            - '@messenger.default_bus'
        tags:
            - { name: console.command }

    Akeneo\Pim\Platform\Messaging\Infrastructure\Symfony\Command\ProcessMessage:
        arguments:
            - '@akeneo_batch_queue.messenger.serializer'
        tags:
            - { name: console.command }

    Akeneo\Pim\Platform\Messaging\Infrastructure\Normalizer\MessageNormalizer:
        tags:
            - { name: akeneo_batch_queue.messenger.normalizer, priority: 0 }

#    Akeneo\Pim\Platform\Messaging\Infrastructure\MessageHandler:
#        arguments:
#            - '@akeneo_batch_queue.messenger.serializer'
#        tags:
#            - name: 'messenger.message_handler'
#              handles: 'Akeneo\Pim\Platform\Messaging\Domain\MessageTenantAwareInterface'

#    handler1:
#        class: Akeneo\Pim\Platform\Messaging\Infrastructure\MessageHandler
#        arguments:
#            - '@akeneo_batch_queue.messenger.serializer'
#            - 'dqi_launch_product_and_product_model_evaluations_consumer'
#        tags:
#            - name: 'messenger.message_handler'
#              handles: 'Akeneo\Pim\Platform\Messaging\Domain\MessageTenantAwareInterface'
#              from_transport: 'dqi_launch_product_and_product_model_evaluations_consumer'
#
#    handler2:
#        class: Akeneo\Pim\Platform\Messaging\Infrastructure\MessageHandler
#        arguments:
#            - '@akeneo_batch_queue.messenger.serializer'
#            - 'second_consumer_for_tests'
#        tags:
#            - name: 'messenger.message_handler'
#              handles: 'Akeneo\Pim\Platform\Messaging\Domain\MessageTenantAwareInterface'
#              from_transport: 'second_consumer_for_tests'
