nameOverride: ""
global:
  extraLabels:
    type: srnt
    instanceName: null # Generated
  monitoring:
    enabled: false

backup:
  enabled: true
  projectId: null # Generated
  zone: null # Generated
  snapshot:
    schedule: "0 0 */1 * * *" # Once every hour: https://godoc.org/github.com/robfig/cron
    retentionPolicy:
      dailyBackups: 10
      weeklyBackups: 5
      monthlyBackups: 12
      yearlyBackups: 10
  archive:
    enabled: false
    schedule: "0 0 0 * * *" # Each day at midnight

common:
  extraLabels: {}
  gcpProjectID: null # Generated
  googleZone: null # Generated
  pimMasterDomain: null # Generated
  workloadIdentityKSA: null # Generated
  workloadIdentityKSANamespace: null # Generated
  workloadIdentityGSA: null # Generated
  phpConfFPM:
  - name: "PHP_CONF_MAX_EXECUTION_TIME"
    value: "60"
  - name: "PHP_CONF_MAX_INPUT_VARS"
    value: "1000"
  - name: "PHP_CONF_UPLOAD_LIMIT"
    value: "512M"
  - name: "PHP_CONF_MAX_POST_SIZE"
    value: "512M"
  - name: "PHP_CONF_MEMORY_LIMIT"
    value: "512M"
  - name: "PHP_CONF_DISPLAY_ERRORS"
    value: "off"
  - name: "PHP_CONF_ERROR_REPORTING"
    value: "22527" # E_ALL & ~E_DEPRECATED & ~E_STRICT
  - name: "PHP_CONF_DATE_TIMEZONE"
    value: "Etc/UTC"

  phpConfCLI:
  - name: "PHP_CONF_MAX_EXECUTION_TIME"
    value: "0"
  - name: "PHP_CONF_MAX_INPUT_VARS"
    value: "1000"
  - name: "PHP_CONF_UPLOAD_LIMIT"
    value: "512M"
  - name: "PHP_CONF_MAX_POST_SIZE"
    value: "512M"
  - name: "PHP_CONF_MEMORY_LIMIT"
    value: "2G"
  - name: "PHP_CONF_DISPLAY_ERRORS"
    value: "off"
  - name: "PHP_CONF_ERROR_REPORTING"
    value: "22527" # E_ALL & ~E_DEPRECATED & ~E_STRICT
  - name: "PHP_CONF_DATE_TIMEZONE"
    value: "Etc/UTC"

# Free Trial
free_trial:
  enabled: false

image:
  pim:
    repository: eu.gcr.io/akeneo-cloud/pim-enterprise-dev
    pullPolicy: IfNotPresent
    tag: master
  httpd:
    repository: httpd
    tag: 2.4.51
    pullPolicy: IfNotPresent

# Onboarder
onboarder:
  enabled: false
  hook:
    setupOnboarderDatabase:
      enabled: true
    pushChannelToOnboarder:
      enabled: true
    pushCatalogToOnboarder:
      enabled: false
    importAdditionalOnboarderFixtures:
      enabled: false
    importOnboarderSuppliers:
      enabled: false
  pubsub:
    topicPubMiddleware: null
    topicPubOnboarder: null
    topicCon: null
    queueName: null
    maxReplicas: 10
  serviceAccount: null
  resources:
    requests:
      cpu: "1m"
      memory: "90Mi"

# PIM
pim:
  comm_panel_api_url: null
  logging_level: NOTICE
  monitoring:
    authenticationToken: authenticationToken
  pubsub:
    topic_business_event: null # Generated
    topic_job_queue_ui: null # Generated
    topic_job_queue_import_export: null # Generated
    topic_job_queue_data_maintenance: null # Generated
    subscription_webhook: null # Generated
    subscription_job_queue_ui: null # Generated
    subscription_job_queue_import_export: null # Generated
    subscription_job_queue_data_maintenance: null # Generated
  hook:
    addAdmin:
      enabled: true
    installPim:
      enabled: true
  updateStrategy:
    type: RollingUpdate
  # Any changes on the `daemons` configuration and you need to update the
  # `deployments/terraform/helm.tf` script to stop & restart daemons while a
  # migration is running.
  daemons:
    job-consumer-process:
      enabled: true
      pimCommand: "messenger:consume -vv ui_job import_export_job data_maintenance_job --limit=1 --time-limit=3600"
      replicas: 1
      trapped: true
      resources:
        limits:
          memory: "2048Mi"
        requests:
          memory: "300Mi"
          cpu: "5m"
    webhook-consumer-process:
      enabled: true
      pimCommand: "messenger:consume --quiet webhook --time-limit=3600 --memory-limit=384M"
      replicas: 1
      trapped: false
      resources:
        limits:
          memory: "512Mi"
        requests:
          memory: "100Mi"
          cpu: "1m"
  extraLabels: {}
  secret: null # Generate me with `uuidgen`
  web:
    replicas: 1
    fpm:
      resources:
        limits:
          memory: "1024Mi"
        requests:
          cpu: "15m"
          memory: "512Mi"
    httpd:
      resources:
        limits:
          memory: "128Mi"
        requests:
          cpu: "1m"
          memory: "40Mi"
  api:
    ratelimit:
      enabled: true
      average: 100
      burst: 25
    replicas: 1
    fpm:
      resources:
        limits:
          memory: "1024Mi"
        requests:
          cpu: "50m"
          memory: "256Mi"
    httpd:
      resources:
        limits:
          memory: "128Mi"
        requests:
          cpu: "2m"
          memory: "30Mi"
  elasticsearch:
    settings:
      totalFieldsLimit: 50000
      maxChunkSizeCharacters: 100000000
  dqi:
    settings:
      enabled: true
  jobs:
    versioning-purge:
      enabled: true
      pimCommand: "pim:versioning:purge --more-than-days 90 --no-interaction --force"
      schedule: "0 1 * * 0"
      resources:
        requests:
          cpu: "100m"
          memory: "80Mi"
    batch-purge:
      enabled: true
      pimCommand: "akeneo:batch:purge-job-execution"
      schedule: "0 0 1 * *"
      resources:
        requests:
          cpu: "200m"
          memory: "192Mi"
    update-connectivity-audit-data:
      enabled: true
      pimCommand: "akeneo:connectivity-audit:update-data"
      schedule: "1 * * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    purge-connectivity-connection-error:
      enabled: true
      pimCommand: "akeneo:connectivity-connection:purge-error"
      schedule: "10 * * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    purge-connectivity-audit-error-count:
      enabled: true
      pimCommand: "akeneo:connectivity-audit:purge-error-count"
      schedule: "40 12 * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    rule-run:
      enabled: true
      pimCommand: "akeneo:rule:run"
      schedule: "0 5,11,17,23 * * *"
      resources:
        requests:
          cpu: "800m"
          memory: "400Mi"
    versionning-refresh:
      enabled: true
      pimCommand: "pim:versioning:refresh"
      schedule: "0 3 * * *"
      resources:
        requests:
          cpu: "300m"
          memory: "256Mi"
    volume-aggregate:
      enabled: true
      pimCommand: "pim:volume:aggregate"
      schedule: "0 4 * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "80Mi"
    project-recalculate:
      enabled: true
      pimCommand: "pimee:project:recalculate"
      schedule: "20 0 * * *"
      resources:
        requests:
          cpu: "350m"
          memory: "350Mi"
    project-notify-before-due-date:
      enabled: true
      pimCommand: "pimee:project:notify-before-due-date"
      schedule: "0 2 * * *"
      resources:
        requests:
          cpu: "1m"
          memory: "80Mi"
    reference-entity-refresh-records:
      enabled: true
      pimCommand: "akeneo:reference-entity:refresh-records"
      schedule: "0 23 * * *"
      resources:
        requests:
          cpu: "200m"
          memory: "128Mi"
    sso-log-rotate:
      enabled: true
      pimCommand: "pimee:sso:rotate-log 30"
      schedule: "5 22 * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    data-quality-insights-periodic-tasks:
      enabled: true
      pimCommand: "pim:data-quality-insights:schedule-periodic-tasks"
      schedule: "15 0 * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    data-quality-insights-prepare-evaluations:
      enabled: true
      pimCommand: "pim:data-quality-insights:prepare-evaluations"
      schedule: "*/10 * * * *"
      resources:
        requests:
          cpu: "120m"
          memory: "50Mi"
    data-quality-insights-evaluations:
      enabled: true
      pimCommand: "pim:data-quality-insights:evaluations"
      schedule: "*/30 * * * *"
      resources:
        requests:
          cpu: "20m"
          memory: "200Mi"
    purge-events-api-logs:
      enabled: true
      pimCommand: "akeneo:connectivity-connection:purge-events-api-logs"
      schedule: "5 * * * *"
      resources:
        limits:
          memory: "128Mi"
        requests:
          cpu: "100m"
          memory: "10Mi"
    migrate-records-index-mapping:
      enabled: true
      pimCommand: "akeneo:reference-entity:migrate-records-index-mapping --no-interaction"
      schedule: "*/30 * * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    migrate-job-execution-warning-count:
      enabled: true
      pimCommand: "akeneo:batch:migrate-job-execution-warning-count --no-interaction"
      schedule: "*/30 * * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    connectivity-openid-keys-regenerate:
      enabled: true
      pimCommand: "akeneo:connectivity-connection:openid-keys:create --no-interaction"
      schedule: "4 21 * * 0"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    clean-case-sensitive-attribute-option-spellcheck:
      enabled: true
      pimCommand: "pimee:data-quality-insights:clean-case-sensitive-attribute-option-spellcheck --no-interaction"
      schedule: "15 2 * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    clean-completeness-evaluation-results:
      enabled: true
      pimCommand: "pim:data-quality-insights:clean-completeness-evaluation-results --no-interaction"
      schedule: "30 0 * * *"
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
    clean-product-scores:
      enabled: true
      pimCommand: "pim:data-quality-insights:clean-product-scores --no-interaction"
      schedule: "1 0 * * *"
      resources:
        requests:
          cpu: "10m"
          memory: "10Mi"
    migrate-id-to-uuid:
      enabled: true
      pimCommand: "pim:product:migrate-to-uuid --no-interaction"
      schedule: "45 * * * *"
      resources:
        requests:
          cpu: "350m"
          memory: "350Mi"
  onboarder_serenity:
    settings:
      enabled: false
