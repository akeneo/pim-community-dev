services:
    # Indexers
    akeneo_referenceentity.infrastructure.search.elasticsearch.record_indexer:
        class: Akeneo\ReferenceEntity\Infrastructure\Search\Elasticsearch\RecordIndexer
        arguments:
            - '@akeneo_referenceentity.client.record'
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.record_normalizer'

    # Subscribers
    akeneo_referenceentity.infrastructure.search.elasticsearch.index_record_subscriber:
        class: Akeneo\ReferenceEntity\Infrastructure\Search\Elasticsearch\IndexRecordSubscriber
        arguments:
            - '@akeneo_referenceentity.infrastructure.persistence.repository.record'
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.record_indexer'
        tags:
            - { name: kernel.event_subscriber }

    # Normalizers
    akeneo_referenceentity.infrastructure.search.elasticsearch.record_normalizer:
        class: Akeneo\ReferenceEntity\Infrastructure\Search\Elasticsearch\RecordNormalizer
        arguments:
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.record_search_matrix_normalizer'

    akeneo_referenceentity.infrastructure.search.elasticsearch.record_search_matrix_normalizer:
        class: Akeneo\ReferenceEntity\Infrastructure\Search\Elasticsearch\RecordSearchMatrixNormalizer
        arguments:
            - '@akeneo_referenceentity.infrastructure.search.elasticsearch.find_activated_locales_per_channels'
