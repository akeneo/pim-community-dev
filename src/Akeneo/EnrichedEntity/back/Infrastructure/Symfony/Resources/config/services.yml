services:
    akeneo_enrichedentity.event_subscriber.installer:
        class: 'Akeneo\EnrichedEntity\back\Infrastructure\Symfony\EventListener\Installer'
        arguments:
            - '@filesystem'
            - '%kernel.project_dir%'
            - '@doctrine.dbal.default_connection'
        tags:
            - { name: kernel.event_subscriber }

    akeneo_enrichedentity.infrastructure.action.enriched_entity.index:
        class: 'Akeneo\EnrichedEntity\back\Infrastructure\Controller\EnrichedEntity\IndexAction'
        arguments:
            - '@akeneo_enrichedentity.application.enriched_entity.enriched_entity_grid.find_enriched_entities_query'
            - '@akeneo_enrichedentity.infrastructure.normalizer.enriched_entity_item'

    akeneo_enrichedentity.infrastructure.action.enriched_entity.get:
        class: 'Akeneo\EnrichedEntity\back\Infrastructure\Controller\EnrichedEntity\GetAction'
        arguments:
            - '@akeneo_enrichedentity.application.enriched_entity.enriched_entity_details.find_enriched_entity_query'
            - '@akeneo_enrichedentity.infrastructure.normalizer.enriched_entity_details'

    akeneo_enrichedentity.infrastructure.action.enriched_entity.edit:
        class: 'Akeneo\EnrichedEntity\back\Infrastructure\Controller\EnrichedEntity\EditAction'
        arguments:
            - '@akeneo_enrichedentity.application.enriched_entity.edit_enriched_entity_handler'
            - '@akeneo_enrichedentity.infrastructure.normalizer.enriched_entity_details'
            - '@serializer'
            - '@validator'

    akeneo_enrichedentity.infrastructure.persistence.enriched_entity:
        class: 'Akeneo\EnrichedEntity\back\Infrastructure\Persistence\Sql\SqlEnrichedEntityRepository'
        arguments:
            - '@database_connection'

    akeneo_enrichedentity.application.enriched_entity.enriched_entity_details.find_enriched_entity_query:
        class: 'Akeneo\EnrichedEntity\back\Application\EnrichedEntity\EnrichedEntityDetails\FindEnrichedEntityQuery'
        arguments:
            - '@akeneo_enrichedentity.infrastructure.persistence.enriched_entity'

    akeneo_enrichedentity.application.enriched_entity.edit_enriched_entity_handler:
        class: 'Akeneo\EnrichedEntity\back\Application\EnrichedEntity\EditEnrichedEntity\EditEnrichedEntityHandler'
        arguments:
            - '@akeneo_enrichedentity.infrastructure.persistence.enriched_entity'

    akeneo_enrichedentity.application.enriched_entity.enriched_entity_grid.find_enriched_entities_query:
        class: 'Akeneo\EnrichedEntity\back\Application\EnrichedEntity\EnrichedEntityList\FindEnrichedEntitiesQuery'
        arguments:
            - '@akeneo_enrichedentity.infrastructure.persistence.enriched_entity'

    akeneo_enrichedentity.infrastructure.normalizer.enriched_entity_item:
        class: 'Akeneo\EnrichedEntity\back\Infrastructure\Normalizer\EnrichedEntityItemNormalizer'

    akeneo_enrichedentity.infrastructure.normalizer.enriched_entity_details:
        class: 'Akeneo\EnrichedEntity\back\Infrastructure\Normalizer\EnrichedEntityDetailsNormalizer'
