Akeneo\Pim\Structure\Component\Model\Attribute:
    constraints:
        - Akeneo\Pim\TableAttribute\Infrastructure\Validation\Attribute\IsTableAttributeConfigured: ~
    properties:
        rawTableConfiguration:
            - Type: array
            - Count:
                  min: 2
                  minMessage: pim_table_configuration.validation.table_configuration.must_contain_at_least_two_columns
            - All:
                  - Type: array
                  - Collection:
                        fields:
                            code:
                                - Required:
                                    - NotBlank:
                                          message: pim_table_configuration.validation.table_configuration.column_code_must_be_filled
                                    - Regex:
                                          pattern: /^[a-zA-Z0-9_]+$/
                                          message: pim_table_configuration.validation.table_configuration.invalid_code
                                    - Length:
                                          max: 100
                                          maxMessage: pim_table_configuration.validation.table_configuration.too_long_code
                            data_type:
                                - Required:
                                      - Type:
                                          type: string
                                          message: pim_table_configuration.validation.table_configuration.column_type_must_be_a_string
                                      - Choice:
                                          choices: ["text", "number", "boolean"]
                                          message: pim_table_configuration.validation.table_configuration.unknown_data_type
                            labels:
                                - Optional:
                                    - Type:
                                          type: array
                                          message: pim_table_configuration.validation.table_configuration.invalid_labels_format
                                    - Akeneo\Pim\TableAttribute\Infrastructure\Validation\Attribute\LabelCollection: ~
                                    - All:
                                          - Type:
                                                type: string
                                                message: pim_table_configuration.validation.table_configuration.column_label_must_be_a_string
                                          - NotNull:
                                                message: pim_table_configuration.validation.table_configuration.column_label_must_be_a_string
                        missingFieldsMessage: pim_table_configuration.validation.table_configuration.missing_column
            - Akeneo\Pim\TableAttribute\Infrastructure\Validation\Attribute\IsColumnCodeUnique: ~
#              TODO add validation: first column cannot be changed (code and data_type)
