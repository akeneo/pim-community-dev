connector:
    name: Akeneo Product Asset Connector
    jobs:
        apply_assets_mass_upload:
            type:  mass_upload
            steps:
                perform:
                    class: '%pim_connector.step.tasklet.class%'
                    services:
                        tasklet: pimee_product_asset.mass_upload.tasklet
        yml_asset_channel_configuration_import:
            type:  import
            steps:
                validation:
                    class: '%pim_connector.step.validator.class%'
                    services:
                        charsetValidator: pim_connector.validator.item.charset_validator
                import_asset:
                    services:
                        reader:    pimee_product_asset.reader.file.yaml_channel_configuration
                        processor: pimee_product_asset.processor.denormalization.channel_configuration
                        writer:    pimee_product_asset.writer.doctrine.channel_configuration
        yml_asset_channel_configuration_export:
            type:  export
            steps:
                export:
                    services:
                        reader:    pimee_product_asset.reader.database.channel_configuration
                        processor: pimee_product_asset.processor.normalization.channel_configuration.flat
                        writer:    pimee_product_asset.writer.file.yaml_asset_channel_configuration
        csv_asset_import:
            type:  import
            steps:
                validation:
                    class: '%pim_connector.step.validator.class%'
                    services:
                        charsetValidator: pim_connector.validator.item.charset_validator
                import_tags:
                    services:
                        reader:    pimee_product_asset.reader.file.csv_tag
                        processor: pimee_product_asset.processor.denormalization.tag
                        writer:    pimee_product_asset.writer.doctrine.tag
                    parameters:
                        batchSize: 1
                import_asset:
                    services:
                        reader:    pimee_product_asset.reader.file.csv_asset
                        processor: pimee_product_asset.processor.denormalization.asset
                        writer:    pimee_product_asset.writer.doctrine.asset
        csv_asset_category_import:
            type:  import
            steps:
                validation:
                    class: '%pim_connector.step.validator.class%'
                    services:
                        charsetValidator: pim_connector.validator.item.charset_validator
                import_asset_category:
                    services:
                        reader:    pimee_product_asset.reader.file.csv_asset_category
                        processor: pimee_product_asset.processor.denormalization.category
                        writer:    pimee_product_asset.writer.doctrine.category
                    parameters:
                        batchSize: 1
        csv_asset_export:
            type:  export
            steps:
                export:
                    services:
                        reader:    pimee_product_asset.reader.database.asset
                        processor: pimee_product_asset.processor.normalization.asset.flat
                        writer:    pimee_product_asset.writer.file.csv_asset
        csv_asset_category_export:
            type:  export
            steps:
                export:
                    services:
                        reader:    pimee_product_asset.reader.database.category
                        processor: pimee_product_asset.processor.normalization.category.flat
                        writer:    pimee_product_asset.writer.file.csv_asset_category
        csv_asset_variation_export:
            type:  export
            steps:
                export:
                    services:
                        reader:    pimee_product_asset.reader.database.variation
                        processor: pimee_product_asset.processor.normalization.variation.flat
                        writer:    pimee_product_asset.writer.file.csv_asset_variation
        xlsx_asset_import:
            type:  import
            steps:
                validation:
                    class: '%pim_connector.step.validator.class%'
                    services:
                        charsetValidator: pim_connector.validator.item.charset_validator
                import_tags:
                    services:
                        reader:    pimee_product_asset.reader.file.xlsx_tag
                        processor: pimee_product_asset.processor.denormalization.tag
                        writer:    pimee_product_asset.writer.doctrine.tag
                    parameters:
                        batchSize: 1
                import_asset:
                    services:
                        reader:    pimee_product_asset.reader.file.xlsx_asset
                        processor: pimee_product_asset.processor.denormalization.asset
                        writer:    pimee_product_asset.writer.doctrine.asset
        xlsx_asset_category_import:
            type:  import
            steps:
                validation:
                    class: '%pim_connector.step.validator.class%'
                    services:
                        charsetValidator: pim_connector.validator.item.charset_validator
                import_asset_category:
                    services:
                        reader:    pimee_product_asset.reader.file.xlsx_asset_category
                        processor: pimee_product_asset.processor.denormalization.category
                        writer:    pimee_product_asset.writer.doctrine.category
                    parameters:
                        batchSize: 1
        xlsx_asset_export:
            type:  export
            steps:
                export:
                    services:
                        reader:    pimee_product_asset.reader.database.asset
                        processor: pimee_product_asset.processor.normalization.asset.flat
                        writer:    pimee_product_asset.writer.file.xlsx_asset
        xlsx_asset_category_export:
            type:  export
            steps:
                export:
                    services:
                        reader:    pimee_product_asset.reader.database.category
                        processor: pimee_product_asset.processor.normalization.category.flat
                        writer:    pimee_product_asset.writer.file.xlsx_asset_category
        xlsx_asset_variation_export:
            type:  export
            steps:
                export:
                    services:
                        reader:    pimee_product_asset.reader.database.variation
                        processor: pimee_product_asset.processor.normalization.variation.flat
                        writer:    pimee_product_asset.writer.file.xlsx_asset_variation
        classify_assets:
            type:  mass_edit
            steps:
                perform:
                    services:
                        reader:    pimee_product_asset.reader.database.mass_edit_asset
                        processor: pimee_product_asset.processor.classify_assets
                        writer:    pimee_product_asset.writer.doctrine.asset
