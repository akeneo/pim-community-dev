services:
  oneup_flysystem.sftp_adapter:
    class: League\Flysystem\InMemory\InMemoryFilesystemAdapter

  oneup_flysystem.amazon_s3_adapter:
    class: League\Flysystem\InMemory\InMemoryFilesystemAdapter

  oneup_flysystem.microsoft_azure_adapter:
    class: League\Flysystem\InMemory\InMemoryFilesystemAdapter

  oneup_flysystem.sftp_storage_filesystem:
    class: League\Flysystem\Filesystem
    arguments:
      - '@oneup_flysystem.sftp_adapter'

  oneup_flysystem.amazon_s3_storage_filesystem:
    class: League\Flysystem\Filesystem
    arguments:
      - '@oneup_flysystem.amazon_s3_adapter'

  oneup_flysystem.microsoft_azure_storage_filesystem:
    class: League\Flysystem\Filesystem
    arguments:
      - '@oneup_flysystem.microsoft_azure_adapter'

  Akeneo\Platform\JobAutomation\Infrastructure\StorageClient\Sftp\SftpStorageClientProvider:
    class: AkeneoTest\Platform\Acceptance\ImportExport\FakeServices\FakeStorageClientProvider
    arguments:
      - '@oneup_flysystem.sftp_storage_filesystem'
      - 'Akeneo\Platform\JobAutomation\Domain\Model\Storage\SftpStorage'
    tags:
      - { name: pim_import_export.storage_client_provider }

  Akeneo\Platform\JobAutomation\Infrastructure\StorageClient\AmazonS3\AmazonS3StorageClientProvider:
    class: AkeneoTest\Platform\Acceptance\ImportExport\FakeServices\FakeStorageClientProvider
    arguments:
      - '@oneup_flysystem.amazon_s3_storage_filesystem'
      - 'Akeneo\Platform\JobAutomation\Domain\Model\Storage\AmazonS3Storage'
    tags:
      - { name: pim_import_export.storage_client_provider }

  Akeneo\Platform\JobAutomation\Infrastructure\StorageClient\MicrosoftAzure\MicrosoftAzureStorageClientProvider:
    class: AkeneoTest\Platform\Acceptance\ImportExport\FakeServices\FakeStorageClientProvider
    arguments:
      - '@oneup_flysystem.microsoft_azure_storage_filesystem'
      - 'Akeneo\Platform\JobAutomation\Domain\Model\Storage\MicrosoftAzureStorage'
    tags:
      - { name: pim_import_export.storage_client_provider }

  Akeneo\Platform\JobAutomation\Domain\Publisher\PublisherInterface:
    class: Akeneo\Platform\JobAutomation\Test\Acceptance\FakeService\FakeRetryPublisher

  akeneo.job_automation.query.find_users_to_notify:
    class: Akeneo\Platform\JobAutomation\Test\Acceptance\FakeService\FakeFindUsersToNotifyQuery

  akeneo.job_automation.query.get_asymmetric_keys:
    class: Akeneo\Platform\JobAutomation\Test\Acceptance\FakeService\FakeGetAsymmetricKeysQuery
