parameters:
    currency_entity_class:       Pim\Bundle\ConfigBundle\Entity\Currency
    currency_handler_class:      Pim\Bundle\ConfigBundle\Form\Handler\CurrencyHandler
    currency_type_class:         Pim\Bundle\ConfigBundle\Form\Type\CurrencyType
    
    locale_entity_class:       Pim\Bundle\ConfigBundle\Entity\Locale
    locale_handler_class:      Pim\Bundle\ConfigBundle\Form\Handler\LocaleHandler
    locale_type_class:         Pim\Bundle\ConfigBundle\Form\Type\LocaleType
    
    channel_entity_class:        Pim\Bundle\ConfigBundle\Entity\Channel
    channel_handler_class:       Pim\Bundle\ConfigBundle\Form\Handler\ChannelHandler
    channel_type_class:          Pim\Bundle\ConfigBundle\Form\Type\ChannelType

services:
    # Managers
    pim_config.manager.locale:
        class:     Pim\Bundle\ConfigBundle\Manager\LocaleManager
        arguments: [@doctrine.orm.entity_manager]
    
    pim_config.manager.currency:
        class:     Pim\Bundle\ConfigBundle\Manager\CurrencyManager
        arguments: [@doctrine.orm.entity_manager]

    # Form
    pim_config.form.channel:
        class:           Symfony\Component\Form\Form
        factory_method:  createNamed
        factory_service: form.factory
        arguments: ["pim_config_channel_form", "pim_config_channel"]
    
    pim_config.form.currency:
        class:           Symfony\Component\Form\Form
        factory_method:  createNamed
        factory_service: form.factory
        arguments: ["pim_config_currency_form", "pim_config_currency"]
        
    pim_config.form.locale:
        class:           Symfony\Component\Form\Form
        factory_method:  createNamed
        factory_service: form.factory
        arguments: ["pim_config_locale_form", "pim_config_locale"]

    # Types
    pim_config.form.type.channel:
        class: %channel_type_class%
        tags:
            - { name: form.type, alias: pim_config_channel }
    
    pim_config.form.type.currency:
        class: %currency_type_class%
        arguments: [%pim_config.currencies%]
        tags:
            - { name: form.type, alias: pim_config_currency }
    
    pim_config.form.type.locale:
        class: %locale_type_class%
        arguments: [%pim_config.locales%]
        tags:
            - { name: form.type, alias: pim_config_locale }
    
    # Handlers
    pim_config.form.handler.channel:
        class: %channel_handler_class%
        scope: request
        arguments: [@pim_config.form.channel, @request, @doctrine.orm.entity_manager]
    
    pim_config.form.handler.currency:
        class: %currency_handler_class%
        scope: request
        arguments: [@pim_config.form.currency, @request, @doctrine.orm.entity_manager]
    
    pim_config.form.handler.locale:
        class: %locale_handler_class%
        scope: request
        arguments: [@pim_config.form.locale, @request, @doctrine.orm.entity_manager]
        
    #Â Subscriber
    pim_config.user_preferences_listener:
        class: Pim\Bundle\ConfigBundle\EventListener\UserPreferencesListener
        calls:
            - [ setContainer, [ @service_container ] ]
        tags:
            - { name: doctrine.event_subscriber }
        