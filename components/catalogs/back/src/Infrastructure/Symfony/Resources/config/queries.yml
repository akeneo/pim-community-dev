parameters:
    akeneo_catalog.max_number_of_catalogs_per_user: 15

services:
    _defaults:
        autowire: true
        autoconfigure: true

    Akeneo\Catalogs\Application\Persistence\:
        resource: '../../../../Application/Persistence/**/*QueryInterface.php'

    Akeneo\Catalogs\Infrastructure\Persistence\:
        resource: '../../../../Infrastructure/Persistence/**/*Query.php'

    Akeneo\Catalogs\Infrastructure\Persistence\Catalog\IsCatalogsNumberLimitReachedQuery:
        arguments:
            $limit: '%akeneo_catalog.max_number_of_catalogs_per_user%'

    Akeneo\Catalogs\Infrastructure\Persistence\Family\SearchFamilyQuery:
        arguments:
            - '@pim_enrich.repository.family.search'

    Akeneo\Catalogs\Infrastructure\Persistence\Family\GetFamiliesByCodeQuery:
        arguments:
            - '@pim_enrich.repository.family.search'

    Akeneo\Catalogs\Infrastructure\Persistence\Family\GetFamilyLabelByCodeAndLocaleQuery:
        arguments:
            - '@pim_enrich.repository.family.search'

    Akeneo\Catalogs\Infrastructure\Persistence\Attribute\SearchAttributesQuery:
        arguments:
            - '@pim_enrich.repository.attribute.search'

    Akeneo\Catalogs\Infrastructure\Persistence\Attribute\SearchAttributeOptionsQuery:
        arguments:
            - '@pim_enrich.repository.attribute_option.search'

    Akeneo\Catalogs\Infrastructure\Persistence\Attribute\GetAttributeOptionsByCodeQuery:
        arguments:
            - '@pim_enrich.repository.attribute_option.search'

    Akeneo\Catalogs\Infrastructure\Persistence\Attribute\FindOneAttributeByCodeQuery:
        arguments:
            $repository: '@pim_catalog.repository.attribute'

    Akeneo\Catalogs\Infrastructure\Persistence\Locale\GetChannelLocalesQuery:
        arguments:
            - '@pim_catalog.repository.channel'

    Akeneo\Catalogs\Infrastructure\Persistence\Channel\GetChannelQuery:
        arguments:
            - '@pim_catalog.repository.channel'

    Akeneo\Catalogs\Infrastructure\Persistence\Channel\GetChannelsQuery:
        arguments:
            - '@pim_catalog.repository.channel'

    Akeneo\Catalogs\Infrastructure\Persistence\Channel\GetChannelsByCodeQuery:
        arguments:
            - '@pim_catalog.repository.channel'

    Akeneo\Catalogs\Infrastructure\Persistence\Locale\GetLocalesQuery:
        arguments:
            - '@pim_catalog.repository.locale'

    Akeneo\Catalogs\Infrastructure\Persistence\Locale\GetLocalesByCodeQuery:
        arguments:
            - '@pim_catalog.repository.locale'

    Akeneo\Catalogs\Infrastructure\Persistence\Category\GetCategoriesByCodeQuery:
        arguments:
            - '@pim_catalog.repository.category'

    Akeneo\Catalogs\Infrastructure\Persistence\Category\GetCategoryTreeRootsQuery:
        arguments:
            - '@akeneo.enrichment.public_api.find_category_trees'

    Akeneo\Catalogs\Infrastructure\Persistence\Category\GetCategoryChildrenQuery:
        arguments:
            - '@pim_catalog.repository.category'

    Akeneo\Catalogs\Infrastructure\Persistence\Category\GetProductCategoriesLabelsQuery:
        arguments:
            $enrichmentQueryBus: '@pim_enrich.product.query_message_bus'
        tags:
            - { name: kernel.reset, method: reset }

    Akeneo\Catalogs\Infrastructure\Persistence\Catalog\Product\GetProductsWithFilteredValuesQuery:
        arguments:
            $getConnectorProducts: '@akeneo.pim.enrichment.product.connector.get_product_from_uuids'

    Akeneo\Catalogs\Infrastructure\Persistence\Catalog\Product\GetProductQuery:
        arguments:
            $getConnectorProducts: '@akeneo.pim.enrichment.product.connector.get_product_from_uuids'

    Akeneo\Catalogs\Infrastructure\Persistence\Measurement\GetMeasurementsFamilyQuery:
        arguments:
            - '@akeneo_measurement.service_api.find_measurement_families'

    Akeneo\Catalogs\Infrastructure\Persistence\Currency\IsCurrencyActivatedQuery:
        arguments:
            - '@pim_catalog.repository.currency'

    Akeneo\Catalogs\Infrastructure\Persistence\Currency\GetCurrenciesQuery:
        arguments:
            - '@pim_catalog.repository.currency'

    Akeneo\Catalogs\Infrastructure\Persistence\Currency\GetChannelCurrenciesQuery:
        arguments:
            - '@pim_catalog.repository.channel'
