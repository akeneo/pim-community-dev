services:
    akeneo_enrichedentity.event_subscriber.installer:
        class: Akeneo\EnrichedEntity\Infrastructure\Symfony\EventListener\Installer
        arguments:
            - '@filesystem'
            - '%kernel.project_dir%'
            - '@doctrine.dbal.default_connection'
            - '@akeneo_file_storage.file_storage.file.file_storer'
        tags:
            - { name: kernel.event_subscriber }


    akeneo_enrichedentity.application.enriched_entity.edit_enriched_entity_handler:
        class: Akeneo\EnrichedEntity\Application\EnrichedEntity\EditEnrichedEntity\EditEnrichedEntityHandler
        arguments:
            - '@akeneo_enrichedentity.infrastructure.persistence.enriched_entity'
            - '@akeneo_file_storage.file_storage.file.file_storer'

    akeneo_enrichedentity.application.enriched_entity.edit_record_handler:
        class: Akeneo\EnrichedEntity\Application\Record\EditRecord\EditRecordHandler
        arguments:
            - '@akeneo_enrichedentity.infrastructure.persistence.record'

    akeneo_enrichedentity.application.enriched_entity.create_enriched_entity_handler:
        class: Akeneo\EnrichedEntity\Application\EnrichedEntity\CreateEnrichedEntity\CreateEnrichedEntityHandler
        arguments:
            - '@akeneo_enrichedentity.infrastructure.persistence.enriched_entity'

    akeneo_enrichedentity.application.enriched_entity.delete_enriched_entity_handler:
        class: Akeneo\EnrichedEntity\Application\EnrichedEntity\DeleteEnrichedEntity\DeleteEnrichedEntityHandler
        arguments:
            - '@akeneo_enrichedentity.infrastructure.persistence.enriched_entity'

    akeneo_enrichedentity.application.enriched_entity.create_record_handler:
        class: Akeneo\EnrichedEntity\Application\Record\CreateRecord\CreateRecordHandler
        arguments:
            - '@akeneo_enrichedentity.infrastructure.persistence.record'

    akeneo_enrichedentity.application.enriched_entity.create_attribute_handler:
        class: Akeneo\EnrichedEntity\Application\Attribute\CreateAttribute\CreateAttributeHandler
        arguments:
            - '@akeneo_enrichedentity.application.registry.attribute_factory'
            - '@akeneo_enrichedentity.infrastructure.persistence.attribute'

    akeneo_enrichedentity.application.enriched_entity.delete_attribute_handler:
        class: Akeneo\EnrichedEntity\Application\Attribute\DeleteAttribute\DeleteAttributeHandler
        arguments:
            - '@akeneo_enrichedentity.infrastructure.persistence.attribute'

    akeneo_enrichedentity.application.attribute.edit_attribute.edit_attribute_handler:
        class: Akeneo\EnrichedEntity\Application\Attribute\EditAttribute\EditAttributeHandler
        arguments:
            - '@akeneo_enrichedentity.application.edit_attribute.attribute_updater.attribute_updater_registry'
            - '@akeneo_enrichedentity.infrastructure.persistence.attribute'

    # Attribute updaters
    akeneo_enrichedentity.application.edit_attribute.attribute_updater.attribute_updater_registry:
        class: Akeneo\EnrichedEntity\Application\Attribute\EditAttribute\AttributeUpdater\AttributeUpdaterRegistry

    akeneo_enrichedentity.application.edit_attribute.attribute_updater.labels_updater:
        class: Akeneo\EnrichedEntity\Application\Attribute\EditAttribute\AttributeUpdater\LabelsUpdater
        tags:
            - { name: akeneo_enrichedentity.attribute_updater, priority: 120 }

    akeneo_enrichedentity.application.edit_attribute.attribute_updater.is_required_updater:
        class: Akeneo\EnrichedEntity\Application\Attribute\EditAttribute\AttributeUpdater\IsRequiredUpdater
        tags:
            - { name: akeneo_enrichedentity.attribute_updater, priority: 120 }

    akeneo_enrichedentity.application.edit_attribute.attribute_updater.max_length_updater:
        class: Akeneo\EnrichedEntity\Application\Attribute\EditAttribute\AttributeUpdater\MaxLengthUpdater
        tags:
            - { name: akeneo_enrichedentity.attribute_updater, priority: 120 }

    akeneo_enrichedentity.application.edit_attribute.attribute_updater.is_textarea:
        class: Akeneo\EnrichedEntity\Application\Attribute\EditAttribute\AttributeUpdater\IsTextareaUpdater
        tags:
            - { name: akeneo_enrichedentity.attribute_updater, priority: 120 }

    akeneo_enrichedentity.application.edit_attribute.attribute_updater.validation_rule:
        class: Akeneo\EnrichedEntity\Application\Attribute\EditAttribute\AttributeUpdater\ValidationRuleUpdater
        tags:
            - { name: akeneo_enrichedentity.attribute_updater, priority: 110 }

    akeneo_enrichedentity.application.edit_attribute.attribute_updater.regular_expression:
        class: Akeneo\EnrichedEntity\Application\Attribute\EditAttribute\AttributeUpdater\RegularExpressionUpdater
        tags:
            - { name: akeneo_enrichedentity.attribute_updater, priority: 100 }

    akeneo_enrichedentity.application.edit_attribute.attribute_updater.is_rich_text_editor:
        class: Akeneo\EnrichedEntity\Application\Attribute\EditAttribute\AttributeUpdater\IsRichTextEditorUpdater
        tags:
            - { name: akeneo_enrichedentity.attribute_updater, priority: 110 }

    akeneo_enrichedentity.application.edit_attribute.attribute_updater.max_file_size_updater:
        class: Akeneo\EnrichedEntity\Application\Attribute\EditAttribute\AttributeUpdater\MaxFileSizeUpdater
        tags:
            - { name: akeneo_enrichedentity.attribute_updater, priority: 110 }

    akeneo_enrichedentity.application.edit_attribute.attribute_updater.allowed_extensions_updater:
        class: Akeneo\EnrichedEntity\Application\Attribute\EditAttribute\AttributeUpdater\AllowedExtensionsUpdater
        tags:
            - { name: akeneo_enrichedentity.attribute_updater, priority: 110 }
