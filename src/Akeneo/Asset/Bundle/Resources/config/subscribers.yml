parameters:
    pimee_product_asset.event_subscriber.catalog.remove_channel.class: Akeneo\Asset\Bundle\EventSubscriber\ORM\RemoveChannelSubscriber
    pimee_product_asset.event_subscriber.asset_event.class: Akeneo\Pim\WorkOrganization\Workflow\Bundle\EventSubscriber\Asset\AssetEventSubscriber
    pimee_product_asset.event_subscriber.asset_updated_at.class: Akeneo\Asset\Bundle\EventSubscriber\AssetUpdatedAtSubscriber

services:
    pimee_product_asset.event_subscriber.catalog.remove_channel:
        class: '%pimee_product_asset.event_subscriber.catalog.remove_channel.class%'
        arguments:
            - '@pimee_product_asset.repository.variation'
            - '@pimee_product_asset.repository.channel_configuration'
            - '@pimee_product_asset.remover.variation'
            - '@pimee_product_asset.remover.channel_configuration'
            - '@pimee_product_asset.persistence.delete_variation_for_channel_id'
        tags:
            - { name: kernel.event_subscriber }

    pimee_product_asset.event_subscriber.asset_event:
        class: '%pimee_product_asset.event_subscriber.asset_event.class%'
        arguments:
            - '@pimee_workflow.doctrine.query.published_product_query_builder_factory'
            - '@pim_catalog.repository.attribute'
        tags:
            - { name: kernel.event_subscriber }

    pimee_product_asset.event_subscriber.asset_updated_at:
        class: '%pimee_product_asset.event_subscriber.asset_updated_at.class%'
        arguments:
            - '@doctrine.orm.entity_manager'
        tags:
            - { name: kernel.event_subscriber }

    pimee_product_asset.subscriber.compute_completeness_of_products_linked_to_assets:
        class: 'Akeneo\Asset\Bundle\EventSubscriber\ComputeCompletenessOfProductsLinkedToAssetsSubscriber'
        arguments:
                - '@akeneo_batch.job.job_instance_repository'
                - '@pim_catalog.repository.attribute'
                - '@pim_catalog.query.product_query_builder_factory'
                - '@akeneo_batch_queue.launcher.queue_job_launcher'
                - '@security.token_storage'
                - '@pimee_product_asset.remover.completeness'
        tags:
                - { name: kernel.event_subscriber }
