{% extends 'OroUIBundle:Form:fields.html.twig' %}

{% block form_row %}
    {% spaceless %}
        {% if form|is_flexible %}
            {{ block('form_row_flex') }}
        {% else %}
            <div class="control-group{% if attr.class is defined %} {{ attr.class }}{% endif %}">
                {{ form_label(form, '' , { label_attr: label_attr|merge({ class: 'control-label' })}) }}
                <div class="controls{% if errors|length > 0 %} validation-error{% endif %}">
                    {{ form_widget(form) }}
                    <div class="icons-container">
                        {{ form_errors(form) }}
                    </div>
                </div>
            </div>
        {% endif %}
    {% endspaceless %}
{% endblock form_row %}

{% block form_label %}
{% spaceless %}
    {% if label is not sameas(false) %}
        {% if not compound %}
            {% set label_attr = label_attr|merge({'for': id}) %}
        {% endif %}
        {% if required %}
            {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
        {% endif %}
        {% if label is empty %}
            {% set label = name|humanize %}
        {% endif %}
        {% set isRadioLabel = form.parent.vars.expanded|default(false) and checked is defined %}
        <label{% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>{% if required and not isRadioLabel %}<em>*</em>{% endif %}{{ label|trans({}, translation_domain) }}</label>
    {% endif %}
{% endspaceless %}
{% endblock form_label %}

{% block pim_wysiwyg_widget %}
    {{ block('textarea_widget') }}
{% endblock %}

{% block pim_translatable_field_row %}
    {{ form_errors(form) }}
    <table class="table table-condensed">
        <thead>
            <tr>
                {% for translation in form %}
                    <th>{{ form_label(translation) }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <tr>
                {% for translation in form %}
                    <td>
                        {{ form_errors(translation) }}
                        {{ form_widget(translation) }}
                    </td>
                {% endfor %}
            </tr>
        </tbody>
    </table>
{% endblock %}

{% block oro_media_row %}
    {% spaceless %}

    {% set empty = not form.vars.value or not form.vars.value.filePath %}
    <div class="control-group">
        {{ form_label(form, null, { 'label_attr': {'class': 'control-label'} }) }}
        <div class="controls">
            <label class="upload-zone file{% if empty %} empty{% endif %}">
                <div class="upload-info">
                    {% if not empty %}
                        {{ form_widget(form.removed, {'attr': { 'class': 'noswitch hide' }}) }}
                        <a class="no-hash upload-preview" href="{{ asset(form.vars.value.filePath) }}">{{ form.vars.value.originalFilename }}</a>
                    {% else %}
                        <i class="fa-icon-file upload-preview empty"></i>
                    {% endif %}
                    <span class="upload-filename" data-empty-title="{{ 'Drop a file or click here'|trans }}">{% if empty %}{{ 'Drop a file or click here'|trans }}{% else %}{{ form.vars.value.originalFilename }}{% endif %}</span>
                    <i class="fa-icon-remove remove-upload{% if empty %} hide{% endif %}" rel="tooltip" data-original-title="{{ 'Remove this file'|trans }}"></i>
                </div>
                <input type="file"{% if not empty %} class="hide" disabled="disabled"{% endif %} {{ block('widget_attributes') }}>
            </label>
            <div class="icons-container">
                {{ form_errors(form) }}
            </div>
        </div>
    </div>

    {% endspaceless %}
{% endblock %}

{% block pim_image_row %}
    {% spaceless %}

    {% set empty = not form.vars.value or not form.vars.value.filePath %}
    <div class="control-group">
        {{ form_label(form, null, { 'label_attr': {'class': 'control-label'} }) }}
        <div class="controls">
            <label class="upload-zone image{% if empty %} empty{% endif %}">
                <div class="upload-info">
                    {% if not empty %}
                        {{ form_widget(form.removed, {'attr': { 'class': 'noswitch hide' }}) }}
                        <a class="no-hash upload-preview" href="{{ asset(form.vars.value.filePath) }}" rel="lightbox">
                            <img src="{{ asset(form.vars.value.filePath) }}">
                        </a>
                    {% else %}
                        <i class="fa-icon-camera-retro upload-preview empty"></i>
                    {% endif %}
                    <span class="upload-filename" data-empty-title="{{ 'Drop an image or click here'|trans }}">{% if empty %}{{ 'Drop an image or click here'|trans }}{% else %}{{ form.vars.value.originalFilename }}{% endif %}</span>
                    <i class="fa-icon-remove remove-upload{% if empty %} hide{% endif %}" rel="tooltip" data-original-title="{{ 'Remove this image'|trans }}"></i>
                </div>
                <input type="file"{% if not empty %} class="hide" disabled="disabled"{% endif %} {{ block('widget_attributes') }}>
            </label>
            <div class="icons-container">
                {{ form_errors(form) }}
            </div>
        </div>
    </div>

    {% endspaceless %}
{% endblock %}

{% block widget_attributes %}
{% if attr.class is defined %}
    {% if attr.class != 'noswitch' %}
        {% set class = attr.class ~ ' input-large' %}
    {% else %}
        {% set class = attr.class %}
    {% endif %}
{% else %}
    {% set class = 'input-large' %}
{% endif %}
{% set attr = attr|merge({'class': class }) %}
{% spaceless %}
    id="{{ id }}" name="{{ full_name }}"{% if read_only %} readonly="readonly"{% endif %}{% if disabled %} disabled="disabled"{% endif %}{% if required %} required="required"{% endif %}{% if max_length %} maxlength="{{ max_length }}"{% endif %}{% if pattern %} pattern="{{ pattern }}"{% endif %}
    {% for attrname, attrvalue in attr %}{% if attrname in ['placeholder', 'title'] %}{{ attrname }}="{{ attrvalue|trans({}, translation_domain) }}" {% else %}{{ attrname }}="{{ attrvalue }}" {% endif %}{% endfor %}
{% endspaceless %}
{% endblock widget_attributes %}

{% block checkbox_widget %}
{% spaceless %}
    {% if attr.class is defined and 'noswitch' in attr.class %}
        <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %}>
    {% else %}
        <div class="switch {% if attr['size'] is defined %}{{ attr['size'] ? 'switch-' ~ attr['size'] : '' }}{% else %}switch-small{% endif %}" data-on-label="{% if attr['data-on-label'] is defined %}{{ attr['data-on-label']|trans }}{% else %}{{ 'Yes'|trans }}{% endif %}" data-off-label="{% if attr['data-off-label'] is defined %}{{ attr['data-off-label']|trans }}{% else %}{{ 'No'|trans }}{% endif %}">
            {% if required %}{% set required = false %}{% endif %}
            <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %}>
        </div>
    {% endif %}
{% endspaceless %}
{% endblock checkbox_widget %}

{% block oro_flexibleentity_metric_widget %}
{% spaceless %}
    {{ form_widget(form.unit) }}
    {{ form_widget(form.data) }}
{% endspaceless %}
{% endblock oro_flexibleentity_metric_widget %}

{% block pim_product_price_collection_widget %}
    {% for child in form.children %}
        {% if child.vars.value.currency == localeCurrency() %}
            {{ form_widget(child) }}
        {% endif %}
    {% endfor %}
    {% for child in form.children %}
        {% if child.vars.value.currency != localeCurrency() %}
            {{ form_widget(child) }}
        {% endif %}
    {% endfor %}
{% endblock pim_product_price_collection_widget %}

{% block pim_product_price_widget %}
{% spaceless %}
    {{ form_widget(form.currency) }}
    {{ form_row(form.data, {label:currencySymbol(form.currency.vars.value)} ) }}
{% endspaceless %}
{% endblock pim_product_price_widget %}

{% block pim_batch_step_element_configuration_widget %}
    {% for child in form %}
        <div id="{{ child.vars.id }}">
            <div class="control-group">
                {{ form_label(child, child.vars.label, {label_attr: {class: 'control-label'}}) }}
                <div class="controls {{ not child.vars.valid ? ' validation-error' : '' }}">
                    {{ form_widget(child) }}
                    {{ form_errors(child) }}
                    {% if child.vars.attr.help is defined %}
                        <span class="help-inline">{{ child.vars.attr.help|trans }}</span>
                    {% endif %}
                </div>
            </div>
        </div>
    {% else %}
        {{ 'No configuration'|trans }}
    {% endfor %}
{% endblock pim_batch_step_element_configuration_widget %}

{% block pim_attribute_requirement_widget %}
    <div class="attribute-requirement" data-required-title="{{ 'Required'|trans }}" data-not-required-title="{{ 'Not required'|trans }}">
        <input type="checkbox" id="{{ form.required.vars.id }}" name="{{ form.required.vars.full_name }}" class="hide" {% if form.required.vars.checked %}checked="checked"{% endif %} />
        {% if form.required.vars.checked %}
        <i class="fa-icon-ok required" data-toggle="tooltip" data-placement="right"></i>
        {% else %}
        <i class="fa-icon-circle non-required" data-toggle="tooltip" data-placement="right"></i>
        {% endif %}
    </div>
{% endblock pim_attribute_requirement_widget %}
